<%!
    from pylowiki.lib.db.user import getUserByID
%>

<%inherit file = "/base/template.html"/>


<div class="left headline banner_div">
    <h2 class="banner"><a href = "/workshop/${c.w['urlCode']}/${c.w['url']}">${c.w['title']}</a></h2> 
    <br/>
</div> <!-- left headline -->
<div id="suggestion_main" class="left clr">
    % if c.r:
       <h3>Edit Resource</h3>
        <form class="left" id="resourcedata" action="/saveResource/${c.r['urlCode']}/${c.r['url']}" method = "post">
    % else:
       <h3>Add Resource</h3>
        <form class="left" id="resourcedata" action="/addResource/${c.w['urlCode']}/${c.w['url']}" method = "post">
    % endif
    <br /><br />
            % if c.r:
                <% linkValue = c.r['link'] %>
            % else:
                <% linkValue = '' %>
            % endif
            <strong>Resource URL:</strong><br />
            <input type="text" id="resourceurl" size=50 name = "link" value="${linkValue}"/>
            <br /><br />

            <strong>Resource Title:</strong><br />
            Keep the title short and informative as possible.<br />
            % if c.r:
                <% titleValue = c.r['title'] %>
            % else:
                <% titleValue = '' %>
            % endif
            <input type="text" id="resourcetitle" size=50 name = "title" value="${titleValue}"/>
            <br /> <br />
            <strong>Description:</strong><br />
            Please provide a complete description of your information resource.<br />
            % if c.r:
                <% commentValue = c.r['comment'] %>
            % else:
                <% commentValue = '' %>
            % endif
            <textarea id="resourcetext" name="comment" rows=8 cols=50 onkeyup="previewAjax( 'resourcetext', 'resource-preview-div' )" class="markitup">${commentValue}</textarea>
            <div id="resource-preview-div"></div>
            <br /><br />
            Allow member comments:<br />
            % if c.r and 'allowComments' in c.r and c.r['allowComments'] == '0':
               <% noChecked = 'checked' %>
               <% yesChecked = '' %>
            % else:
               <% yesChecked = 'checked' %>
               <% noChecked = '' %>
            % endif
            <input type=radio name=allowComments value=1 ${yesChecked}> Yes 
            &nbsp;&nbsp;&nbsp;
            <input type=radio name=allowComments value=0 ${noChecked}> No 
            <br /><br />
            <button type="submit" class="gold">Submit</button>
        </form>
</div> <!-- resource_main -->
        	
<div id="resource_side" class="left">
    <h3>Other Resources</h3>
    <ul id="related_resource">
    % if len(c.otherResources) == 0:
       <li>No other resources!</li>
    % else:
        % for resource in c.otherResources:
            <% author = getUserByID(resource.owner)%>
            <li>
            <strong class="issue_name"><a href="/workshop/${c.w['urlCode']}/${c.w['url']}/resource/${resource['urlCode']}/${resource['url']}">${resource['title']}</a></strong>
            <br />
            <span class="gray">By <a href="/profile/${author['urlCode']}/${author['url']}">${author['name']}</a></span>
            </li>
        % endfor
    % endif
    </ul> <!-- related_resource -->
</div>
<%def name = 'extraHTML()'>
</%def>

<%def name = 'extraStyles()'>
    <link type="text/css" rel="stylesheet" href="/styles/suggestion.css" />
    <link type="text/css" rel="stylesheet" href="/js/markitup/skins/simple/style.css" />
    <link type="text/css" rel="stylesheet" href="/js/markitup/sets/rst/style.css" />
</%def>

<%def name = 'extraScripts()'>
    <script src = "/js/h2banner.js" type="text/javascript"></script>
    <script src = "/js/javascript.js" type="text/javascript"></script>
    <script src = "/js/markitup/jquery.markitup.js" type="text/javascript"></script>
    <script src = "/js/markitup/sets/rst/set.js" type="text/javascript"></script>

    <script language="javascript">
        $(document).ready(function()	{
            $(".markitup").markItUp(mySettings);
        });
    </script>
    
    <script src = "/js/upDown.js" type="text/javascript"></script>
</%def>
