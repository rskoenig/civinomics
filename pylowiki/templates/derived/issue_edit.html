<%inherit file = "/base/template.html"/>

<% counter = 1 %> 
<% numrows = 10 %>
<% numcols = 10 %>

    <div class="banner_div">
        <h2 class="banner">Edit Issue</h3>
    </div>
</div>
<form id="edit_issue" class="left" action = "/issue/${c.url}/edit_handler" enctype="multipart/form-data" method="post" >
    <strong class="gray">Basic Information</strong>
    <input type="hidden" name="pId" value="${c.pId}">
    <br /><br />
    <div id="government_sphere" class="left">
        Government Sphere: <span class="darkorange">*</span>
        <br />
        <div class="select">
            <select class="left" name = "governmentSpheres">
                <option value="">select existing</option>
                % for item in c.governmentSpheres:
                    % if c.currentSphere == item['id']:
                        <option value="${item['id']}" selected="selected">${item["name"]}</option>
                    % else:
                        <option value="${item['id']}">${item["name"]}</option>
                    % endif
                % endfor
            </select>
        </div>
        <div class="left" id="create_new">
            <em>create new</em>
            <br /><br />
            Name:
            <br />
            <input type="text" class="wide" name = "newGovtSphereName"/>
            <br /><br />
            Photo:
            <br />
            ##<input type="file" class="gray" name = "newGovtSpherePhoto"/>
            ${h.file("newGovtSpherePhoto")}
            <br /><br />
        </div> <!-- create_new -->
    </div> <!-- government sphere -->
    <div id="goals" class="clr">
        Goals: <span class="darkorange">*</span>
        <br />
        <div style="display:inline; text-align:center;" id="textareadiv${counter}">
            <br />
            <textarea rows="${numrows}" cols="${numcols}" id="textarea${counter}" name="goals" onkeyup="previewAjax( 'textarea${counter}', 'section${counter}' )" class="markitup">${c.goals}</textarea>
            <% counter = counter + 1 %>
        </div>
    </div>    
    
    <div id="end-dates">
        Issue Phase End-dates: <span class="darkorange">*</span>
        <table>
            <tr>
                <td>
                <td class="gray">Month</td>
                <td class="gray">Day</td>
                <td class="gray">Year</td>
            </tr>
            <tr>
                <td>Suggestion</td>
                <td>
                    <div class="select">
                        <select class="gray" name = "suggestionMonth">
                            <% i = 1 %>
                            % for item in c.months:
                                % if c.monthSug == i:
                                    <option value="${i}" selected="selected">${item}</option>
                                % else:
                                    <option value="${i}">${item}</option>
                                % endif
                                <% i += 1 %>
                            % endfor
                        </select>
                    </div>
                </td>
                
                <td>
                    <div class="select">
                        <select class="gray" name = "suggestionDay">
                            % for item in c.days:
                                % if c.daySug == item:
                                    <option value="${item}" selected="selected">${item}</option>
                                % else:
                                    <option value="${item}">${item}</option>
                                % endif
                            % endfor
                        </select>
                    </div>
                </td>
                
                <td>
                    <div class="select">
                        <select class="gray" name = "suggestionYear">
                            % for item in c.years:
                                % if c.yearSug == item:
                                    <option value="${item}" selected="selected">${item}</option>
                                % else:
                                    <option value="${item}">${item}</option>
                                % endif
                            % endfor
                        </select>
                    </div>
                </td>
            </tr>
            
            <tr>
                <td>Solution</td>
                <td>
                    <div class="select">
                        <select class="gray" name = "solutionMonth">
                            <% i = 1 %>
                            % for item in c.months:
                                % if c.monthSol == i:
                                    <option value="${i}" selected="selected">${item}</option>
                                % else:
                                    <option value="${i}">${item}</option>
                                % endif
                                <% i += 1 %>
                            % endfor
                        </select>
                    </div>
                </td>
                
                <td>
                    <div class="select">
                        <select class="gray" name = "solutionDay">
                            % for item in c.days:
                                % if c.daySol == item:
                                    <option value="${item}" selected="selected">${item}</option>
                                % else:
                                    <option value="${item}">${item}</option>
                                % endif
                            % endfor
                        </select>
                    </div>
                </td>
                
                <td>
                    <div class="select">
                        <select class="gray" name = "solutionYear">
                            % for item in c.years:
                                % if c.yearSol == item:
                                    <option value="${item}" selected="selected">${item}</option>
                                % else:
                                    <option value="${item}">${item}</option>
                                % endif
                            % endfor
                        </select>
                    </div>
                </td>
            </tr>
            
            <tr>
                <td>Solution Package</td>
                <td>
                    <div class="select">
                        <select class="gray" name = "solutionPkgMonth">
                            <% i = 1 %>
                            % for item in c.months:
                                % if c.monthPkg == i:
                                    <option value="${i}" selected="selected">${item}</option>
                                % else:
                                    <option value="${i}">${item}</option>
                                % endif
                                <% i += 1 %>
                            % endfor
                        </select>
                    </div>
                </td>
                
                <td>
                    <div class="select">
                        <select class="gray" name = "solutionPkgDay">
                            % for item in c.days:
                                % if c.dayPkg == item:
                                    <option value="${item}" selected="selected">${item}</option>
                                % else:
                                    <option value="${item}">${item}</option>
                                % endif
                            % endfor
                        </select>
                    </div>
                </td>
                
                <td>
                    <div class="select">
                        <select class="gray" name = "solutionPkgYear">
                            % for item in c.years:
                                % if c.yearPkg == item:
                                    <option value="${item}" selected="selected">${item}</option>
                                % else:
                                    <option value="${item}">${item}</option>
                                % endif
                            % endfor
                        </select>
                    </div>
                </td>
            </tr>
        </table>
    </div><!-- end-dates -->
    <hr />

    <hr />
    
    <div id="issue_slideshow">
    	<a href = '/issue/${c.url}/editSlideshow' ><strong>Issue Slideshow</strong></a>
    </div>
    <%doc>
    <div id="issue_slideshow">
        <strong class="gray">Issue Slideshow</strong>
        <br />
        Currently ${c.slideCount} entries.<br />
        Add 
        <select class="gray" name = "numSlideshowEntries">
            % for i in range(0, c.maxSlideshowEntries - c.slideCount + 1):
                % if i==0:
                    <option value="${i}" selected="selected">${i}</option>
                % else:
                    <option value="${i}">${i}</option>
                % endif
            % endfor
        </select>
         more slides.
    </div>
	</%doc>
	
    <input type='button' value='Cancel' onclick='history.go(-1)'>
    ${h.submit('submit', 'Save')}
</form>
            
            
<%def name = 'extraHTML()'>

</%def>
            
<%def name = 'extraStyles()'>
    <link type="text/css" rel="stylesheet" href="${h.url_for('/styles/issue_create.css')}" />
    <link type="text/css" rel="stylesheet" href="${h.url_for('/js/markitup/skins/simple/style.css')}" />
    <link type="text/css" rel="stylesheet" href="${h.url_for('/js/markitup/sets/rst/style.css')}" />
    <link type="text/css" rel="stylesheet" href="${h.url_for('/css/pygments/pygments-tango.css')}" />
</%def>

<%def name = 'extraScripts()'>
    <script src="${h.url_for('/js/h2banner.js')}" type="text/javascript"></script>
    <script src = "${h.url_for('/js/markitup/jquery.markitup.js')}" type="text/javascript"></script>
    <script src = "${h.url_for('/js/markitup/sets/rst/set.js')}" type="text/javascript"></script>
    <script src = "${h.url_for('/js/javascript.js')}" type="text/javascript"></script>
    
    <script language="javascript">
        $(document).ready(function()	{
            $(".markitup").markItUp(mySettings);
        });
    </script>
    
    <script>
        $(function(){
            $("#photo_container").slides({
                preload: true,
                generatePagination: false
            });
        });
    </script>
</%def>
