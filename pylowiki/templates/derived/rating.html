<script src = "/js/jquery-1.6.2.min.js" type="text/javascript"></script>

<script type="text/javascript">

var sMax;
var holder; 
var preSet;
var rated;


function rating(num){
	sMax = 0;	
	for(n=0; n<num.parentNode.childNodes.length; n++){
		if(num.parentNode.childNodes[n].nodeName == "A"){
			sMax++;	
		}
	}
	
	if(!rated){
		s = num.id.replace("_", '');
		a = 0;
		for(i=1; i<=sMax; i++){		
			if(i<=s){
				document.getElementById("_"+i).className = "on";
				document.getElementById("rateStatus").innerHTML = num.title;	
				holder = a+1;
				a++;
			}else{
				document.getElementById("_"+i).className = "";
			}
		}
	}
}

function off(me){
	if(!rated){
		if(!preSet){	
			for(i=1; i<=sMax; i++){		
				document.getElementById("_"+i).className = "";
				document.getElementById("rateStatus").innerHTML = me.parentNode.title;
			}
		}else{
			rating(preSet);
			document.getElementById("rateStatus").innerHTML = document.getElementById("ratingSaved").innerHTML;
		}
	}
}

function rateIt(me){
	if(!rated){
		document.getElementById("rateStatus").innerHTML = document.getElementById("ratingSaved").innerHTML + " :: "+me.title;
		preSet = me;
		rated=1;
		sendRate(me);
		rating(me);
	}
}

function sendRate(sel){
	thisURL = "/issue/ninja-tunas/suggestion/oneWord/rate/4"
	$.ajax({
		type: "POST",
  		url: thisURL,
 		data: "name=John&location=Boston",
	}).done(function( msg ) {
  	alert( "Data Saved: " + msg );
	});
}

</script> 


<span id="rateStatus">Rate Me...</span>
<span id="ratingSaved">Rating Saved!</span>


<div id="rateMe" title="Rate Me...">
    <a onclick="rateIt(this)" id="_1" title="ehh..." onmouseover="rating(this)" onmouseout="off(this)"></a>
    <a onclick="rateIt(this)" id="_2" title="Not Bad" onmouseover="rating(this)" onmouseout="off(this)"></a>
    <a onclick="rateIt(this)" id="_3" title="Pretty Good" onmouseover="rating(this)" onmouseout="off(this)"></a>
    <a onclick="rateIt(this)" id="_4" title="Very Good" onmouseover="rating(this)" onmouseout="off(this)"></a>
    <a onclick="rateIt(this)" id="_5" title="Excellent!" onmouseover="rating(this)" onmouseout="off(this)"></a>
</div>

<style type="text/css">
    #rateStatus{float:left; clear:both; width:100%; height:20px;}
    #rateMe{float:left; clear:both; width:100%; height:auto; padding:0px; margin:0px;}
    #rateMe li{float:left;list-style:none;}
    #rateMe li a:hover,
    #rateMe .on{background:url("/images/star_green.png") no-repeat;}
    #rateMe a{float:left;background:url("/images/star_grey.png") no-repeat;width:15px; height:15px;}
    #ratingSaved{display:none;}
    .saved{color:red; }
</style>

