<%!
    from pylowiki.lib.db.user import getUserByID
%>

<%inherit file = "/base/template.html"/>


<div class="left headline banner_div">
    <h2 class="banner"><a href = "/workshop/${c.w['urlCode']}/${c.w['url']}">${c.w['title']}</a></h2> 
    <br/>
</div> <!-- left headline -->
<div id="suggestion_main" class="left clr">
    % if c.s:
       <h3>Edit Suggestion</h3>
        <form class="left" id="suggestiondata" action="/saveSuggestion/${c.s['urlCode']}/${c.s['url']}" method = "post">
    % else:
       <h3>Add Suggestion</h3>
        <form class="left" id="suggestiondata" action="/addSuggestion/${c.w['urlCode']}/${c.w['url']}" method = "post">
    % endif
            <strong>Suggestion Title:</strong><br />
            Keep the title short and informative as possible.<br />
            % if c.s:
                <% titleValue = c.s['title'] %>
            % else:
                <% titleValue = '' %>
            % endif
            <input type="text" id="suggestiontitle" size=50 name = "title" value="${titleValue}"/>
            <br /> <br />
            <strong>Full Suggestion:</strong><br />
            Please provide a complete description of your suggestion.<br />
            % if c.s:
                <% dataValue = c.s['data'] %>
            % else:
                <% dataValue = '' %>
            % endif
            <textarea id="suggestiontext" name="data" rows=8 cols=50 onkeyup="previewAjax( 'suggestiontext', 'suggestion-preview-div' )" class="markitup">${dataValue}</textarea>
            <div id="suggestion-preview-div"></div>
            <br /><br />
            Allow member comments:<br />
            % if c.s and 'allowComments' in c.s and c.s['allowComments'] == '0':
               <% noChecked = 'checked' %>
               <% yesChecked = '' %>
            % else:
               <% yesChecked = 'checked' %>
               <% noChecked = '' %>
            % endif
            <input type=radio name=allowComments value=1 ${yesChecked}> Yes 
            &nbsp;&nbsp;&nbsp;
            <input type=radio name=allowComments value=0 ${noChecked}> No 
            <br /><br />
            <button type="submit" class="gold">Submit</button>
        </form>
</div> <!-- suggestion_main -->
        	
<div id="suggestion_side" class="left">
    <h3>Other Suggestions</h3>
    <ul id="related_suggestion">
    % if len(c.suggestions) == 0:
       <li>No other suggestions!</li>
    % else:
        % for suggestion in c.suggestions:
            <% author = getUserByID(suggestion.owner)%>
            <li>
            <strong class="issue_name"><a href="/workshop/${c.w['urlCode']}/${c.w['url']}/suggestion/${suggestion['urlCode']}/${suggestion['url']}">${suggestion['title']}</a></strong>
            <br />
            <span class="gray">By <a href="/profile/${author['urlCode']}/${author['url']}">${author['name']}</a></span>
            </li>
        % endfor
    % endif
    </ul> <!-- related_suggestion -->
</div>
<%def name = 'extraHTML()'>
</%def>

<%def name = 'extraStyles()'>
    <link type="text/css" rel="stylesheet" href="/styles/suggestion.css" />
    <link type="text/css" rel="stylesheet" href="/js/markitup/skins/simple/style.css" />
    <link type="text/css" rel="stylesheet" href="/js/markitup/sets/rst/style.css" />
</%def>

<%def name = 'extraScripts()'>
    <script src = "/js/h2banner.js" type="text/javascript"></script>
    <script src = "/js/javascript.js" type="text/javascript"></script>
    <script src = "/js/markitup/jquery.markitup.js" type="text/javascript"></script>
    <script src = "/js/markitup/sets/rst/set.js" type="text/javascript"></script>

    <script language="javascript">
        $(document).ready(function()	{
            $(".markitup").markItUp(mySettings);
        });
    </script>
    
    <script src = "/js/upDown.js" type="text/javascript"></script>
</%def>
