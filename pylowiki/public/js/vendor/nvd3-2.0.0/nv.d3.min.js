/*! nvd3 - v0.0.1 - 2014-05-19 */!function(a,b){"function"==typeof define&&define.amd?define(["exports","d3"],b):"object"==typeof exports?b(exports,require("d3")):b(a.nv={},a.d3)}(this,function(a,b){function c(a,b){return new Date(b,a+1,0).getDate()}function d(a,b,c){return function(d,e,f){var g=a(d),h=[];if(d>g&&b(g),f>1)for(;e>g;){var i=new Date(+g);c(i)%f===0&&h.push(i),b(g)}else for(;e>g;)h.push(new Date(+g)),b(g);return h}}function e(a,c){this.options=J.utils.extend({},a,K),this.options.id=Math.floor(1e4*Math.random());var d=this.options.margin;Object.defineProperty(d,"leftright",{get:function(){return d.left+d.right}}),Object.defineProperty(d,"topbottom",{get:function(){return d.top+d.bottom}}),c=J.utils.valueOrDefault(c,[]),c=c.concat(["stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"]),this.dispatch=b.dispatch.apply(null,c),this.renderWatch=J.utils.renderWatch(this.dispatch)}function f(a){a=J.utils.extend({},a,L,{margin:{top:0,right:0,bottom:0,left:0},width:75,height:60,chartClass:"axis",wrapClass:"axis"}),e.call(this,a),this.axis=b.svg.axis(),this.axis.scale(this.scale()).orient("bottom").tickFormat(function(a){return a})}function g(a){a=J.utils.extend({},a,M,{margin:{top:5,right:0,bottom:5,left:0},width:400,height:20,chartClass:"legend",wrapClass:"legend"}),e.call(this,a,["legendClick","legendDblclick","legendMouseover","legendMouseout"])}function h(a){a=J.utils.extend({},a,N,{margin:{top:0,right:0,bottom:0,left:0},width:400,chartClass:"distribution",wrapClass:"distribution"}),e.call(this,a,[]),this.getData(function(a){return a[this.axis()]}.bind(this)),this.renderWatch=J.utils.renderWatch(this.dispatch,this.duration())}function i(a,b){a=J.utils.extend({},a,O),a.tooltip=J.utils.valueOrDefault(a.tooltip,function(a,b){return"<h3>"+a+"</h3><p>"+b+"</p>"}),a.tooltips=J.utils.valueOrDefault(a.tooltips,!0),a.showLegend=J.utils.valueOrDefault(a.showLegend,!0),b=J.utils.valueOrDefault(b,[]),a.tooltips&&(b=b.concat(["tooltipShow","tooltipHide"])),e.call(this,a,b),this.legend=J.models.legend(),this.state=J.utils.valueOrDefault(this.state,{}),this.xAxis=this.getAxis(),this.yAxis=this.getAxis()}function k(a){a=J.utils.extend({},a,P,{margin:{top:0,right:0,bottom:0,left:0},width:960,height:500,chartClass:"discretebar"}),e.call(this,a,[])}function l(a){a=J.utils.extend({},a,Q,{margin:{top:15,right:10,bottom:50,left:60},chartClass:"discreteBarWithAxes",wrapClass:"barsWrap"}),this.discreteBar=this.getDiscreteBar(),this.state=this.getStateManager(),i.call(this,a)}function m(a){a=J.utils.extend({},a,R,{margin:{top:0,right:0,bottom:0,left:0},width:960,height:500,chartClass:"historicalBar"}),e.call(this,a,[])}function n(a){a=J.utils.valueOrDefault(a,{margin:{top:30,right:90,bottom:50,left:90},chartClass:"historicalBarChart",wrapClass:"barsWrap"}),i.call(this,a),this.historicalBar=J.models.historicalBar(),this.xScale=this.historicalBar.xScale,this.yScale=this.historicalBar.yScale,this.state=this.getStateManager()}function o(a){a=J.utils.extend({},a,T,{margin:{top:0,right:0,bottom:0,left:0},width:500,height:500,chartClass:"multibar"}),e.call(this,a,[]),this.renderWatch=J.utils.renderWatch(this.dispatch,this.duration())}function p(a){a=J.utils.extend({},a,U,{margin:{top:30,right:20,bottom:50,left:60},chartClass:"multiBarWithLegend",wrapClass:"barsWrap"}),i.call(this,a),this.multibar=this.getMultiBar(),this.controls=this.getLegend(),this.state=this.getStateManager(),this.state.stacked=!1,this.stateGetter=function(a){return function(){return{active:a.map(function(a){return!a.disabled}),stacked:this.stacked()}}}.bind(this),this.stateSetter=function(a){return function(b){void 0!==b.stacked&&this.stacked(b.stacked),void 0!==b.active&&a.forEach(function(a,c){a.disabled=!b.active[c]})}}.bind(this),this.controls.updateState(!1)}function q(a){a=J.utils.extend({},a,V,{margin:{top:0,right:0,bottom:0,left:0},width:960,height:500,chartClass:"multibarHorizontal",wrapClass:""}),this._barColor=J.utils.defaultColor(),this._color=J.utils.defaultColor(),i.call(this,a,["chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"])}function r(a){var c=this;a=J.utils.extend({},a,W,{margin:{top:30,right:20,bottom:50,left:60},chartClass:"multiBarHorizontalChart",wrapClass:"barsWrap"}),i.call(this,a,["tooltipShow","tooltipHide","stateChange","changeState","renderEnd"]),this.multibarHorizontal=this.getMultibarHorizontal(),this.legend=this.getLegend(),this.xAxis=this.getAxis(),this.yAxis=this.getAxis(),this.state={stacked:this.stacked()},this._color=J.utils.defaultColor(),this.legend=J.models.legend().height(30),this.controls=J.models.legend().height(30).updateState(!1),this.controlWidth=function(){return c.showControls()?180:0},this.multibarHorizontal.stacked(this.stacked()),this.xAxis.orient("left").tickPadding(5).highlightZero(!1).showMaxMin(!1).tickFormat(function(a){return a}),this.yAxis.orient("bottom").tickFormat(b.format(",.1f")),this.state=this.getStateManager(),this.state.stacked=!1,this.showTooltip=function(a,b){var d=a.pos[0]+(b.offsetLeft||0),e=a.pos[1]+(b.offsetTop||0),f=c.xAxis.tickFormat()(c.multibarHorizontal.x()(a.point,a.pointIndex)),g=c.yAxis.tickFormat()(c.multibarHorizontal.y()(a.point,a.pointIndex)),h=c.tooltip()(a.series.key,f,g);J.tooltip.show([d,e],h,a.value<0?"e":"w",null,b)},this.stateGetter=function(a){return function(){return{active:a.map(function(a){return!a.disabled}),stacked:c.stacked()}}},this.stateSetter=function(a){return function(b){void 0!==b.stacked&&c.stacked(b.stacked),void 0!==b.active&&a.forEach(function(a,c){a.disabled=!b.active[c]})}}}function s(a){a=J.utils.extend({},a,X,{margin:{top:0,right:0,bottom:0,left:0},width:380,height:30,chartClass:"bullet"}),e.call(this,a,[]),this.xScale0(this.__chart__||b.scale.linear()),this.renderWatch=J.utils.renderWatch(this.dispatch)}function t(a){a=J.utils.extend({},a,Y,{margin:{top:5,right:40,bottom:20,left:120},chartClass:"bulletChart",wrapClass:"bulletWrap"}),i.call(this,a),this.bullet=this.getBullet(),this.state=this.getStateManager()}function u(a){a=J.utils.extend({},a,Z,{margin:{top:30,right:30,bottom:50,left:60},chartClass:"cumulativeLine",wrapClass:"linesWrap"}),i.call(this,a,[""]),this.line=this.getLine(),this.controls=this.getLegend(),this.controls.updateState(!1),this.interactiveLayer=this.getInteractiveLayer(),this.state=b.functor({index:0,rescaleY:this.rescaleY()}),this.indexLine=null}function v(a){a=J.utils.extend({},a,$,{margin:{top:0,right:0,bottom:0,left:0},width:960,height:500,chartClass:"line",wrapClass:"scatterWrap"}),e.call(this,a,[]),this.scatter=this.getScatter().size(16).sizeDomain([16,256]),this.scatter.size(),this.renderWatch=J.utils.renderWatch(this.dispatch,this.duration())}function w(a){a=J.utils.extend({},a,_,{margin:{top:30,right:20,bottom:50,left:60},chartClass:"lineChart",wrapClass:"linesWrap"}),i.call(this,a),this.line=this.getLine(),this.interactiveLayer=this.getInteractiveLayer(),this.state=this.getStateManager()}function x(a){a=J.utils.extend({},a,ab,{margin:{top:30,right:60,bottom:50,left:60},chartClass:"linePlusBar"}),i.call(this,a),this.line=this.getLine(),this.historicalBar=this.getHistoricalBar(),this.y1Axis(this.getAxis()),this.y2Axis(this.getAxis()),this.xAxis.tickPadding(7),this.historicalBar.padData(!0),this.line.clipEdge(!1).padData(!0),this.y1Axis().orient("left"),this.y2Axis().orient("right"),this.showTooltip=function(a,b){var c=a.pos[0]+(b.offsetLeft||0),d=a.pos[1]+(b.offsetTop||0),e=this.xAxis.tickFormat()(this.line.x()(a.point,a.pointIndex)),f=(a.series.bar?this.y1Axis():this.y2Axis()).tickFormat()(this.line.y()(a.point,a.pointIndex)),g=this.tooltip()(a.series.key,e,f);J.tooltip.show([c,d],g,a.value<0?"n":"s",null,b)}.bind(this)}function y(a){a=J.utils.extend({},a,bb,{margin:{top:30,right:30,bottom:30,left:60},chartClass:"linePlusBar",wrapClass:"",margin2:{top:0,right:30,bottom:20,left:60}}),i.call(this,a,["brush"]),this.line=this.getLine(),this.line2=this.getLine(),this.bars=this.getHistoricalBar(),this.bars2=this.getHistoricalBar(),this.x2Axis=this.getAxis(),this.y1Axis=this.getAxis(),this.y2Axis=this.getAxis(),this.y3Axis=this.getAxis(),this.y4Axis=this.getAxis(),this.legend=this.getLegend(),this.brush=b.svg.brush(),this.line.clipEdge(!0),this.line2.interactive(!1),this.xAxis.orient("bottom").tickPadding(5),this.y1Axis.orient("left"),this.y2Axis.orient("right"),this.x2Axis.orient("bottom").tickPadding(5),this.y3Axis.orient("left"),this.y4Axis.orient("right");var c=this;this.showTooltip=function(a,b){c.extent()&&(a.pointIndex+=Math.ceil(c.extent()[0]));var d=a.pos[0]+(b.offsetLeft||0),e=a.pos[1]+(b.offsetTop||0),f=c.xAxis.tickFormat()(c.line.x()(a.point,a.pointIndex)),g=(a.series.bar?c.y1Axis:c.y2Axis).tickFormat()(c.line.y()(a.point,a.pointIndex)),h=c.tooltip()(a.series.key,f,g);J.tooltip.show([d,e],h,a.value<0?"n":"s",null,b)}}function z(a){a=J.utils.extend({},a,db,{margin:{top:0,right:0,bottom:0,left:0},width:500,height:500,chartClass:"pie",wrapClass:"pieWrap"}),e.call(this,a,[])}function A(a){a=J.utils.extend({},a,{margin:{top:30,right:20,bottom:20,left:20},chartClass:"pieChart",wrapClass:"pieChartWrap"}),i.call(this,a),this.pie=this.getPie(),this.state=this.getStateManager(),this.pie.showLabels(!0)}function B(a){a=J.utils.extend({},a,DonutPrivates),z.call(this,a)}function C(a){A.call(this,a)}function D(a){a=J.utils.extend({},a,eb,{margin:{top:0,right:0,bottom:0,left:0},width:960,height:500,chartClass:"scatter",wrapClass:"scatterWrap"}),e.call(this,a,["elementClick","elementMouseover","elementMouseout"])}function E(a){a=J.utils.extend({},a,fb,{margin:{top:30,right:20,bottom:50,left:75},chartClass:"scatterChart",wrapClass:"scatterWrap"}),i.call(this,a),this.scatter=J.models.scatter(),this.distX=this.getDistribution(),this.distY=this.getDistribution(),this.controls=this.getLegend(),this.state=this.getStateManager(),this.xScale(b.fisheye?b.fisheye.scale(b.scale.linear).distortion(0):this.scatter.xScale()),this.yScale(b.fisheye?b.fisheye.scale(b.scale.linear).distortion(0):this.scatter.yScale()),this.scatter.xScale(this.xScale()).yScale(this.yScale()),this.distX.axis("x"),this.distY.axis("y"),this.controls.updateState(!1)}function F(a){a=J.utils.extend({},a,gb,{margin:{top:2,right:0,bottom:2,left:0},width:400,height:32,chartClass:"sparkline"}),e.call(this,a,[])}function G(a){a=J.utils.extend({},a,hb,{margin:{top:15,right:100,bottom:10,left:50},chartClass:"sparklineplus"}),i.call(this,a),this.sparkline=this.getSparkline(),this.state=this.getStateManager()}function H(a){a=J.utils.extend({},a,ib,{margin:{top:0,right:0,bottom:0,left:0},chartClass:"stackedarea"}),i.call(this,a,["areaClick","areaMouseover","areaMouseout"]),this.scatter=this.getScatter(),this.renderWatch=J.utils.renderWatch(this.dispatch,this.duration())}function I(a){a=J.utils.extend({},a,jb,{margin:{top:30,right:25,bottom:50,left:60},chartClass:"stackedAreaChart",wrapClass:"stackedAreaChartWrap"}),i.call(this,a),this.stacked=this.getStackedArea(),this.controls=this.getLegend(),this.interactiveLayer=this.getInteractiveGuideline(),this.state=this.getStateManager(),this.yAxis.tickFormat=function(a){return arguments.length?(this.yAxisTickFormat(a),this.yAxis):this.yAxisTickFormat()}.bind(this),this.yAxis.setTickFormat=this.yAxis.tickFormat,this.controls.updateState(!1)}var J=window.nv||{};J.version="1.1.15b",J.dev=!0,J.tooltip=J.tooltip||{},J.utils=J.utils||{},J.models=J.models||{},J.charts={},J.graphs=[],J.logs={},J.dispatch=b.dispatch("render_start","render_end"),Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),J.dev&&(J.dispatch.on("render_start",function(){J.logs.startTime=+new Date}),J.dispatch.on("render_end",function(){J.logs.endTime=+new Date,J.logs.totalTime=J.logs.endTime-J.logs.startTime,J.log("total",J.logs.totalTime)})),J.log=function(){if(J.dev&&console.log&&console.log.apply)console.log.apply(console,arguments);else if(J.dev&&"function"==typeof console.log&&Function.prototype.bind){var a=Function.prototype.bind.call(console.log,console);a.apply(console,arguments)}return arguments[arguments.length-1]},J.deprecated=function(a){J.dev&&console&&console.warn&&console.warn("`"+a+"` has been deprecated.")},J.render=function(a){a=a||1,J.render.active=!0,J.dispatch.render_start(),setTimeout(function(){for(var b,c,d=0;a>d&&(c=J.render.queue[d]);d++)b=c.generate(),typeof c.callback==typeof Function&&c.callback(b),J.graphs.push(b);J.render.queue.splice(0,d),J.render.queue.length?setTimeout(arguments.callee,0):(J.dispatch.render_end(),J.render.active=!1)},0)},J.render.active=!1,J.render.queue=[],J.addGraph=function(a){typeof arguments[0]==typeof Function&&(a={generate:arguments[0],callback:arguments[1]}),J.render.queue.push(a),J.render.active||J.render()},J.identity=function(a){return a},J.strip=function(a){return a.replace(/(\s|&)/g,"")},b.time.monthEnd=function(a){return new Date(a.getFullYear(),a.getMonth(),0)},b.time.monthEnds=d(b.time.monthEnd,function(a){a.setUTCDate(a.getUTCDate()+1),a.setDate(c(a.getMonth()+1,a.getFullYear()))},function(a){return a.getMonth()}),J.utils.windowSize=function(){var a={width:640,height:480};return document.body&&document.body.offsetWidth&&(a.width=document.body.offsetWidth,a.height=document.body.offsetHeight),"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth&&(a.width=document.documentElement.offsetWidth,a.height=document.documentElement.offsetHeight),window.innerWidth&&window.innerHeight&&(a.width=window.innerWidth,a.height=window.innerHeight),a},J.utils.windowResize=function(a){if(void 0!==a){var b=window.onresize;window.onresize=function(c){"function"==typeof b&&b(c),a(c)}}},J.utils.getColor=function(a){return arguments.length?"[object Array]"===Object.prototype.toString.call(a)?function(b,c){return b.color||a[c%a.length]}:a:J.utils.defaultColor()},J.utils.defaultColor=function(){var a=b.scale.category20().range();return function(b,c){return b.color||a[c%a.length]}},J.utils.customTheme=function(a,c,d){c=c||function(a){return a.key},d=d||b.scale.category20().range();var e=d.length;return function(b){var f=c(b);return e||(e=d.length),"undefined"!=typeof a[f]?"function"==typeof a[f]?a[f]():a[f]:d[--e]}},J.utils.pjax=function(a,c){function d(d){b.html(d,function(d){var e=b.select(c).node();e.parentNode.replaceChild(b.select(d).select(c).node(),e),J.utils.pjax(a,c)})}b.selectAll(a).on("click",function(){history.pushState(this.href,this.textContent,this.href),d(this.href),b.event.preventDefault()}),b.select(window).on("popstate",function(){b.event.state&&d(b.event.state)})},J.utils.calcApproxTextWidth=function(a){if("function"==typeof a.style&&"function"==typeof a.text){var b=parseInt(a.style("font-size").replace("px","")),c=a.text().length;return c*b*.5}return 0},J.utils.NaNtoZero=function(a){return"number"!=typeof a||isNaN(a)||null===a||1/0===a?0:a},function(){b.selection.prototype.watchTransition=function(a){var b=[this].concat([].slice.call(arguments,1));return a.transition.apply(a,b)}}(),J.utils.renderWatch=function(a,b){if(!(this instanceof J.utils.renderWatch))return new J.utils.renderWatch(a,b);var c=void 0!==b?b:250,d=[],e=this;this.models=function(a){return a=[].slice.call(arguments,0),a.forEach(function(a){a.__rendered=!1,function(a){a.dispatch.on("renderEnd",function(){a.__rendered=!0,e.renderEnd("model")})}(a),d.indexOf(a)<0&&d.push(a)}),this},this.reset=function(a){void 0!==a&&(c=a),d=[]},this.transition=function(a,b,f){if(b=arguments.length>1?[].slice.call(arguments,1):[],f=b.length>1?b.pop():void 0!==c?c:250,a.__rendered=!1,d.indexOf(a)<0&&d.push(a),0===f)return a.__rendered=!0,a.delay=function(){return this},a.duration=function(){return this},a;a.__rendered=0===a.length?!0:a.every(function(a){return!a.length})?!0:!1;var g=0;return a.transition().duration(f).each(function(){++g}).each("end",function(){0===--g&&(a.__rendered=!0,e.renderEnd.apply(this,b))})},this.renderEnd=function(){d.every(function(a){return a.__rendered})&&(d.forEach(function(a){a.__rendered=!1}),a.renderEnd.apply(this,arguments))}},J.utils.state=function(){if(!(this instanceof J.utils.state))return new J.utils.state;var a={},c=function(){},d=function(){return{}};init=null,this.dispatch=b.dispatch("change","set"),this.dispatch.on("set",function(a){c(a,!0)}),this.getter=function(a){return d=a,this},this.setter=function(a,b){return b||(b=function(){}),c=function(c,d){a(c),d&&b()},this},this.init=function(a){init=a};var e=function(){var b=d();if(JSON.stringify(b)===JSON.stringify(a))return!1;for(var c in b)void 0===a[c]&&(a[c]={}),a[c]=b[c],changed=!0;return!0};this.update=function(){init&&(c(init,!1),init=null),e.call(this)&&this.dispatch.change(a)}},J.utils.optionsFunc=function(a){return J.deprecated("nv.utils.optionsFunc"),a&&b.map(a).forEach(function(a,b){"function"==typeof this[a]&&this[a](b)}.bind(this)),this},J.utils.valueOrDefault=function(a,b){return void 0===a||null===a?b:a},J.utils.rebindp=function(a,b,c,d){api=d instanceof Array?d:[].slice.call(arguments,3),api.forEach(function(d){a[d]=function(e){var f=null;switch(arguments.length){case 0:f=c[d].call(b);break;case 1:f=c[d].call(b,e);break;default:f=c[d].apply(b,arguments)}return f===b?a:f}})},J.utils.create=function(a,b,c){a.prototype=Object.create(b.prototype),a.prototype.constructor=a;for(var d in c)!function(b){a.prototype[b]=function(a){return 0===arguments.length?this.options[b]:(this.options[b]=a,this)}}(d)},J.utils.extend=function(a){var b={}.hasOwnProperty;if(a)for(var c=arguments.length;--c;){var d=arguments[c];for(var e in d)if(b.call(d,e))if("object"==typeof d[e])if(d[e]instanceof Array){a[e]=[];for(var f=0;f<d[e].length;f++)a[e].push(d[e][f])}else"object"==typeof a[e]?J.utils.extend(a[e],d[e]):d[e]&&(a[e]=J.utils.extend({},d[e]));else a[e]=d[e]}return a};var K={height:null,width:null,size:{},margin:{top:20,right:20,bottom:30,left:40},opacityDefault:1e-6,color:J.utils.defaultColor(),duration:0};J.utils.create(e,Object,K),e.prototype.render=function(a){var b=this;this.renderWatch.reset(),a.each(function(a){b.renderElement(this,a)}),this.renderWatch.renderEnd(""+this.name||"Layer immediate")},e.prototype.renderElement=function(a,b){this.setRoot(a),this.wrapper(b),this.hasData(b)&&(this.draw(b),this.attachEvents())},e.prototype.setRoot=function(a){this.svg=b.select(a),this.width(this.width()||parseInt(this.svg.style("width"))||960),this.height(this.height()||parseInt(this.svg.style("height"))||500),this.svg.attr({width:this.width(),height:this.height()});var c=this.margin(),d=this.options,e=this.available={};Object.defineProperty(e,"width",{get:function(){return Math.max(d.width-c.leftright,0)}}),Object.defineProperty(e,"height",{get:function(){return Math.max(d.height-c.topbottom,0)}})},e.prototype.wrapper=function(a,b){b||(b=[]);var c="nv-"+this.options.chartClass,d="nv-"+this.options.wrapClass;this.wrap=this.svg.selectAll("g.nv-wrap."+d).data([a]),this.wrapEnter=this.wrap.enter().append("g").attr({"class":"nvd3 nv-wrap "+c}),this.defsEnter=this.wrapEnter.append("defs"),this.gEnter=this.wrapEnter.append("g"),this.g=this.wrap.select("g"),b.concat([d]).forEach(function(a){this.gEnter.append("g").attr("class",a)},this),this.wrap.attr("transform","translate("+this.margin().left+","+this.margin().top+")")},e.prototype.draw=function(){},e.prototype.attachEvents=function(){var a=null;this.svg.call(function(b){b.each(function(b){a=b})}),this.dispatch.on("changeState",function(b){"undefined"!=typeof b.disabled&&(a.forEach(function(a,c){a.disabled=b.disabled[c]}),this.state.disabled=b.disabled)}.bind(this))},e.prototype.margin=function(a){if(!arguments.length)return this.options.margin;var b=this.options.margin;return b.top=J.utils.valueOrDefault(a.bottom,b.top),b.bottom=J.utils.valueOrDefault(a.bottom,b.bottom),b.left=J.utils.valueOrDefault(a.left,b.left),b.right=J.utils.valueOrDefault(a.right,b.right),this},e.prototype.hasData=function(a){function b(a){return!a.values||a.values.length>0}return a&&a.length>0&&a.filter(b).length>0},e.prototype.duration=function(a){return arguments?(this.options.duration=a,this):this.options.duration},e.prototype.transitionDuration=function(a){return J.deprecated("transitionDuration"),this.duration(a)},J.interactiveGuideline=function(){"use strict";function a(l){l.each(function(l){function m(){var d=b.mouse(this),e=d[0],i=d[1],j=!0,l=!1;if(k&&(e=b.event.offsetX,i=b.event.offsetY,"svg"!==b.event.target.tagName&&(j=!1),b.event.target.className.baseVal.match("nv-legend")&&(l=!0)),j&&(e-=f.left,i-=f.top),0>e||0>i||e>o||i>p||b.event.relatedTarget&&void 0===b.event.relatedTarget.ownerSVGElement||l){if(k&&b.event.relatedTarget&&void 0===b.event.relatedTarget.ownerSVGElement&&b.event.relatedTarget.className.match(c.nvPointerEventsClass))return;return h.elementMouseout({mouseX:e,mouseY:i}),void a.renderGuideLine(null)}var m=g.invert(e);h.elementMousemove({mouseX:e,mouseY:i,pointXValue:m}),"dblclick"===b.event.type&&h.elementDblclick({mouseX:e,mouseY:i,pointXValue:m})}var n=b.select(this),o=d||960,p=e||400,q=n.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([l]),r=q.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer");r.append("g").attr("class","nv-interactiveGuideLine"),j&&(j.on("mousemove",m,!0).on("mouseout",m,!0).on("dblclick",m),a.renderGuideLine=function(a){if(i){var b=q.select(".nv-interactiveGuideLine").selectAll("line").data(null!=a?[J.utils.NaNtoZero(a)]:[],String);b.enter().append("line").attr("class","nv-guideline").attr("x1",function(a){return a}).attr("x2",function(a){return a}).attr("y1",p).attr("y2",0),b.exit().remove()}})})}var c=J.models.tooltip(),d=null,e=null,f={left:0,top:0},g=b.scale.linear(),h=(b.scale.linear(),b.dispatch("elementMousemove","elementMouseout","elementDblclick")),i=!0,j=null,k=-1!==navigator.userAgent.indexOf("MSIE");return a.dispatch=h,a.tooltip=c,a.margin=function(b){return arguments.length?(f.top="undefined"!=typeof b.top?b.top:f.top,f.left="undefined"!=typeof b.left?b.left:f.left,a):f},a.width=function(b){return arguments.length?(d=b,a):d},a.height=function(b){return arguments.length?(e=b,a):e},a.xScale=function(b){return arguments.length?(g=b,a):g},a.showGuideLine=function(b){return arguments.length?(i=b,a):i},a.svgContainer=function(b){return arguments.length?(j=b,a):j},a},J.interactiveBisect=function(a,c,d){"use strict";if(!a instanceof Array)return null;"function"!=typeof d&&(d=function(a){return a.x});var e=b.bisector(d).left,f=b.max([0,e(a,c)-1]),g=d(a[f],f);if("undefined"==typeof g&&(g=f),g===c)return f;var h=b.min([f+1,a.length-1]),i=d(a[h],h);return"undefined"==typeof i&&(i=h),Math.abs(i-c)>=Math.abs(g-c)?f:h},J.nearestValueIndex=function(a,b,c){"use strict";var d=1/0,e=null;return a.forEach(function(a,f){var g=Math.abs(b-a);d>=g&&c>g&&(d=g,e=f)}),e},function(){"use strict";J.tooltip={},J.models.tooltip=function(){function a(){if(l){var a=b.select(l);"svg"!==a.node().tagName&&(a=a.select("svg"));var c=a.node()?a.attr("viewBox"):null;if(c){c=c.split(" ");var d=parseInt(a.style("width"))/c[2];n.left=n.left*d,n.top=n.top*d}}}function c(a){var c;c=b.select(l?l:"body");var d=c.select(".nvtooltip");return null===d.node()&&(d=c.append("div").attr("class","nvtooltip "+(k?k:"xy-tooltip")).attr("id",p)),d.node().innerHTML=a,d.style("top",0).style("left",0).style("opacity",0),d.selectAll("div, table, td, tr").classed(q,!0),d.classed(q,!0),d.node()}function d(){if(o&&u(f)){a();var b=n.left,e=null!=j?j:n.top,k=c(t(f));if(m=k,l){var p=l.getElementsByTagName("svg")[0],q=(p?p.getBoundingClientRect():l.getBoundingClientRect(),{left:0,top:0});if(p){var r=p.getBoundingClientRect(),s=l.getBoundingClientRect(),v=r.top;if(0>v){var w=l.getBoundingClientRect();v=Math.abs(v)>w.height?0:v}q.top=Math.abs(v-s.top),q.left=Math.abs(r.left-s.left)}b+=l.offsetLeft+q.left-2*l.scrollLeft,e+=l.offsetTop+q.top-2*l.scrollTop}return i&&i>0&&(e=Math.floor(e/i)*i),J.tooltip.calcTooltipPosition([b,e],g,h,k),d}}var e=null,f=null,g="w",h=50,i=25,j=null,k=null,l=null,m=null,n={left:null,top:null},o=!0,p="nvtooltip-"+Math.floor(1e5*Math.random()),q="nv-pointer-events-none",r=function(a){return a},s=function(a){return a},t=function(a){if(null!=e)return e;if(null==a)return"";var c=b.select(document.createElement("table")),d=c.selectAll("thead").data([a]).enter().append("thead");d.append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(s(a.value));var f=c.selectAll("tbody").data([a]).enter().append("tbody"),g=f.selectAll("tr").data(function(a){return a.series}).enter().append("tr").classed("highlight",function(a){return a.highlight});g.append("td").classed("legend-color-guide",!0).append("div").style("background-color",function(a){return a.color}),g.append("td").classed("key",!0).html(function(a){return a.key}),g.append("td").classed("value",!0).html(function(a,b){return r(a.value,b)}),g.selectAll("td").each(function(a){if(a.highlight){var c=b.scale.linear().domain([0,1]).range(["#fff",a.color]),d=.6;b.select(this).style("border-bottom-color",c(d)).style("border-top-color",c(d))}});var h=c.node().outerHTML;return void 0!==a.footer&&(h+="<div class='footer'>"+a.footer+"</div>"),h},u=function(a){return a&&a.series&&a.series.length>0};return d.nvPointerEventsClass=q,d.content=function(a){return arguments.length?(e=a,d):e},d.tooltipElem=function(){return m},d.contentGenerator=function(a){return arguments.length?("function"==typeof a&&(t=a),d):t},d.data=function(a){return arguments.length?(f=a,d):f},d.gravity=function(a){return arguments.length?(g=a,d):g},d.distance=function(a){return arguments.length?(h=a,d):h},d.snapDistance=function(a){return arguments.length?(i=a,d):i},d.classes=function(a){return arguments.length?(k=a,d):k},d.chartContainer=function(a){return arguments.length?(l=a,d):l},d.position=function(a){return arguments.length?(n.left="undefined"!=typeof a.left?a.left:n.left,n.top="undefined"!=typeof a.top?a.top:n.top,d):n},d.fixedTop=function(a){return arguments.length?(j=a,d):j},d.enabled=function(a){return arguments.length?(o=a,d):o},d.valueFormatter=function(a){return arguments.length?("function"==typeof a&&(r=a),d):r},d.headerFormatter=function(a){return arguments.length?("function"==typeof a&&(s=a),d):s},d.id=function(){return p},d},J.tooltip.show=function(a,b,c,d,e,f){var g=document.createElement("div");g.className="nvtooltip "+(f?f:"xy-tooltip");var h=e;(!e||e.tagName.match(/g|svg/i))&&(h=document.getElementsByTagName("body")[0]),g.style.left=0,g.style.top=0,g.style.opacity=0,g.innerHTML=b,"string"!=typeof b?g.appendChild(b):g.innerHTML=b,h.appendChild(g),e&&(a[0]=a[0]-e.scrollLeft,a[1]=a[1]-e.scrollTop),J.tooltip.calcTooltipPosition(a,c,d,g)},J.tooltip.findFirstNonSVGParent=function(a){for(;null!==a.tagName.match(/^g|svg$/i);)a=a.parentNode;return a},J.tooltip.findTotalOffsetTop=function(a,b){var c=b;do isNaN(a.offsetTop)||(c+=a.offsetTop);while(a=a.offsetParent);return c},J.tooltip.findTotalOffsetLeft=function(a,b){var c=b;do isNaN(a.offsetLeft)||(c+=a.offsetLeft);while(a=a.offsetParent);return c},J.tooltip.calcTooltipPosition=function(a,b,c,d){var e,f,g=parseInt(d.offsetHeight),h=parseInt(d.offsetWidth),i=J.utils.windowSize().width,j=J.utils.windowSize().height,k=window.pageYOffset,l=window.pageXOffset;j=window.innerWidth>=document.body.scrollWidth?j:j-16,i=window.innerHeight>=document.body.scrollHeight?i:i-16,b=b||"s",c=c||20;var m=function(a){return J.tooltip.findTotalOffsetTop(a,f)},n=function(a){return J.tooltip.findTotalOffsetLeft(a,e)};switch(b){case"e":e=a[0]-h-c,f=a[1]-g/2;var o=n(d),p=m(d);l>o&&(e=a[0]+c>l?a[0]+c:l-o+e),k>p&&(f=k-p+f),p+g>k+j&&(f=k+j-p+f-g);break;case"w":e=a[0]+c,f=a[1]-g/2;var o=n(d),p=m(d);o+h>i&&(e=a[0]-h-c),k>p&&(f=k+5),p+g>k+j&&(f=k+j-p+f-g);break;case"n":e=a[0]-h/2-5,f=a[1]+c;var o=n(d),p=m(d);l>o&&(e=l+5),o+h>i&&(e=e-h/2+5),p+g>k+j&&(f=k+j-p+f-g);break;case"s":e=a[0]-h/2,f=a[1]-g-c;var o=n(d),p=m(d);l>o&&(e=l+5),o+h>i&&(e=e-h/2+5),k>p&&(f=k);break;case"none":e=a[0],f=a[1]-c;var o=n(d),p=m(d)}return d.style.left=e+"px",d.style.top=f+"px",d.style.opacity=1,d.style.position="absolute",d},J.tooltip.cleanup=function(){for(var a=document.getElementsByClassName("nvtooltip"),b=[];a.length;)b.push(a[0]),a[0].style.transitionDelay="0 !important",a[0].style.opacity=0,a[0].className="nvtooltip-pending-removal";setTimeout(function(){for(;b.length;){var a=b.pop();a.parentNode.removeChild(a)}},500)}}();var L={axisLabelText:null,showMaxMin:!0,highlightZero:!0,rotateLabels:0,rotateYLabel:!0,staggerLabels:!1,isOrdinal:!1,ticks:null,axisLabelDistance:12,axisRendered:!1,maxMinRendered:!1,scale0:null,axisLabel:null,scale:b.scale.linear(),duration:250};J.utils.create(f,e,L),f.prototype.wrapper=function(a){var b=[],c="nv-"+this.options.chartClass,d="nv-"+this.options.wrapClass;this.wrap=this.svg.selectAll("g.nv-wrap."+d).data([a]),this.wrapEnter=this.wrap.enter().append("g").attr({"class":"nvd3 nv-wrap "+c}),this.defsEnter=this.wrapEnter.append("defs"),this.gEnter=this.wrapEnter.append("g"),this.g=this.wrap.select("g"),b.concat([d]).forEach(function(a){this.gEnter.append("g").attr("class",a)},this),this.renderWatch.reset(),this.renderWatch=J.utils.renderWatch(this.dispatch,this.duration())},f.prototype.draw=function(){var a=this,c=null,d=null,e=this.scale(),f=(this.scale0(),null);null!==this.ticks()?this.axis.ticks(this.ticks()):("top"==this.axis.orient()||"bottom"==this.axis.orient())&&this.axis.ticks(Math.abs(e.range()[1]-e.range()[0])/100),this.g.watchTransition(this.renderWatch,"axis").call(this.axis),this.scale0(this.scale0()||this.axis.scale);var g=this.axis.tickFormat();null==g&&(g=this.scale0().tickFormat());var h=this.g.selectAll("text.nv-axislabel").data([this.axisLabelText()||null]);switch(h.exit().remove(),this.axis.orient()){case"top":h.enter().append("text").attr("class","nv-axislabel"),f=2==e.range().length?e.range()[1]:e.range()[e.range().length-1]+(e.range()[1]-e.range()[0]),h.attr("text-anchor","middle").attr("y",0).attr("x",f/2),this.showMaxMin()&&(c=this.wrap.selectAll("g.nv-axisMaxMin").data(e.domain()),c.enter().append("g").attr("class","nv-axisMaxMin").append("text"),c.exit().remove(),c.attr("transform",function(a){return"translate("+e(a)+",0)"}).select("text").attr("dy","-0.5em").attr("y",-this.axis.tickPadding()).attr("text-anchor","middle").text(function(a){var b=g(a);return(""+b).match("NaN")?"":b}),c.watchTransition(this.renderWatch,"min-max top").attr("transform",function(a,b){return"translate("+e.range()[b]+",0)"}));break;case"bottom":d=36;var i=30,j=this.g.selectAll("g").select("text");if(this.rotateLabels()%360){j.each(function(){var a=this.getBBox().width;a>i&&(i=a)});var k=Math.abs(Math.sin(this.rotateLabels()*Math.PI/180));d=(k?k*i:i)+30,j.attr("transform",function(){return"rotate("+a.rotateLabels()+" 0,0)"}).style("text-anchor",a.rotateLabels()%360>0?"start":"end")}h.enter().append("text").attr("class","nv-axislabel"),f=2==e.range().length?e.range()[1]:e.range()[e.range().length-1]+(e.range()[1]-e.range()[0]),h.attr("text-anchor","middle").attr("y",d).attr("x",f/2),this.showMaxMin()&&(c=this.wrap.selectAll("g.nv-axisMaxMin").data([e.domain()[0],e.domain()[e.domain().length-1]]),c.enter().append("g").attr("class","nv-axisMaxMin").append("text"),c.exit().remove(),c.attr("transform",function(b){return"translate("+(e(b)+(a.isOrdinal()?e.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",this.axis.tickPadding()).attr("transform",function(){return"rotate("+a.rotateLabels()+" 0,0)"}).style("text-anchor",a.rotateLabels()?a.rotateLabels()%360>0?"start":"end":"middle").text(function(a){var b=g(a);return(""+b).match("NaN")?"":b}),c.watchTransition(this.renderWatch,"min-max bottom").attr("transform",function(b){return"translate("+(e(b)+(a.isOrdinal()?e.rangeBand()/2:0))+",0)"
})),a.staggerLabels()&&j.attr("transform",function(a,b){return"translate(0,"+(b%2==0?"0":"12")+")"});break;case"right":h.enter().append("text").attr("class","nv-axislabel"),h.style("text-anchor",this.rotateYLabel()?"middle":"begin").attr("transform",this.rotateYLabel()?"rotate(90)":"").attr("y",this.rotateYLabel()?-Math.max(this.margin().right,this.width())+12:-10).attr("x",this.rotateYLabel()?e.range()[0]/2:this.axis.tickPadding()),this.showMaxMin()&&(c=this.wrap.selectAll("g.nv-axisMaxMin").data(e.domain()),c.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),c.exit().remove(),c.attr("transform",function(a){return"translate(0,"+e(a)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",this.axis.tickPadding()).style("text-anchor","start").text(function(a){var b=g(a);return(""+b).match("NaN")?"":b}),c.watchTransition(this.renderWatch,"min-max right").attr("transform",function(a,b){return"translate(0,"+e.range()[b]+")"}).select("text").style("opacity",1));break;case"left":h.enter().append("text").attr("class","nv-axislabel"),h.style("text-anchor",this.rotateYLabel()?"middle":"end").attr("transform",this.rotateYLabel()?"rotate(-90)":"").attr("y",this.rotateYLabel()?-Math.max(this.margin().left,this.width())+this.axisLabelDistance():-10).attr("x",this.rotateYLabel()?-e.range()[0]/2:-this.axis.tickPadding()),this.showMaxMin()&&(c=this.wrap.selectAll("g.nv-axisMaxMin").data(e.domain()),c.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),c.exit().remove(),c.attr("transform",function(b){return"translate(0,"+a.scale0()(b)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-this.axis.tickPadding()).attr("text-anchor","end").text(function(a){var b=g(a);return(""+b).match("NaN")?"":b}),c.watchTransition(this.renderWatch,"min-max right").attr("transform",function(a,b){return"translate(0,"+e.range()[b]+")"}).select("text").style("opacity",1))}if(h.text(function(a){return a}),!this.showMaxMin()||"left"!==this.axis.orient()&&"right"!==this.axis.orient()||(this.g.selectAll("g").each(function(a){b.select(this).select("text").attr("opacity",1),(e(a)<e.range()[1]+10||e(a)>e.range()[0]-10)&&((a>1e-10||-1e-10>a)&&b.select(this).attr("opacity",0),b.select(this).select("text").attr("opacity",0))}),e.domain()[0]==e.domain()[1]&&0==e.domain()[0]&&this.wrap.selectAll("g.nv-axisMaxMin").style("opacity",function(a,b){return b?0:1})),this.showMaxMin()&&("top"===this.axis.orient()||"bottom"===this.axis.orient())){var l=[];this.wrap.selectAll("g.nv-axisMaxMin").each(function(a,b){try{l.push(b?e(a)-this.getBBox().width-4:e(a)+this.getBBox().width+4)}catch(c){l.push(b?e(a)-4:e(a)+4)}}),this.g.selectAll("g").each(function(a){(e(a)<l[0]||e(a)>l[1])&&(a>1e-10||-1e-10>a?b.select(this).remove():b.select(this).select("text").remove())})}this.highlightZero()&&this.g.selectAll(".tick").filter(function(a){return!parseFloat(Math.round(1e5*a.__data__)/1e6)&&void 0!==a.__data__}).classed("zero",!0),this.scale0(e.copy())},f.prototype.duration=function(a){return arguments.length?(this.options.duration=a,this.renderWatch.reset(a),this):this.options.duration},f.prototype.scale=function(a){return arguments.length?(this.options.scale=a,this.axis.scale(a),this.isOrdinal("function"==typeof this.options.scale.rangeBands),b.rebind(this,this.options.scale,"domain","range","rangeBand","rangeBands"),this):this.options.scale},J.models.axis=function(){"use strict";function a(b){return c.render(b),a}var c=new f,d=["margin","width","ticks","height","axisLabel","showMaxMin","highlightZero","scale","rotateYLabel","rotateLabels","staggerLabels","axisLabelDistance","duration"];return a.axis=c.axis,a.dispatch=c.dispatch,b.rebind(a,c.axis,"orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"),b.rebind(a,c.scale(),"domain","range","rangeBand","rangeBands"),a.options=J.utils.optionsFunc.bind(a),J.utils.rebindp(a,c,f.prototype,d),a};var M={getKey:function(a){return a.key},align:!0,rightAlign:!0,updateState:!0,radioButtonMode:!1};J.utils.create(g,e,M),g.prototype.wrapper=function(a){var b="nv-"+this.options.chartClass,c="nv-"+this.options.wrapClass;this.wrap=this.svg.selectAll("g.nv-wrap."+c).data([a]),this.wrapEnter=this.wrap.enter().append("g").attr({"class":"nvd3 nv-wrap "+b}),this.defsEnter=this.wrapEnter.append("defs"),this.gEnter=this.wrapEnter.append("g"),this.g=this.wrap.select("g")},g.prototype.draw=function(a){var c,d=this,e=null,f=null,g=[],h=0,i=0,j=[],k=null,l=[],m=0,n=0,o=null,p=5,q=5,r=0,s=null;if(e=this.g.selectAll(".nv-series").data(function(a){return a}),f=e.enter().append("g").attr("class","nv-series").on("mouseover",function(a,b){d.dispatch.legendMouseover(a,b)}).on("mouseout",function(a,b){d.dispatch.legendMouseout(a,b)}).on("click",function(b,c){d.updateState()&&(d.radioButtonMode()?(a.forEach(function(a){a.disabled=!0}),b.disabled=!1):(b.disabled=!b.disabled,a.every(function(a){return a.disabled})&&a.forEach(function(a){a.disabled=!1})),d.dispatch.stateChange({disabled:a.map(function(a){return!!a.disabled})})),d.dispatch.legendClick(b,c)}).on("dblclick",function(b,c){d.updateState()&&(a.forEach(function(a){a.disabled=!0}),b.disabled=!1,d.dispatch.stateChange({disabled:a.map(function(a){return!!a.disabled})})),d.dispatch.legendDblclick(b,c)}),f.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),f.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8"),e.classed("disabled",function(a){return a.disabled}),e.exit().remove(),e.select("circle").style("fill",function(a,b){return a.color||d.color()(a,b)}).style("stroke",function(a,b){return a.color||d.color()(a,b)}),e.select("text").text(d.getKey()),this.align()){for(e.each(function(){k=b.select(this).select("text");try{if(c=k.node().getComputedTextLength(),0>=c)throw Error()}catch(a){c=J.utils.calcApproxTextWidth(k)}g.push(c+28)});i<this.available.width&&h<g.length;)j[h]=g[h],i+=g[h++];for(0===h&&(h=1);i>this.available.width&&h>1;){for(j=[],h--,n=0;n<g.length;n++)g[n]>(j[n%h]||0)&&(j[n%h]=g[n]);i=j.reduce(function(a,b){return a+b})}for(m=0,o=0;h>m;m++)l[m]=o,o+=j[m];e.attr("transform",function(a,b){return"translate("+l[b%h]+","+(5+20*Math.floor(b/h))+")"}),this.rightAlign()?this.g.attr("transform","translate("+(this.width()-this.margin().right-i)+","+this.margin().top+")"):this.g.attr("transform","translate(0,"+this.margin().top+")"),this.height(this.margin().top+this.margin().bottom+20*Math.ceil(g.length/h))}else e.attr("transform",function(){var a=b.select(this).select("text").node().getComputedTextLength()+28;return s=q,d.width()<d.margin().left+d.margin().right+s+a&&(q=s=5,p+=20),q+=a,q>r&&(r=q),"translate("+s+","+p+")"}),this.g.attr("transform","translate("+(this.width()-this.margin().right-r)+","+this.margin().top+")"),this.height(this.margin().top+this.margin().bottom+p+15)},g.prototype.color=function(a){return arguments.length?(this.options.color=J.utils.getColor(a),this):this.options.color},g.prototype.key=function(a){return arguments.length?(this.options.getKey=a,this):this.options.getKey},J.models.legend=function(){"use strict";function a(c){return b.render(c),a}var b=new g,c=["margin","width","height","key","color","align","rightAlign","updateState","radioButtonMode"];return a.dispatch=b.dispatch,a.options=J.utils.optionsFunc.bind(a),J.utils.rebindp(a,b,g.prototype,c),a};var N={axis:"x",getData:null,scale:b.scale.linear(),domain:null,scale0:null,color:J.utils.defaultColor(),duration:250,size:8};J.utils.create(h,e,N),h.prototype.wrapper=function(a){e.prototype.wrapper.call(this,a,[])},h.prototype.draw=function(){var a=this,b="x"==this.axis()?"y":"x";this.scale0(this.scale0()||this.scale());var c=this.g.selectAll("g.nv-dist").data(function(a){return a},function(a){return a.key});c.enter().append("g"),c.attr("class",function(a,b){return"nv-dist nv-series-"+b}).style("stroke",function(b,c){return a.color(b,c)});var d=c.selectAll("line.nv-dist"+this.axis()).data(function(a){return a.values});d.enter().append("line").attr(this.axis()+"1",function(b,c){return a.scale0()(a.getData()(b,c))}).attr(this.axis()+"2",function(b,c){return a.scale0()(a.getData()(b,c))}),this.renderWatch.transition(c.exit().selectAll("line.nv-dist"+this.axis()),"dist exit").attr(this.axis()+"1",function(b,c){return a.scale()(a.getData()(b,c))}).attr(this.axis()+"2",function(b,c){return a.scale()(a.getData()(b,c))}).style("stroke-opacity",0).remove(),d.attr("class",function(b,c){return"nv-dist"+a.axis()+" nv-dist"+a.axis()+"-"+c}).attr(b+"1",0).attr(b+"2",this.size()),this.renderWatch.transition(d,"dist").attr(this.axis()+"1",function(b,c){return a.scale()(a.getData()(b,c))}).attr(this.axis()+"2",function(b,c){return a.scale()(a.getData()(b,c))}),this.scale0(this.scale().copy())},h.prototype.color=function(a){return arguments.length?(this.options.color=J.utils.getColor(a),this):this.options.color},h.prototype.duration=function(a){return arguments.length?(this.options.duration=a,this.renderWatch.reset(a),this):this.options.duration},h.prototype.size=function(a){return arguments.length?(this.options.size=a,this):this.options.size},J.models.distribution=function(){"use strict";function a(c){return b.render(c),a}var b=new h,c=["margin","width","height","axis","size","getData","scale","color","duration"];return a.dispatch=b.dispatch,a.options=J.utils.optionsFunc.bind(a),J.utils.rebindp(a,b,h.prototype,c),a};var O={noData:"No Data Available",showXAxis:!0,showYAxis:!0,rightAlignYAxis:!1,reduceXTicks:!0,tooltips:!0};J.utils.create(i,e,O),i.prototype.getStateManager=function(){return J.utils.state()},i.prototype.getLegend=function(){return J.models.legend()},i.prototype.getAxis=function(){return J.models.axis()},i.prototype.wrapper=function(a,b){var c=["nv-x nv-axis","nv-y nv-axis","nv-legendWrap"].concat(b||[]);e.prototype.wrapper.call(this,a,c),this.axis={x:this.wrap.select(".nv-x.nv-axis"),y:this.wrap.select(".nv-y.nv-axis")},this.buildLegend(a),this.wrap.attr("transform","translate("+this.margin().left+","+this.margin().top+")")},i.prototype.prepareLegend=function(a){if(this.state.disabled=a.map(function(a){return!!a.disabled}),!this.defaultState){var b;this.defaultState={};for(b in this.state)this.defaultState[b]=this.state[b]instanceof Array?this.state[b].slice(0):this.state[b]}},i.prototype.buildLegend=function(a){this.prepareLegend(a),this.options.showLegend&&(this.legend.width(this.size().width),this.g.select(".nv-legendWrap").datum(a).call(this.legend),this.margin.top=this.legend.height(),this.wrap.select(".nv-legendWrap").attr("transform","translate(0,"+-this.margin().top+")"))},i.prototype.showLegend=function(a){return arguments.length?(this.options.showLegend=a,this):this.options.showLegend},i.prototype.draw=function(a){this.plotAxes(a)},i.prototype.plotAxes=function(a){if(this.rightAlignYAxis()&&this.axis.y.attr("transform","translate("+this.available.width+", 0)"),this.showXAxis()){this.xAxis.orient("bottom").tickPadding(7).highlightZero(!0).showMaxMin(!1).tickFormat(function(a){return a}).scale(this.xScale()).ticks(this.available.width/100).tickSize(-this.available.height,0),this.axis.x.transition().call(this.xAxis);var c=this.g.select(".nv-x.nv-axis > g").selectAll("g");if(c.selectAll("line, text").style("opacity",1),this.xAxis.staggerLabels()){var d=function(a,b){return"translate("+a+","+b+")"},e=5,f=17;c.selectAll("text").attr("transform",function(a,b,c){return d(0,c%2==0?e:f)});var g=b.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;this.g.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(a,b){return d(0,0===b||g%2!==0?f:e)})}this.reduceXTicks()&&c.filter(function(b,c){return c%Math.ceil(a[0].values.length/(this.available.width/100))!==0}.bind(this)).selectAll("text, line").style("opacity",0),this.xAxis.rotateLabels()&&c.selectAll(".tick text").attr("transform","rotate("+that.rotateLabels()+" 0,0)").style("text-anchor",that.rotateLabels()>0?"start":"end"),this.axis.x.selectAll("g.nv-axisMaxMin text").style("opacity",1)}this.showYAxis()&&(this.yAxis.orient(this.rightAlignYAxis()?"right":"left").tickFormat(b.format(",.1f")).scale(this.yScale()).ticks(this.available.height/36).tickSize(-this.available.width,0),this.axis.y.transition().call(this.yAxis))},i.prototype.noData=function(a){if(void 0!==this.svg){if(this.hasData(a))return this.svg.selectAll(".nv-noData").remove(),!1;var b=this.svg.selectAll(".nv-noData").data([this.options.noData]);return b.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),b.attr("x",this.width()/2).attr("y",this.height()/2).text(function(a){return a}),!0}},i.prototype.attachEvents=function(){e.prototype.attachEvents.call(this),this.legend.dispatch.on("stateChange",function(a){this.state=a,this.dispatch.stateChange(this.state)}.bind(this)),this.dispatch.on("tooltipShow",function(a){this.options.tooltips&&this.showTooltip(a)}.bind(this)),this.dispatch.on("tooltipHide",function(){this.options.tooltips&&J.tooltip.cleanup()}.bind(this)),this.dispatch.on("stateChange",function(){this.update()}.bind(this))},i.prototype.update=function(){this.svg.call(function(a){this.render(a)}.bind(this))},i.prototype.tooltip=function(a){return arguments.length?(this.options.tooltip=a,this):this.options.tooltip},i.prototype.tooltipContent=function(a){return this.tooltip(a),this},i.prototype.rightAlignYAxis=function(a){return arguments.length?(this.options.rightAlignYAxis=a,this.yAxis.orient(a?"right":"left"),this):this.options.rightAlignYAxis};var P={xScale:b.scale.ordinal(),yScale:b.scale.linear(),xScale0:null,yScale0:null,forceY:[0],showValues:!1,valueFormat:b.format(",.2f"),xDomain:null,yDomain:null,xRange:null,yRange:null,rectClass:"discreteBar"};J.utils.create(k,e,P),k.prototype.wrapper=function(a){e.prototype.wrapper.call(this,a,["nv-groups"])},k.prototype.draw=function(a){function c(c,e){return{value:f.y()(c,e),point:c,series:a[c.series],pos:[f.xScale()(f.x()(c,e))+f.xScale().rangeBand()*(c.series+.5)/d,f.yScale()(f.y()(c,e))],pointIndex:e,seriesIndex:c.series,e:b.event}}var d=a.length,e="nv-bar",f=this,g=this.available.width,h=this.available.height;a.forEach(function(a,b){a.values.forEach(function(a){a.series=b})});var i=this.xDomain()&&this.yDomain()?[]:a.map(function(a){return a.values.map(function(a,b){return{x:f.x()(a,b),y:f.y()(a,b),y0:a.y0}})});this.xScale().domain(this.xDomain()||b.merge(i).map(function(a){return a.x})).rangeBands(this.xRange()||[0,g],.1),this.yScale().domain(this.yDomain()||b.extent(b.merge(i).map(function(a){return a.y}).concat(this.forceY()))),this.yScale().range(this.showValues()?this.yRange()||[h-(this.yScale().domain()[0]<0?12:0),this.yScale().domain()[1]>0?12:0]:this.yRange()||[h,0]),this.xScale0(this.xScale0()||this.xScale()),this.yScale0(this.yScale0()||this.yScale().copy().range([this.yScale()(0),this.yScale()(0)]));var j=this.wrap.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});j.enter().append("g").style("stroke-opacity",this.opacityDefault()).style("fill-opacity",this.opacityDefault()),j.exit().transition().style("stroke-opacity",this.opacityDefault()).style("fill-opacity",this.opacityDefault()).remove(),j.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}),j.transition().style("stroke-opacity",1).style("fill-opacity",.75);var k=j.selectAll("g."+e).data(function(a){return a.values});k.exit().remove();var l=k.enter().append("g").attr("transform",function(a,b){return"translate("+(f.xScale()(f.x()(a,b))+.05*f.xScale().rangeBand())+", "+f.yScale()(0)+")"}).on("mouseover",function(a,d){b.select(this).classed("hover",!0),f.dispatch.elementMouseover(c(a,d))}).on("mouseout",function(a,d){b.select(this).classed("hover",!1),f.dispatch.elementMouseout(c(a,d))}).on("click",function(a,d){f.dispatch.elementClick(c(a,d)),b.event.stopPropagation()}).on("dblclick",function(a,d){f.dispatch.elementDblClick(c(a,d)),b.event.stopPropagation()});l.append("rect").attr("height",0).attr("width",.9*this.xScale().rangeBand()/d),this.showValues()?(l.append("text").attr("text-anchor","middle"),k.select("text").text(function(a,b){return f.valueFormat()(f.y()(a,b))}).transition().attr("x",.9*this.xScale().rangeBand()/2).attr("y",function(a,b){return f.y()(a,b)<0?f.yScale()(f.y()(a,b))-f.yScale()(0)+12:-4})):k.selectAll("text").remove(),k.attr("class",function(a,b){return e+" "+(f.y()(a,b)<0?"negative":"positive")}).style("fill",function(a,b){return a.color||f.color()(a,b)}).style("stroke",function(a,b){return a.color||f.color()(a,b)}).select("rect").attr("class",this.rectClass()).transition().attr("width",.9*this.xScale().rangeBand()/d),k.transition().attr("transform",function(a,b){var c=f.xScale()(f.x()(a,b))+.05*f.xScale().rangeBand(),d=f.y()(a,b)<0?f.yScale()(0):f.yScale()(0)-f.yScale()(f.y()(a,b))<1?f.yScale()(0)-1:f.yScale()(f.y()(a,b));return"translate("+c+", "+d+")"}).select("rect").attr("height",function(a,b){return Math.max(Math.abs(f.yScale()(f.y()(a,b))-f.yScale()(f.yDomain()&&f.yDomain()[0]||0))||1)}),f.xScale0(f.xScale().copy()),f.yScale0(f.yScale().copy())},k.prototype.color=function(a){return arguments.length?(this.options.color=J.utils.getColor(a),this):this.options.color},J.models.discreteBar=function(){"use strict";function a(c){return b.render(c),a}var b=new k;return a.dispatch=b.dispatch,a.options=J.utils.optionsFunc.bind(a),J.utils.rebindp(a,b,k.prototype,"x","y","margin","width","height","xScale","yScale","xDomain","yDomain","xRange","yRange","forceY","id","showValues","valueFormat","rectClass","color"),a};var Q={defaultState:null,xTicksPadding:[5,17],xScale:null,yScale:null,transitionDuration:250};J.utils.create(l,i,Q),l.prototype.getDiscreteBar=function(){return J.models.discreteBar()},l.prototype.wrapper=function(a){i.prototype.wrapper.call(this,a,[])},l.prototype.draw=function(a){this.discreteBar.width(this.available.width).height(this.available.height);var c=this.g.select(".nv-barsWrap").datum(a);b.transition(c).call(this.discreteBar),this.xScale(this.discreteBar.xScale()),this.yScale(this.discreteBar.yScale().clamp(!0)),this.x(this.discreteBar.x()),this.y(this.discreteBar.y()),this.id(this.discreteBar.id()),this.defsEnter.append("clipPath").attr("id","nv-x-label-clip-"+this.id()).append("rect"),this.g.select("#nv-x-label-clip-"+this.id()+" rect").attr("width",this.xScale().rangeBand()*(this.staggerLabels()?2:1)).attr("height",16).attr("x",-this.xScale().rangeBand()/(this.staggerLabels()?1:2)),this.g.select(".nv-zeroLine line").attr("x1",0).attr("x2",this.available.width).attr("y1",this.y()(0)).attr("y2",this.y()(0)),i.prototype.draw.call(this,a)},l.prototype.attachEvents=function(){i.prototype.attachEvents.call(this),this.discreteBar.dispatch.on("elementMouseout.tooltip",function(a){this.dispatch.tooltipHide(a)}.bind(this)).on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+this.margin().left,a.pos[1]+this.margin().top],this.dispatch.tooltipShow(a)}.bind(this))},l.prototype.showTooltip=function(a){var b=this.svg[0][0],c=a.pos[0]+(b.offsetLeft||0),d=a.pos[1]+(b.offsetTop||0),e=this.xAxis.tickFormat()(this.x()(a.point,a.pointIndex)),f=this.yAxis.tickFormat()(this.y()(a.point,a.pointIndex)),g=this.tooltip()(a.series.key,e,f);J.tooltip.show([c,d],g,a.value<0?"n":"s",null,b)},J.models.discreteBarChart=function(){"use strict";function a(b){return c.render(b),a}var c=new l;return a.legend=c.legend,a.dispatch=c.dispatch,a.discreteBar=c.discreteBar,a.state=c.state,b.rebind(a,c.discreteBar,"color","x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","id","showValues","valueFormat"),a.options=J.utils.optionsFunc.bind(a),J.utils.rebindp(a,c,l.prototype,"margin","width","height","tooltips","tooltipContent","showLegend","showXAxis","showYAxis","rightAlignYAxis","staggerLabels","noData","transitionDuration","state"),a};var R={xScale:b.scale.linear(),yScale:b.scale.linear(),forceX:null,forceY:[0],padData:!1,clipEdge:!0,xDomain:null,yDomain:null,xRange:null,yRange:null,interactive:!0};J.utils.create(m,e,R),m.prototype.attachEvents=function(){e.prototype.attachEvents.call(this),this.svg.on("click",function(a,c){this.dispatch.chartClick({data:a,index:c,pos:b.event,id:this.id()})}.bind(this))},m.prototype.wrapper=function(a){e.prototype.wrapper.call(this,a[0].values,["nv-bars"])},m.prototype.draw=function(a){var c=this,d=this.available.width,e=this.available.height;this.xScale().domain(this.xDomain()||b.extent(a[0].values.map(this.x()).concat(this.forceX()))),this.xScale().range(this.padData()?this.xRange()||[.5*d/a[0].values.length,d*(a[0].values.length-.5)/a[0].values.length]:this.xRange()||[0,d]),this.yScale().domain(this.yDomain()||b.extent(a[0].values.map(this.y()).concat(this.forceY()))).range(this.yRange()||[e,0]),this.xScale().domain()[0]===this.xScale().domain()[1]&&this.xScale().domain(this.xScale().domain()[0]?[this.xScale().domain()[0]-.01*this.xScale().domain()[0],this.xScale().domain()[1]+.01*this.xScale().domain()[1]]:[-1,1]),this.yScale().domain()[0]===this.yScale().domain()[1]&&this.yScale().domain(this.yScale().domain()[0]?[this.yScale().domain()[0]+.01*this.yScale().domain()[0],this.yScale().domain()[1]-.01*this.yScale().domain()[1]]:[-1,1]),this.defsEnter.append("clipPath").attr("id","nv-chart-clip-path-"+this.id()).append("rect"),this.wrap.select("#nv-chart-clip-path-"+this.id()+" rect").attr("width",d).attr("height",e),this.g.attr("clip-path",this.clipEdge()?"url(#nv-chart-clip-path-"+this.id()+")":"");var f=this.wrap.select(".nv-bars").selectAll(".nv-bar").data(function(a){return a},function(a,b){return c.x()(a,b)});f.exit().remove();f.enter().append("rect").attr("x",0).attr("y",function(a){return J.utils.NaNtoZero(c.yScale()(Math.max(0,c.y()(a))))}).attr("height",function(a){return J.utils.NaNtoZero(Math.abs(c.yScale()(c.y()(a))-c.yScale()(0)))}).attr("transform",function(b,e){return"translate("+(c.xScale()(c.x()(b,e))-d/a[0].values.length*.45)+",0)"}).on("mouseover",function(d,e){c.interactive()&&(b.select(this).classed("hover",!0),c.dispatch.elementMouseover({point:d,series:a[0],pos:[c.xScale()(c.x()(d,e)),c.yScale()(c.y()(d,e))],pointIndex:e,seriesIndex:0,e:b.event}))}).on("mouseout",function(d,e){c.interactive()&&(b.select(this).classed("hover",!1),c.dispatch.elementMouseout({point:d,series:a[0],pointIndex:e,seriesIndex:0,e:b.event}))}).on("click",function(a,d){c.interactive()&&(c.dispatch.elementClick({value:c.y()(a,d),data:a,index:d,pos:[c.xScale()(c.x()(a,d)),c.yScale()(c.y()(a,d))],e:b.event,id:c.id()}),b.event.stopPropagation())}).on("dblclick",function(a,d){c.interactive()&&(c.dispatch.elementDblClick({value:c.y()(a,d),data:a,index:d,pos:[c.xScale()(c.x()(a,d)),c.yScale()(c.y()(a,d))],e:b.event,id:c.id()}),b.event.stopPropagation())});f.attr("fill",function(a,b){return c.color()(a,b)}).attr("class",function(a,b,d){return(c.y()(a,b)<0?"nv-bar negative":"nv-bar positive")+" nv-bar-"+d+"-"+b}).transition().attr("transform",function(b,e){return"translate("+(c.xScale()(c.x()(b,e))-d/a[0].values.length*.45)+",0)"}).attr("width",d/a[0].values.length*.9),f.transition().attr("y",function(a,b){var d=c.y()(a,b)<0?c.yScale()(0):c.yScale()(0)-c.yScale()(c.y()(a,b))<1?c.yScale()(0)-1:c.yScale()(c.y()(a,b));return J.utils.NaNtoZero(d)}).attr("height",function(a,b){return J.utils.NaNtoZero(Math.max(Math.abs(c.yScale()(c.y()(a,b))-c.yScale()(0)),1))})},m.prototype.color=function(a){return arguments.length?(this.options.color=J.utils.getColor(a),this):this.options.color},m.prototype.highlightPoint=function(a,c){b.select(".nv-"+this.options.chartClass+"-"+this.id()).select(".nv-bars .nv-bar-0-"+a).classed("hover",c)},m.prototype.clearHighlights=function(){b.select(".nv-"+this.options.chartClass+"-"+this.id()).select(".nv-bars .nv-bar.hover").classed("hover",!1)},J.models.historicalBar=function(){"use strict";function a(c){return b.render(c),a}var b=new m;return a.dispatch=b.dispatch,a.options=J.utils.optionsFunc.bind(a),J.utils.rebindp(a,b,m.prototype,"x","y","width","height","margin","xScale","yScale","xDomain","yDomain","xRange","yRange","forceX","forceY","padData","clipEdge","color","id","interactive"),a};var S={defaultState:null,transitionDuration:250};J.utils.create(n,i,S),n.prototype.wrapper=function(a){i.prototype.wrapper.call(this,a)},n.prototype.draw=function(a){this.historicalBar.width(this.available.width).height(this.available.height).color(b.functor(a.map(function(a,b){return a.color||this.color(a,b)}.bind(this)).filter(function(b,c){return!a[c].disabled})));this.g.select(".nv-barsWrap").datum(a.filter(function(a){return!a.disabled})).transition().call(this.historicalBar);i.prototype.draw.call(this,a)},n.prototype.attachEvents=function(){i.prototype.attachEvents.call(this);var a=null;this.svg.call(function(b){b.each(function(b){a=b})}),this.historicalBar.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+this.margin().left,a.pos[1]+this.margin().top],this.dispatch.tooltipShow(a)}.bind(this)).on("elementMouseout.tooltip",function(a){this.dispatch.tooltipHide(a)}.bind(this)),this.legend.dispatch.on("legendClick",function(b){b.disabled=!b.disabled,a.filter(function(a){return!a.disabled}).length||a.map(function(a){return a.disabled=!1,this.wrap.selectAll(".nv-series").classed("disabled",!1),a}.bind(this)),this.state.disabled=a.map(function(a){return!!a.disabled}),this.dispatch.stateChange(this.state),this.svg.transition().call(this.historicalBar)}.bind(this)).on("legendDblclick",function(b){a.forEach(function(a){a.disabled=!0}),b.disabled=!1,this.state.disabled=a.map(function(a){return!!a.disabled}),this.dispatch.stateChange(this.state),this.update()}.bind(this)),this.dispatch.on("tooltipShow",function(a){this.tooltips()&&this.showTooltip(a,this.svg[0][0].parentNode)}.bind(this))},n.prototype.color=function(a){return arguments.length?(this.options.color=J.utils.getColor(a),this.legend.color(this.color()),this):this.options.color},n.prototype.rightAlignYAxis=function(a){return arguments.length?(this.options.rightAlignYAxis=a,this.yAxis.orient(a?"right":"left"),this):this.options.rightAlignYAxis},n.prototype.showTooltip=function(a,c){if(c){var d=b.select(c).select("svg"),e=d.node()?d.attr("viewBox"):null;if(e){e=e.split(" ");var f=parseInt(d.style("width"))/e[2];a.pos[0]=a.pos[0]*f,a.pos[1]=a.pos[1]*f}}var g=a.pos[0]+(c.offsetLeft||0),h=a.pos[1]+(c.offsetTop||0),i=this.xAxis.tickFormat()(this.historicalBar.x()(a.point,a.pointIndex)),j=this.yAxis.tickFormat()(this.historicalBar.y()(a.point,a.pointIndex)),k=this.tooltip()(a.series.key,i,j);J.tooltip.show([g,h],k,null,null,c)},J.models.historicalBarChart=function(){"use strict";function a(b){return c.render(b),a}var c=new n;return a.dispatch=c.dispatch,a.historicalBar=c.historicalBar,a.state=c.state,b.rebind(a,c.historicalBar,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","id","interpolate","highlightPoint","clearHighlights","interactive"),a.options=J.utils.optionsFunc.bind(a),J.utils.rebindp(a,c,n.prototype,"margin","width","height","color","showLegend","showXAxis","showYAxis","rightAlignYAxis","tooltips","tooltipContent","state","defaultState","noData","transitionDuration","xAxis","yAxis"),a};var T={xScale:b.scale.ordinal(),yScale:b.scale.linear(),disabled:[],xDomain:null,yDomain:null,xRange:null,yRange:null,clipEdge:!0,stacked:!1,stackOffset:"zero",hideable:!1,groupSpacing:.1,forceY:[0],xScale0:null,yScale0:null,duration:1e3,barColor:null,id:null,x:null,y:null,color:null};J.utils.create(o,e,T),o.prototype.wrapper=function(a){e.prototype.wrapper.call(this,a,["nv-groups"])},o.prototype.draw=function(a){function c(a,c,e){return b.rgb(d.barColor()(a,c)).darker(d.disabled().map(function(a,b){return b}).filter(function(a,b){return!d.disabled[b]})[e]).toString()}var d=this,e=this.available.width,f=this.available.height,g=[],h=null,i=null,j=null,k=function(c,e){return{value:d.y()(c),point:c,series:a[c.series],pos:[d.xScale()(d.x()(c))+d.xScale().rangeBand()*(d.stacked()?a.length/2:c.series+.5)/a.length,d.yScale()(d.y()(c)+(d.stacked()?c.y0:0))],pointIndex:e,seriesIndex:c.series,e:b.event}};this.hideable()&&a.length&&(g=[{values:a[0].values.map(function(a){return{x:a.x,y:0,series:a.series,size:.01}})}]),this.stacked()&&(a=b.layout.stack().offset(this.stackOffset()).values(function(a){return a.values}).y(this.y())(!a.length&&g?g:a)),a.forEach(function(a,b){a.values.forEach(function(a){a.series=b})}),this.stacked()&&a[0].values.map(function(b,c){var d=0,e=0;a.map(function(a){var b=a.values[c];b.size=Math.abs(b.y),b.y<0?(b.y1=e,e-=b.size):(b.y1=b.size+d,d+=b.size)})}),h=this.xDomain()&&this.yDomain()?[]:a.map(function(a){return a.values.map(function(a){return{x:d.x()(a),y:d.y()(a),y0:a.y0,y1:a.y1}})}),this.xScale().domain(this.xDomain()||b.merge(h).map(d.x())).rangeBands(this.xRange()||[0,e],this.groupSpacing()),this.yScale().domain(this.yDomain()||b.extent(b.merge(h).map(function(a){return d.stacked()?d.y()(a)>0?a.y1:a.y1+d.y()(a):d.y()(a)}).concat(this.forceY()))).range(this.yRange()||[f,0]),this.xScale().domain()[0]===this.xScale().domain()[1]&&this.xScale().domain(this.xScale().domain()[0]?[this.xScale().domain()[0]-.01*this.xScale().domain()[0],this.xScale().domain()[1]+.01*this.xScale().domain()[1]]:[-1,1]),this.yScale().domain()[0]===this.yScale().domain()[1]&&this.yScale().domain(this.yScale().domain()[0]?[this.yScale().domain()[0]+.01*this.yScale().domain()[0],this.yScale().domain()[1]-.01*this.yScale().domain()[1]]:[-1,1]),this.xScale0(this.xScale0()||this.xScale()),this.yScale0(this.yScale0()||this.yScale()),this.defsEnter.append("clipPath").attr("id","nv-edge-clip-"+this.id()).append("rect"),this.wrap.select("#nv-edge-clip-"+this.id()+" rect").attr("width",e).attr("height",f),this.g.attr("clip-path",this.clipEdge()?"url(#nv-edge-clip-"+this.id()+")":"");var l=this.wrap.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a,b){return b});l.enter().append("g").style("stroke-opacity",this.opacityDefault()).style("fill-opacity",this.opacityDefault()),i=this.renderWatch.transition(l.exit().selectAll("rect.nv-bar"),"multibarExit",Math.min(250,this.duration())).attr("y",function(a){return d.yScale0()(d.stacked()?a.y0:0)}).attr("height",0).remove(),i.delay&&i.delay(function(b,c){return c*d.duration()/a[0].values.length}),l.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}).style("fill",function(a,b){return d.color()(a,b)}).style("stroke",function(a,b){return d.color()(a,b)}),l.style("stroke-opacity",1).style("fill-opacity",.75);var m=l.selectAll("rect.nv-bar").data(function(b){return g&&!a.length?g.values:b.values});m.exit().remove(),j=m.enter().append("rect").attr("class",function(a){return d.y()(a)<0?"nv-bar negative":"nv-bar positive"}).attr("x",function(b,c,e){return d.stacked()?0:e*d.xScale().rangeBand()/a.length}).attr("y",function(a){return d.yScale0()(d.stacked()?a.y0:0)}).attr("height",0).attr("width",this.xScale().rangeBand()/(this.stacked()?1:a.length)).attr("transform",function(a){return"translate("+d.xScale()(d.x()(a))+",0)"}),m.style("fill",function(a,b,c){return d.color()(a,c,b)}).style("stroke",function(a,b,c){return d.color()(a,c,b)}).on("mouseover",function(a,c){b.select(this).classed("hover",!0),d.dispatch.elementMouseover(k(a,c))}).on("mouseout",function(a,c){b.select(this).classed("hover",!1),d.dispatch.elementMouseout(k(a,c))}).on("click",function(a,c){d.dispatch.elementClick(k(a,c)),b.event.stopPropagation()}).on("dblclick",function(a,c){d.dispatch.elementDblClick(k(a,c)),b.event.stopPropagation()}),m.attr("class",function(a){return d.y()(a)<0?"nv-bar negative":"nv-bar positive"}).transition().attr("transform",function(a){return"translate("+d.xScale()(d.x()(a))+",0)"}),this.barColor()&&(this.disabled()||this.disabled(a.map(function(){return!0})),m.style("fill",c).style("stroke",c));var n=m.watchTransition(this.renderWatch,"multibar",Math.min(250,this.duration())).delay(function(b,c){return c*d.duration()/a[0].values.length
});this.stacked()?n.attr("y",function(a){return d.y()(d.stacked()?a.y1:0)}).attr("height",function(a){return Math.max(Math.abs(d.yScale()(a.y+(d.stacked()?a.y0:0))-d.yScale()(d.stacked()?a.y0:0)),1)}).attr("x",function(b){return d.stacked()?0:b.series*d.xScale().rangeBand()/a.length}).attr("width",this.xScale().rangeBand()/(this.stacked()?1:a.length)):n.attr("x",function(b){return b.series*d.xScale().rangeBand()/a.length}).attr("width",this.xScale().rangeBand()/a.length).attr("y",function(a){return d.yScale()(a)<0?d.yScale()(0):d.yScale()(0)-d.yScale()(d.y()(a))<1?d.yScale()(0)-1:d.yScale()(d.y()(a))||0}).attr("height",function(a,b){return Math.max(Math.abs(d.yScale()(d.y()(a,b))-d.yScale()(0)),1)||0})},o.prototype.duration=function(a){return arguments.length?(this.options.duration=a,this.renderWatch.reset(a),this):this.options.duration},o.prototype.delay=function(a){return J.deprecated("multiBar.delay"),this.duration(a)},o.prototype.barColor=function(a){return arguments.length?(this.options.barColor=J.utils.getColor(a),this):this.options.barColor},J.models.multiBar=function(){"use strict";function a(c){return b.render(c),a}var b=new o,c=["x","y","margin","width","height","xScale","yScale","xDomain","yDomain","xRange","yRange","forceY","stacked","stackOffset","clipEdge","color","barColor","disabled","id","hideable","groupSpacing","duration","delay"];return a.dispatch=b.dispatch,a.options=J.utils.optionsFunc.bind(a),J.utils.rebindp(a,b,o.prototype,c),a};var U={stacked:!1,defaultState:null,showControls:!0,color:null,xScale:null,yScale:null,tooltips:!0,duration:250,rotateLabels:!1,staggerLabels:!1,controlsData:[]};J.utils.create(p,i,U),p.prototype.getMultiBar=function(){return J.models.multiBar()},p.prototype.wrapper=function(a){i.prototype.wrapper.call(this,a,["nv-controlsWrap"]),this.renderWatch=J.utils.renderWatch(this.dispatch),this.renderWatch.reset(),this.showXAxis()&&this.renderWatch.models(this.xAxis),this.showYAxis()&&this.renderWatch.models(this.yAxis),this.renderWatch.models(this.multibar)},p.prototype.draw=function(a){this.multibar.stacked(this.stacked()).disabled(a.map(function(a){return a.disabled})).width(this.available.width).height(this.available.height),this.xScale(this.multibar.xScale()),this.yScale(this.multibar.yScale());var c=this.g.select(".nv-barsWrap").datum(a.filter(function(a){return!a.disabled}));b.transition(c).call(this.multibar),this.state.setter(this.stateSetter(a),this.update).getter(this.stateGetter(a)).update(),this.state.disabled=a.map(function(a){return!!a.disabled}),this.showControls()&&(this.controlsData([{key:"Grouped",disabled:this.stacked()},{key:"Stacked",disabled:!this.stacked()}]),this.controls.width(this.showControls()?180:0).color(["#444","#444","#444"]),this.g.select(".nv-controlsWrap").datum(this.controlsData()).attr("transform","translate(0,"+-this.margin().top+")").call(this.controls)),i.prototype.draw.call(this,a)},p.prototype.attachEvents=function(){i.prototype.attachEvents.call(this),this.multibar.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+this.margin().left,a.pos[1]+this.margin().top],this.dispatch.tooltipShow(a)}.bind(this)).on("elementMouseout.tooltip",function(a){this.dispatch.tooltipHide(a)}.bind(this)),this.legend.dispatch.on("legendClick",function(){this.update()}.bind(this)),this.controls.dispatch.on("legendClick",function(a){if(a.disabled){switch(this.controlsData(this.controlsData.map(function(a){return a.disabled=!0,a})),a.disabled=!1,a.key){case"Grouped":this.stacked(!1),this.multibar.stacked(!1);break;case"Stacked":this.stacked(!0),this.multibar.stacked(!0)}this.state.stacked=this.multibar.stacked(),this.dispatch.stateChange(this.state),this.update()}}.bind(this)),this.dispatch.on("tooltipShow",function(a){this.tooltips()&&this.showTooltip(a,this.svg[0][0].parentNode)}.bind(this)).on("changeState",function(a){"undefined"!=typeof a.disabled&&(this.data.forEach(function(b,c){b.disabled=a.disabled[c]}),this.state.disabled=a.disabled),"undefined"!=typeof a.stacked&&(this.multibar.stacked(a.stacked),this.state.stacked=a.stacked,this.stacked(a.stacked)),this.update()}.bind(this))},p.prototype.color=function(a){return arguments.length?(this.options.color=J.utils.getColor(a),this.legend.color(this.options.color),this.multibar.color(this.options.color),this):this.options.color},p.prototype.showTooltip=function(a,b){var c=a.pos[0]+(b.offsetLeft||0),d=a.pos[1]+(b.offsetTop||0),e=this.xAxis.tickFormat()(this.multibar.x()(a.point,a.pointIndex)),f=this.yAxis.tickFormat()(this.multibar.y()(a.point,a.pointIndex)),g=this.tooltip()(a.series.key,e,f);J.tooltip.show([c,d],g,a.value<0?"n":"s",null,b)},p.prototype.duration=function(a){return arguments.length?(this.options.duration=a,this.multibar.duration(a),this.xAxis.duration(a),this.yAxis.duration(a),this.renderWatch.reset(a),this):this.options.duration},p.prototype.state=function(a){return J.deprecated("multiBarChart.state"),arguments.length?(this.options.state=a,this):this.options.state},J.models.multiBarChart=function(){"use strict";function a(b){return c.render(b),a}var c=new p,d=["margin","width","height","color","showControls","showLegend","showXAxis","showYAxis","rightAlignYAxis","rotateLabels","staggerLabels","tooltip","tooltips","tooltipContent","state","defaultState","noData","duration","transitionDuration","reduceXTicks","rightAlignYAxis"];return a.dispatch=c.dispatch,a.multibar=c.multibar,a.legend=c.legend,a.xAxis=c.xAxis,a.yAxis=c.yAxis,a.state=c.state,b.rebind(a,c.multibar,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","stacked","stackOffset","delay","barColor","groupSpacing","xScale","yScale"),a.options=J.utils.optionsFunc.bind(a),J.utils.rebindp(a,c,p.prototype,d),a};var V={xScale:b.scale.ordinal(),yScale:b.scale.linear(),forceY:[0],color:null,disabled:null,stacked:!1,showValues:!1,showBarLabels:!1,valuePadding:60,valueFormat:b.format(",.2f"),delay:1200,xDomain:null,yDomain:null,xRange:null,yRange:null,duration:null,id:null};J.utils.create(q,i,V),q.prototype.wrapper=function(a){e.prototype.wrapper.call(this,a,["nv-groups"])},q.prototype.draw=function(a){var c,d,e=this,f=this.available.width,g=this.available.height;this.stacked()&&(a=b.layout.stack().offset("zero").values(function(a){return a.values}).y(this.y())(a)),a.forEach(function(a,b){a.values.forEach(function(a){a.series=b})}),this.stacked()&&a[0].values.map(function(b,c){var d=0,e=0;a.map(function(a){var b=a.values[c];b.size=Math.abs(b.y),b.y<0?(b.y1=e-b.size,e-=b.size):(b.y1=d,d+=b.size)})});var h=this.xDomain()&&this.yDomain()?[]:a.map(function(a){return a.values.map(function(a,b){return{x:e.x()(a,b),y:e.y()(a,b),y0:a.y0,y1:a.y1}})});this.xScale().domain(this.xDomain()||b.merge(h).map(function(a){return a.x})).rangeBands(this.xRange()||[0,g],.1),this.yScale().domain(this.yDomain()||b.extent(b.merge(h).map(function(a){return e.stacked()?a.y>0?a.y1+a.y:a.y1:a.y}).concat(e.forceY()))),this.yScale().range(this.showValues()&&!this.stacked()?this.yRange()||[this.yScale().domain()[0]<0?this.valuePadding():0,f-(this.yScale().domain()[1]>0?this.valuePadding():0)]:this.yRange()||[0,f]),c=c||this.xScale(),d=d||b.scale.linear().domain(this.yScale().domain()).range([this.yScale()(0),this.yScale()(0)]);var i=this.wrap.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a,b){return b});i.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),i.exit().transition().style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),i.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}).style("fill",function(a){return e._color(a)}).style("stroke",function(a){return e._color(a)}),i.transition().style("stroke-opacity",1).style("fill-opacity",.75);var j=i.selectAll("g.nv-bar").data(function(a){return a.values});j.exit().remove();var k=j.enter().append("g").attr("transform",function(b,c,f){return"translate("+d(e.stacked()?b.y0:0)+","+(e.stacked()?0:f*e.xScale().rangeBand()/a.length+e.xScale()(e.x()(b,c)))+")"});if(k.append("rect").attr("width",0).attr("height",this.xScale().rangeBand()/(e.stacked()?1:a.length)),j.on("mouseover",function(c,d){b.select(this).classed("hover",!0),e.dispatch.elementMouseover({value:e.y()(c,d),point:c,series:a[c.series],pos:[e.yScale()(e.y()(c,d)+(e.stacked()?c.y0:0)),e.xScale()(e.x()(c,d))+e.xScale().rangeBand()*(e.stacked()?a.length/2:c.series+.5)/a.length],pointIndex:d,seriesIndex:c.series,e:b.event})}).on("mouseout",function(c,d){b.select(this).classed("hover",!1),e.dispatch.elementMouseout({value:e.y()(c,d),point:c,series:a[c.series],pointIndex:d,seriesIndex:c.series,e:b.event})}).on("click",function(c,d){e.dispatch.elementClick({value:e.y()(c,d),point:c,series:a[c.series],pos:[e.xScale()(e.x()(c,d))+e.xScale().rangeBand()*(e.stacked()?a.length/2:c.series+.5)/a.length,e.yScale()(e.y()(c,d)+(e.stacked()?c.y0:0))],pointIndex:d,seriesIndex:c.series,e:b.event}),b.event.stopPropagation()}).on("dblclick",function(c,d){e.dispatch.elementDblClick({value:e.y()(c,d),point:c,series:a[c.series],pos:[e.xScale()(e.x()(c,d))+e.xScale().rangeBand()*(e.stacked()?a.length/2:c.series+.5)/a.length,e.yScale()(e.y()(c,d)+(e.stacked()?c.y0:0))],pointIndex:d,seriesIndex:c.series,e:b.event}),b.event.stopPropagation()}),k.append("text"),this.showValues()&&!this.stacked()?(j.select("text").attr("text-anchor",function(a,b){return e.y()(a,b)<0?"end":"start"}).attr("y",this.xScale().rangeBand()/(2*a.length)).attr("dy",".32em").text(function(a,b){return e.valueFormat()(e.y()(a,b))}),j.transition().select("text").attr("x",function(a,b){return e.y()(a,b)<0?-4:e.yScale()(e.y()(a,b))-e.yScale()(0)+4})):j.selectAll("text").text(""),this.showBarLabels()&&!this.stacked()?(k.append("text").classed("nv-bar-label",!0),j.select("text.nv-bar-label").attr("text-anchor",function(a,b){return e.y()(a,b)<0?"start":"end"}).attr("y",this.xScale().rangeBand()/(2*a.length)).attr("dy",".32em").text(function(a,b){return e.x()(a,b)}),j.transition().select("text.nv-bar-label").attr("x",function(a,b){return e.y(a,b)<0?e.yScale()(0)-e.yScale()(e.y(a,b))+4:-4})):j.selectAll("text.nv-bar-label").text(""),j.attr("class",function(a,b){return e.y()(a,b)<0?"nv-bar negative":"nv-bar positive"}),this._barColor){this.disabled()||this.disabled(a.map(function(){return!0}));var l=function(a,c,d){return b.rgb(e._barColor(a,c)).darker(e.disabled().map(function(a,b){return b}).filter(function(a,b){return!e.disabled()[b]})[d]).toString()};j.style("fill",l).style("stroke",l)}this.stacked()?j.transition().attr("transform",function(a,b){return"translate("+e.yScale()(a.y1)+","+e.xScale()(e.x()(a,b))+")"}).select("rect").attr("width",function(a,b){return Math.abs(e.yScale()(e.y()(a,b)+a.y0)-e.yScale()(a.y0))}).attr("height",this.xScale().rangeBand()):j.transition().attr("transform",function(b,c){return"translate("+e.yScale()(e.y()(b,c)<0?e.y()(b,c):0)+","+(b.series*e.xScale().rangeBand()/a.length+e.xScale()(e.x()(b,c)))+")"}).select("rect").attr("height",this.xScale().rangeBand()/a.length).attr("width",function(a,b){return Math.max(Math.abs(e.yScale()(e.y()(a,b))-e.yScale()(0)),1)}),c=this.xScale().copy(),d=this.yScale().copy()},q.prototype.barColor=function(a){return arguments.length?(this._barColor=J.utils.getColor(a),this):this._barColor},q.prototype.color=function(a){return arguments.length?(this._color=J.utils.getColor(a),this):this._color},J.models.multiBarHorizontal=function(){"use strict";function a(c){return b.render(c),a}var b=new q;return a.dispatch=b.dispatch,a.options=J.utils.optionsFunc.bind(a),J.utils.rebindp(a,b,q.prototype,"x","y","margin","width","height","xScale","yScale","xDomain","yDomain","xRange","yRange","forceY","stacked","color","barColor","disabled","id","delay","showValues","showBarLabels","valueFormat","valuePadding"),a};var W={color:null,showLegend:!0,showControls:!0,showXAxis:!0,showYAxis:!0,stacked:!1,tooltips:!0,defaultState:null,transitionDuration:250,controlsData:[],xScale:null,yScale:null,tooltipContent:null,tooltip:null};J.utils.create(r,i,W),r.prototype.wrapper=function(a){e.prototype.wrapper.call(this,a,["nv-x nv-axis","nv-y nv-axis","nv-zeroLine","nv-controlsWrap"]),this.state.setter(this.stateSetter(a),this.update).getter(this.stateGetter(a)).update()},r.prototype.draw=function(a){var c=this,d=this.available.width,f=this.available.height;if(this.state.disabled=a.map(function(a){return!!a.disabled}),!this.defaultState()){var g;this.defaultState({});for(g in this.state)this.defaultState()[g]=this.state[g]instanceof Array?this.state[g].slice(0):this.state[g]}this.xScale(this.multibarHorizontal.xScale()),this.yScale(this.multibarHorizontal.yScale()),this.multibarHorizontal.margin({left:0,top:0,bottom:0,right:0}).disabled(a.map(function(a){return a.disabled})).width(d).height(f).color(a.map(function(a,b){return a.color||c._color(a,b)}).filter(function(b,c){return!a[c].disabled})),this.g.select(".nv-barsWrap").datum(a.filter(function(a){return!a.disabled})).transition().call(this.multibarHorizontal),this.showLegend()&&(this.legend.width(d-this.controlWidth()),this.multibarHorizontal.barColor()&&a.forEach(function(a,c){a.color=b.rgb("#ccc").darker(1.5*c).toString()}),this.g.select(".nv-legendWrap").datum(a).call(this.legend),this.margin().top!=this.legend.height()&&(this.margin().top=this.legend.height(),f=(this.height()||parseInt(e.svg.style("height"))||400)-this.margin().top-this.margin().bottom),this.g.select(".nv-legendWrap").attr("transform","translate("+this.controlWidth()+","+-this.margin().top+")")),this.showControls()&&(this.controlsData([{key:"Grouped",disabled:this.multibarHorizontal.stacked()},{key:"Stacked",disabled:!this.multibarHorizontal.stacked()}]),this.controls.width(this.controlWidth()).color(["#444","#444","#444"]),this.g.select(".nv-controlsWrap").datum(this.controlsData()).attr("transform","translate(0,"+-this.margin().top+")").call(this.controls)),this.showXAxis()&&(this.xAxis.scale(this.xScale()).ticks(f/24).tickSize(-d,0),this.g.select(".nv-x.nv-axis").transition().call(this.xAxis)),this.showYAxis()&&(this.yAxis.scale(this.yScale()).ticks(d/100).tickSize(-f,0),this.g.select(".nv-y.nv-axis").attr("transform","translate(0,"+f+")").transition().call(this.yAxis)),this.g.select(".nv-zeroLine line").attr("x1",this.yScale()(0)).attr("x2",this.yScale()(0)).attr("y1",0).attr("y2",-f)},r.prototype.attachEvents=function(){i.prototype.attachEvents.call(this),this.legend.dispatch.on("stateChange",function(a){this.state=a,this.dispatch.stateChange(this.state),this.update()}.bind(this)),this.controls.dispatch.on("legendClick",function(a){if(a.disabled){switch(this.controlsData(this.controlsData().map(function(a){return a.disabled=!0,a})),a.disabled=!1,a.key){case"Grouped":this.multibarHorizontal.stacked(!1);break;case"Stacked":this.multibarHorizontal.stacked(!0)}this.state.stacked=this.multibarHorizontal.stacked(),this.dispatch.stateChange(this.state),this.update()}}.bind(this)),this.dispatch.on("changeState",function(a){"undefined"!=typeof a.disabled&&(data.forEach(function(b,c){b.disabled=a.disabled[c]}),this.state.disabled=a.disabled),"undefined"!=typeof a.stacked&&(this.multibarHorizontal.stacked(a.stacked),this.state.stacked=a.stacked),this.update()}.bind(this)).on("tooltipShow",function(a){this.tooltips()&&this.showTooltip(a,this.svg[0][0].parentNode)}.bind(this)).on("tooltipHide",function(){this.tooltips()&&J.tooltip.cleanup()}.bind(this)),this.multibarHorizontal.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+this.margin().left,a.pos[1]+this.margin().top],this.dispatch.tooltipShow(a)}.bind(this)).on("elementMouseout.tooltip",function(a){this.dispatch.tooltipHide(a)}.bind(this))},r.prototype.getMultibarHorizontal=function(){return J.models.multiBarHorizontal()},r.prototype.color=function(a){return arguments.length?(this._color=J.utils.getColor(a),this.legend.color(this._color),this):this._color},r.prototype.tooltipContent=function(a){return arguments.length?(this.tooltip(a),this):this.tooltip()},J.models.multiBarHorizontalChart=function(){"use strict";function a(b){return c.render(b),a}var c=new r;return a.dispatch=c.dispatch,a.multibarHorizontal=c.multibarHorizontal,a.legend=c.legend,a.xAxis=c.xAxis,a.yAxis=c.yAxis,a.state=c.state,a.options=J.utils.optionsFunc.bind(a),b.rebind(a,c.multibarHorizontal,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","delay","showValues","showBarLabels","valueFormat","stacked","barColor"),a.options=J.utils.optionsFunc.bind(a),J.utils.rebindp(a,c,r.prototype,"tooltip","color","margin","width","height","showControls","showLegend","showXAxis","showYAxis","tooltips","tooltipContent","state","defaultState","noData","transitionDuration"),a},J.models.multiBarTimeSeries=function(){"use strict";function a(x){return x.each(function(a){var x=k-i.left-i.right,y=l-i.top-i.bottom,z=b.select(this);t&&(a=b.layout.stack().offset("zero").values(function(a){return a.values}).y(q)(a)),a.forEach(function(a,b){a.values.forEach(function(a){a.series=b})});var A=c&&d?[]:a.map(function(a){return a.values.map(function(a,b){return{x:p(a,b),y:q(a,b),y0:a.y0}})});m.domain(c||b.extent(b.merge(A).map(function(a){return a.x}))).range(e||[0,x]),n.domain(d||b.extent(b.merge(A).map(function(a){return a.y+(t?a.y0:0)}).concat(r))).range(f||[y,0]),m.domain()[0]===m.domain()[1]&&m.domain(m.domain()[0]?[m.domain()[0]-.01*m.domain()[0],m.domain()[1]+.01*m.domain()[1]]:[-1,1]),n.domain()[0]===n.domain()[1]&&n.domain(n.domain()[0]?[n.domain()[0]+.01*n.domain()[0],n.domain()[1]-.01*n.domain()[1]]:[-1,1]),g=g||m,h=h||n;var B=z.selectAll("g.nv-wrap.nv-multibar").data([a]),C=B.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),D=C.append("defs"),E=C.append("g"),F=B.select("g");E.append("g").attr("class","nv-groups"),B.attr("transform","translate("+i.left+","+i.top+")"),D.append("clipPath").attr("id","nv-edge-clip-"+o).append("rect"),B.select("#nv-edge-clip-"+o+" rect").attr("width",x).attr("height",y),F.attr("clip-path",s?"url(#nv-edge-clip-"+o+")":"");var G=B.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});G.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),b.transition(G.exit()).selectAll("rect.nv-bar").delay(function(b,c){return c*v/a[0].values.length}).attr("y",function(a){return h(t?a.y0:0)}).attr("height",0).remove(),G.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}).style("fill",function(a,b){return u(a,b)}).style("stroke",function(a,b){return u(a,b)}),b.transition(G).style("stroke-opacity",1).style("fill-opacity",.75);var H=G.selectAll("rect.nv-bar").data(function(a){return a.values});H.exit().remove();for(var I=0,J=0;J<A.length;J+=1)I=Math.max(A[J].length,I);{var K=x/I-.1,L=K/a.length;H.enter().append("rect").attr("class",function(a,b){return q(a,b)<0?"nv-bar negative":"nv-bar positive"}).attr("x",function(a,b,c){return t?0:b*K+c*L}).attr("y",function(a){return h(t?a.y0:0)}).attr("height",0).attr("width",t?K:L)}H.on("mouseover",function(c,d){b.select(this).classed("hover",!0),w.elementMouseover({value:q(c,d),point:c,series:a[c.series],pos:[m(p(c,d))+L*(t?a.length/2:c.series+.5)/a.length,n(q(c,d)+(t?c.y0:0))],pointIndex:d,seriesIndex:c.series,e:b.event})}).on("mouseout",function(c,d){b.select(this).classed("hover",!1),w.elementMouseout({value:q(c,d),point:c,series:a[c.series],pointIndex:d,seriesIndex:c.series,e:b.event})}).on("click",function(c,d){w.elementClick({value:q(c,d),point:c,series:a[c.series],pos:[m(p(c,d))+L*(t?a.length/2:c.series+.5)/a.length,n(q(c,d)+(t?c.y0:0))],pointIndex:d,seriesIndex:c.series,e:b.event}),b.event.stopPropagation()}).on("dblclick",function(c,d){w.elementDblClick({value:q(c,d),point:c,series:a[c.series],pos:[m(p(c,d))+L*(t?a.length/2:c.series+.5)/a.length,n(q(c,d)+(t?c.y0:0))],pointIndex:d,seriesIndex:c.series,e:b.event}),b.event.stopPropagation()}),H.attr("class",function(a,b){return q(a,b)<0?"nv-bar negative":"nv-bar positive"}).attr("transform",function(a,b){return"translate("+m(p(a,b))+",0)"}),t?b.transition(H).delay(function(b,c){return c*v/a[0].values.length}).attr("y",function(a,b){return n(q(a,b)+(t?a.y0:0))}).attr("height",function(a){return Math.abs(n(a.y+(t?a.y0:0))-n(t?a.y0:0))}).each("end",function(){b.transition(b.select(this)).attr("x",function(a,b){return t?0:b*K+j*L}).attr("width",t?K:L)}):b.transition(H).delay(function(b,c){return c*v/a[0].values.length}).attr("x",function(a){return a.series*L}).attr("width",L).each("end",function(){b.transition(b.select(this)).attr("y",function(a,b){return n(q(a,b)<0?0:q(a,b))}).attr("height",function(a,b){return Math.abs(n(q(a,b))-n(0))})}),g=m.copy(),h=n.copy()}),a}var c,d,e,f,g,h,i={top:0,right:0,bottom:0,left:0},k=960,l=500,m=b.time.scale(),n=b.scale.linear(),o=Math.floor(1e4*Math.random()),p=function(a){return a.x},q=function(a){return a.y},r=[0],s=!0,t=!1,u=J.utils.defaultColor(),v=1200,w=b.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return a.dispatch=w,a.options=J.utils.optionsFunc.bind(a),a.x=function(b){return arguments.length?(p=b,a):p},a.y=function(b){return arguments.length?(q=b,a):q},a.margin=function(b){return arguments.length?(i.top="undefined"!=typeof b.top?b.top:i.top,i.right="undefined"!=typeof b.right?b.right:i.right,i.bottom="undefined"!=typeof b.bottom?b.bottom:i.bottom,i.left="undefined"!=typeof b.left?b.left:i.left,a):i},a.width=function(b){return arguments.length?(k=b,a):k},a.height=function(b){return arguments.length?(l=b,a):l},a.xScale=function(b){return arguments.length?(m=b,a):m},a.yScale=function(b){return arguments.length?(n=b,a):n},a.xDomain=function(b){return arguments.length?(c=b,a):c},a.yDomain=function(b){return arguments.length?(d=b,a):d},a.xRange=function(b){return arguments.length?(e=b,a):e},a.yRange=function(b){return arguments.length?(f=b,a):f},a.forceY=function(b){return arguments.length?(r=b,a):r},a.stacked=function(b){return arguments.length?(t=b,a):t},a.clipEdge=function(b){return arguments.length?(s=b,a):s},a.color=function(b){return arguments.length?(u=J.utils.getColor(b),a):u},a.id=function(b){return arguments.length?(o=b,a):o},a.delay=function(b){return arguments.length?(v=b,a):v},a},J.models.multiBarTimeSeriesChart=function(){"use strict";function a(s){return s.each(function(w){var x=b.select(this),y=this,z=(k||parseInt(x.style("width"))||960)-j.left-j.right,A=(l||parseInt(x.style("height"))||400)-j.top-j.bottom;if(a.update=function(){s.transition().call(a)},a.container=this,!(w&&w.length&&w.filter(function(a){return a.values.length}).length)){var B=x.selectAll(".nv-noData").data([t]);return B.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),B.attr("x",j.left+z/2).attr("y",j.top+A/2).text(function(a){return a}),a}x.selectAll(".nv-noData").remove(),c=e.xScale(),d=e.yScale();var C=x.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([w]),D=C.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),E=C.select("g");if(D.append("g").attr("class","nv-x nv-axis"),D.append("g").attr("class","nv-y nv-axis"),D.append("g").attr("class","nv-barsWrap"),D.append("g").attr("class","nv-legendWrap"),D.append("g").attr("class","nv-controlsWrap"),o&&(h.width(z/2),E.select(".nv-legendWrap").datum(w).call(h),j.top!=h.height()&&(j.top=h.height(),A=(l||parseInt(x.style("height"))||400)-j.top-j.bottom),E.select(".nv-legendWrap").attr("transform","translate("+z/2+","+-j.top+")")),n){var F=[{key:"Grouped",disabled:e.stacked()},{key:"Stacked",disabled:!e.stacked()}];i.width(180).color(["#444","#444","#444"]),E.select(".nv-controlsWrap").datum(F).attr("transform","translate(0,"+-j.top+")").call(i)}C.attr("transform","translate("+j.left+","+j.top+")"),e.width(z).height(A).color(w.map(function(a,b){return a.color||m(a,b)}).filter(function(a,b){return!w[b].disabled}));var G=E.select(".nv-barsWrap").datum(w.filter(function(a){return!a.disabled}));b.transition(G).call(e),f.scale(c).ticks(z/100).tickSize(-A,0),E.select(".nv-x.nv-axis").attr("transform","translate(0,"+d.range()[0]+")"),b.transition(E.select(".nv-x.nv-axis")).call(f);var H=E.select(".nv-x.nv-axis > g").selectAll("g");H.selectAll("line, text").style("opacity",1),p&&H.filter(function(a,b){return b%Math.ceil(w[0].values.length/(z/100))!==0}).selectAll("text, line").style("opacity",0),q&&H.selectAll("text").attr("transform",function(){return"rotate("+q+" 0,0)"}).attr("text-transform",q>0?"start":"end"),g.scale(d).ticks(A/36).tickSize(-z,0),b.transition(E.select(".nv-y.nv-axis")).call(g),h.dispatch.on("legendClick",function(b){b.disabled=!b.disabled,w.filter(function(a){return!a.disabled}).length||w.map(function(a){return a.disabled=!1,C.selectAll(".nv-series").classed("disabled",!1),a}),s.transition().call(a)}),i.dispatch.on("legendClick",function(b){if(b.disabled){switch(F=F.map(function(a){return a.disabled=!0,a}),b.disabled=!1,b.key){case"Grouped":e.stacked(!1);break;case"Stacked":e.stacked(!0)}s.transition().call(a)}}),u.on("tooltipShow",function(a){r&&v(a,y.parentNode)})}),a}var c,d,e=J.models.multiBarTimeSeries(),f=J.models.axis(),g=J.models.axis(),h=J.models.legend(),i=J.models.legend(),j={top:30,right:20,bottom:50,left:60},k=null,l=null,m=J.utils.defaultColor(),n=!0,o=!0,p=!0,q=0,r=!0,s=function(a,b,c){return"<h3>"+a+"</h3><p>"+c+" on "+b+"</p>"},t="No Data Available.",u=b.dispatch("tooltipShow","tooltipHide");e.stacked(!1),f.orient("bottom").tickPadding(7).highlightZero(!1).showMaxMin(!1),g.orient("left").tickFormat(b.format(",.1f"));var v=function(b,c){var d=b.pos[0]+(c.offsetLeft||0),h=b.pos[1]+(c.offsetTop||0),i=f.tickFormat()(e.x()(b.point,b.pointIndex)),j=g.tickFormat()(e.y()(b.point,b.pointIndex)),k=s(b.series.key,i,j,b,a);J.tooltip.show([d,h],k,b.value<0?"n":"s",null,c)};return e.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+j.left,a.pos[1]+j.top],u.tooltipShow(a)}),e.dispatch.on("elementMouseout.tooltip",function(a){u.tooltipHide(a)}),u.on("tooltipHide",function(){r&&J.tooltip.cleanup()}),a.dispatch=u,a.multibar=e,a.legend=h,a.xAxis=f,a.yAxis=g,b.rebind(a,e,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","stacked","delay"),a.options=J.utils.optionsFunc.bind(a),a.margin=function(b){return arguments.length?(j.top="undefined"!=typeof b.top?b.top:j.top,j.right="undefined"!=typeof b.right?b.right:j.right,j.bottom="undefined"!=typeof b.bottom?b.bottom:j.bottom,j.left="undefined"!=typeof b.left?b.left:j.left,a):j},a.width=function(b){return arguments.length?(k=b,a):k},a.height=function(b){return arguments.length?(l=b,a):l},a.color=function(b){return arguments.length?(m=J.utils.getColor(b),h.color(m),a):m},a.showControls=function(b){return arguments.length?(n=b,a):n},a.showLegend=function(b){return arguments.length?(o=b,a):o},a.reduceXTicks=function(b){return arguments.length?(p=b,a):p},a.rotateLabels=function(b){return arguments.length?(q=b,a):q},a.tooltip=function(b){return arguments.length?(s=b,a):s},a.tooltips=function(b){return arguments.length?(r=b,a):r},a.tooltipContent=function(b){return arguments.length?(s=b,a):s},a.noData=function(b){return arguments.length?(t=b,a):t},a};var X={reverse:!1,ranges:function(a){return a.ranges},markers:function(a){return a.markers},measures:function(a){return a.measures},rangeLabels:function(a){return a.rangeLabels?a.rangeLabels:[]},markerLabels:function(a){return a.markerLabels?a.markerLabels:[]},measureLabels:function(a){return a.measureLabels?a.measureLabels:[]},forceX:[0],tickFormat:null,xScale1:b.scale.linear(),xScale0:null,color:J.utils.getColor(["#1f77b4"]),orient:"left"};J.utils.create(s,e,X),s.prototype.wrapper=function(a){e.prototype.wrapper.call(this,a),this.gEnter.append("rect").attr("class","nv-range nv-rangeMax"),this.gEnter.append("rect").attr("class","nv-range nv-rangeAvg"),this.gEnter.append("rect").attr("class","nv-range nv-rangeMin"),this.gEnter.append("rect").attr("class","nv-measure"),this.gEnter.append("path").attr("class","nv-markerTriangle")},s.prototype.draw=function(a,c){var d=this,e=this.available.width,f=this.available.height,g=this.ranges().call(this,a,c).slice().sort(b.descending),h=this.markers().call(this,a,c).slice().sort(b.descending),i=this.measures().call(this,a,c).slice().sort(b.descending),j=this.rangeLabels().call(this,a,c).slice(),k=this.markerLabels().call(this,a,c).slice(),l=this.measureLabels().call(this,a,c).slice(),m=b.min(g),n=b.max(g),o=g[1];this.xScale1().domain(b.extent(b.merge([this.forceX(),g]))).range(this.reverse()?[e,0]:[0,e]),this.xScale0().domain([0,1/0]).range(this.xScale1().range()),this.__chart__=this.xScale1();var p=function(a){return Math.abs(d.xScale1()(a)-d.xScale1()(0))},q=function(a){return d.xScale1()(0>a?a:0)};this.g.select("rect.nv-rangeMax").attr("height",f).attr("width",p(n>0?n:m)).attr("x",q(n>0?n:m)).datum(n>0?n:m),this.g.select("rect.nv-rangeAvg").attr("height",f).attr("width",p(o)).attr("x",q(o)).datum(o),this.g.select("rect.nv-rangeMin").attr("height",f).attr("width",p(n)).attr("x",q(n)).attr("width",p(n>0?m:n)).attr("x",q(n>0?m:n)).datum(n>0?m:n),this.g.select("rect.nv-measure").style("fill",this.color()).attr("height",f/3).attr("y",f/3).attr("width",0>i?this.xScale1()(0)-this.xScale1()(i[0]):this.xScale1()(i[0])-this.xScale1()(0)).attr("x",q(i)).on("mouseover",function(){d.dispatch.elementMouseover({value:i[0],label:l[0]||"Current",pos:[d.xScale1()(i[0]),f/2]})}).on("mouseout",function(){d.dispatch.elementMouseout({value:i[0],label:l[0]||"Current"})});var r=f/6;h[0]?this.g.selectAll("path.nv-markerTriangle").attr("transform",function(){return"translate("+d.xScale1()(h[0])+","+f/2+")"}).attr("d","M0,"+r+"L"+r+","+-r+" "+-r+","+-r+"Z").on("mouseover",function(){d.dispatch.elementMouseover({value:h[0],label:k[0]||"Previous",pos:[d.xScale1()(h[0]),f/2]})}).on("mouseout",function(){d.dispatch.elementMouseout({value:h[0],label:k[0]||"Previous"})}):this.g.selectAll("path.nv-markerTriangle").remove(),this.wrap.selectAll(".nv-range").on("mouseover",function(a,b){var c=j[b]||(b?1==b?"Mean":"Minimum":"Maximum");d.dispatch.elementMouseover({value:a,label:c,pos:[d.xScale1()(a),f/2]})}).on("mouseout",function(a,b){var c=j[b]||(b?1==b?"Mean":"Minimum":"Maximum");d.dispatch.elementMouseout({value:a,label:c})})},s.prototype.orient=function(a){return arguments.length?(this.options.orient=a,this.reverse("right"==this.options.orient||"bottom"==this.options.orient),this):this.options.orient},s.prototype.color=function(a){return arguments.length?(this.options.color=J.utils.getColor(a),this):this.options.color},s.prototype.noData=function(a){return!a||"undefined"==typeof a||null==a},J.models.bullet=function(){"use strict";function a(c){return b.render(c),a}var b=new s;return a.dispatch=b.dispatch,a.options=J.utils.optionsFunc.bind(a),J.utils.rebindp(a,b,s.prototype,"ranges","markers","measures","forceX","width","height","margin","tickFormat","orient","color"),a};var Y={orient:"left",reverse:!1,ranges:function(a){return a.ranges},markers:function(a){return a.markers},measures:function(a){return a.measures},tickFormat:null,tooltips:!0};J.utils.create(t,i,Y),t.prototype.getBullet=function(){return J.models.bullet()},t.prototype.wrapper=function(a){var b=["nv-titles"],c=["nv-legendWrap"].concat(b||[]);e.prototype.wrapper.call(this,a,c),this.wrap.attr("transform","translate("+this.margin().left+","+this.margin().top+")")},t.prototype.renderElement=function(a,b){if(this.setRoot(a),!b||!this.ranges().call(this,b)){var c=this.svg.selectAll(".nv-noData").data([this.options.noData]);return c.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),c.attr("x",this.margin().left+this.available.width/2).attr("y",18+this.margin().top+this.available.height/2).text(function(a){return a}),this}return this.svg.selectAll(".nv-noData").remove(),this.wrapper(b),this.draw(b),this.attachEvents(),this},t.prototype.draw=function(a,c){var d=this.available.width,e=this.available.height,f=this.ranges().call(this,a,c).slice().sort(b.descending),g=this.markers().call(this,a,c).slice().sort(b.descending),h=this.measures().call(this,a,c).slice().sort(b.descending),i=b.scale.linear().domain([0,Math.max(f[0],g[0],h[0])]).range(this.reverse()?[d,0]:[0,d]),j=this.__chart__||b.scale.linear().domain([0,1/0]).range(i.range());
this.__chart__=i;var k=this.gEnter.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(this.height()-this.margin().top-this.margin().bottom)/2+")");k.append("text").attr("class","nv-title").text(function(a){return a.title}),k.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(a){return a.subtitle}),this.bullet.margin({top:0,right:0,bottom:0,left:0}).width(d).height(e);var l=this.g.select(".nv-bulletWrap");b.transition(l).call(this.bullet);var m=this.tickFormat()||i.tickFormat(d/100),n=this.g.selectAll("g.nv-tick").data(i.ticks(d/50),function(a){return this.textContent||m(a)}),o=n.enter().append("g").attr("class","nv-tick").attr("transform",function(a){return"translate("+j(a)+",0)"}).style("opacity",this.opacityDefault());o.append("line").attr("y1",e).attr("y2",7*e/6),o.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",7*e/6).text(m);var p=b.transition(n).attr("transform",function(a){return"translate("+i(a)+",0)"}).style("opacity",1);p.select("line").attr("y1",e).attr("y2",7*e/6),p.select("text").attr("y",7*e/6),b.transition(n.exit()).attr("transform",function(a){return"translate("+i(a)+",0)"}).style("opacity",this.opacityDefault()).remove()},t.prototype.attachEvents=function(){this.bullet.dispatch.on("elementMouseover.tooltip",function(a){this.dispatch.tooltipShow(a)}.bind(this)).on("elementMouseout.tooltip",function(){this.dispatch.tooltipHide()}.bind(this)),this.dispatch.on("tooltipHide",function(){this.tooltips()&&J.tooltip.cleanup()}.bind(this)).on("tooltipShow",function(a){this.svg.call(function(b){b.each(function(b){a.key=b.title,this.tooltips()&&this.showTooltip(a,this.svg[0][0])}.bind(this))}.bind(this))}.bind(this))},t.prototype.orient=function(a){return arguments.length?(this.orient(a),this.reverse("right"==this.orient()||"bottom"==this.orient()),this):this.orient()},t.prototype.showTooltip=function(a,b){var c=a.pos[0]+(b.offsetLeft||0)+this.margin().left,d=a.pos[1]+(b.offsetTop||0)+this.margin().top,e=this.tooltip()(a.key,a.label,a.value);J.tooltip.show([c,d],e,a.value<0?"e":"w",null,b)},J.models.bulletChart=function(){"use strict";function a(b){return c.render(b),a}var c=new t;return a.dispatch=c.dispatch,a.bullet=c.bullet,a.state=c.state,b.rebind(a,c.bullet,"color"),a.options=J.utils.optionsFunc.bind(a),J.utils.rebindp(a,c,t.prototype,"orient","tooltipContent","ranges","markers","measures","width","height","margin","tickFormat","tooltips","noData"),a};var Z={tooltips:!0,showControls:!0,rescaleY:!0,tooltip:function(a,b,c){return"<h3>"+a+"</h3><p>"+c+" at "+b+"</p>"},defaultState:null,average:function(a){return a.average},transitionDuration:250,noErrorCheck:!1,dxScale:b.scale.linear(),index:{i:0,x:0},xScale:null,yScale:null,duration:250,useInteractiveGuideline:!1,state:null};J.utils.create(u,i,Z),u.prototype.getLine=function(){return J.models.line()},u.prototype.getInteractiveLayer=function(){return J.interactiveGuideline()},u.prototype.wrapper=function(a){i.prototype.wrapper.call(this,a,["nv-interactive","nv-background","nv-avgLinesWrap","nv-controlsWrap"]),this.renderWatch=J.utils.renderWatch(this.dispatch,this.duration()),this.renderWatch.models(this.line),this.showXAxis()&&this.renderWatch.models(this.xAxis),this.showYAxis()&&this.renderWatch.models(this.yAxis)},u.prototype.draw=function(a){this.id(this.line.id()),this.svg.classed("nv-chart-"+this.id(),!0),this.xScale(this.line.xScale()),this.line.yScale(),this.yScale(this.line.yScale());var c=this,d=this.available.width,e=this.available.height,f=b.behavior.drag().on("dragstart",this.dragStart).on("drag",this.dragMove).on("dragend",this.dragEnd);if(this.rescaleY())this.line.yDomain(null);else{var g=a.filter(function(a){return!a.disabled}).map(function(a){var d=b.extent(a.values,c.line.y());return d[0]<-.95&&(d[0]=-.95),[(d[0]-d[1])/(1+d[1]),(d[1]-d[0])/(1+d[0])]}),h=[b.min(g,function(a){return a[0]}),b.max(g,function(a){return a[1]})];this.line.yDomain(h)}this.dxScale().domain([0,a[0].values.length-1]).range([0,d]).clamp(!0);var a=this.indexify(this.index().i,a);if(this.showControls()){var i=[{key:"Re-scale y-axis",disabled:!this.rescaleY()}];this.controls.width(140).color(["#444","#444","#444"]).rightAlign(!1).margin({top:5,right:0,bottom:5,left:20}),this.g.select(".nv-controlsWrap").datum(i).attr("transform","translate(0,"+-this.margin().top+")").call(this.controls)}var j=a.filter(function(a){return a.tempDisabled});this.wrap.select(".tempDisabled").remove(),j.length&&this.wrap.append("text").attr("class","tempDisabled").attr("x",d/2).attr("y","-.71em").style("text-anchor","end").text(j.map(function(a){return a.key}).join(", ")+" values cannot be calculated for this time period."),this.useInteractiveGuideline()&&(this.interactiveLayer.width(d).height(e).margin({left:this.margin().left,top:this.margin().top}).svgContainer(this.svg).xScale(this.xScale()),this.wrap.select(".nv-interactive").call(this.interactiveLayer)),this.gEnter.select(".nv-background").append("rect"),this.g.select(".nv-background rect").attr("width",d).attr("height",e),this.line.y(function(a){return a.display.y}).width(d).height(e).color(a.map(function(a,b){return a.color||c.color()(a,b)}).filter(function(b,c){return!a[c].disabled&&!a[c].tempDisabled}));var k=this.g.select(".nv-linesWrap").style("pointer-events",this.useInteractiveGuideline()?"none":"all").datum(a.filter(function(a){return!a.disabled&&!a.tempDisabled}));k.call(this.line),a.forEach(function(a,b){a.seriesIndex=b});var l=a.filter(function(a){return!a.disabled&&!!c.average()(a)}),m=this.g.select(".nv-avgLinesWrap").style("pointer-events","none").selectAll("line").data(l,function(a){return a.key}),n=function(a){var b=c.yScale()(c.average()(a));return 0>b?0:b>e?e:b};m.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(a){return c.line.color()(a,a.seriesIndex)}).attr("x1",0).attr("x2",d).attr("y1",n).attr("y2",n),m.style("stroke-opacity",function(a){var b=c.yScale()(c.average()(a));return 0>b||b>e?0:1}).attr("x1",0).attr("x2",d).attr("y1",n).attr("y2",n),m.exit().remove(),this.indexLine=k.selectAll(".nv-indexLine").data([c.index()]),this.indexLine.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).style("pointer-events","all").call(f),this.indexLine.attr("transform",function(a){return"translate("+c.dxScale()(a.i)+",0)"}).attr("height",e),this.plotAxes(a)},u.prototype.plotAxes=function(a){this.rightAlignYAxis()&&this.wrap.select(".nv-y.nv-axis").attr("transform","translate("+this.available.width+", 0)"),this.showXAxis()&&(this.xAxis.ticks(Math.min(a[0].values.length,this.available.width/70)).orient("bottom").tickPadding(7).highlightZero(!0).showMaxMin(!1).scale(this.xScale()).tickSize(-this.available.height,0),this.wrap.select(".nv-x.nv-axis").style("pointer-events","none").attr("transform","translate(0,"+this.yScale().range()[0]+")").transition().call(this.xAxis)),this.showYAxis()&&(this.yAxis.orient(this.rightAlignYAxis()?"right":"left").tickFormat(b.format(",.1f")).scale(this.yScale()).ticks(this.available.height/36).tickSize(-this.available.width,0),this.wrap.select(".nv-y.nv-axis").transition().call(this.yAxis))},u.prototype.attachEvents=function(){var a=this;this.line.dispatch.on("elementMouseover.tooltip",function(b){b.pos=[b.pos[0]+this.margin().left,b.pos[1]+a.margin().top],a.dispatch.tooltipShow(b)}).on("elementMouseout.tooltip",function(b){a.dispatch.tooltipHide(b)}).on("elementClick",function(b){a.index().i=b.pointIndex,a.index().x=a.dxScale()(a.index().i),a.state().index=a.index().i,a.dispatch.stateChange(a.state()),a.updateZero()}),this.controls.dispatch.on("legendClick",function(b){b.disabled=!b.disabled,a.rescaleY(!b.disabled),a.state().rescaleY=a.rescaleY(),a.dispatch.stateChange(a.state()),a.update()}),this.legend.dispatch.on("stateChange",function(b){a.state().disabled=b.disabled,a.dispatch.stateChange(a.state()),a.update()}),this.interactiveLayer.dispatch.on("elementMousemove",function(b){a.line.clearHighlights();var c,d,e,f=[];if(a.svg.call(function(g){g.each(function(g){g.filter(function(a,b){return a.seriesIndex=b,!a.disabled}).forEach(function(g,h){d=J.interactiveBisect(g.values,b.pointXValue,a.x()),a.line.highlightPoint(h,d,!0);var i=g.values[d];"undefined"!=typeof i&&("undefined"==typeof c&&(c=i),"undefined"==typeof e&&(e=a.xScale()(a.x()(i,d))),f.push({key:g.key,value:a.y()(i,d),color:a.color()(g,g.seriesIndex)}))})})}),f.length>2){var g=a.yScale().invert(b.mouseY),h=Math.abs(a.yScale().domain()[0]-a.yScale().domain()[1]),i=.03*h,j=J.nearestValueIndex(f.map(function(a){return a.value}),g,i);null!==j&&(f[j].highlight=!0)}var k=a.xAxis.tickFormat()(a.x()(c,d),d);a.interactiveLayer.tooltip.position({left:e+a.margin().left,top:b.mouseY+a.margin().top}).chartContainer(a.parentNode).enabled(a.tooltips()).valueFormatter(function(b){return a.yAxis.tickFormat()(b)}).data({value:k,series:f})(),a.interactiveLayer.renderGuideLine(e)}).on("elementMouseout",function(){a.dispatch.tooltipHide(),a.line.clearHighlights()}),this.dispatch.on("tooltipHide",function(){a.tooltips()&&J.tooltip.cleanup()}).on("tooltipShow",function(b){a.tooltips()&&a.showTooltip()(b,a.svg[0][0])}).on("changeState",function(b){"undefined"!=typeof b.disabled&&a.svg.call(function(c){c.each(function(c){c.forEach(function(a,c){a.disabled=b.disabled[c]}),a.state().disabled=b.disabled})}),"undefined"!=typeof b.index&&(a.index().i=b.index,a.index().x=a.dxScale()(a.index().i),a.state().index=b.index,a.indexLine.data([a.index()])),"undefined"!=typeof b.rescaleY&&a.rescaleY(b.rescaleY),a.update()}),this.g.select(".nv-background rect").on("click",function(){a.index().x=b.mouse(this)[0],a.index().i=Math.round(a.dxScale().invert(a.index().x)),a.state().index=a.index().i,a.dispatch.stateChange(a.state()),a.updateZero()})},u.prototype.indexify=function(a,b){return b.map(function(b){if(!b.values)return b;var c=b.values[a];if(null==c)return b;var d=this.line.y()(c,a);return-.95>d&&!this.noErrorCheck()?(b.tempDisabled=!0,b):(b.tempDisabled=!1,b.values=b.values.map(function(a,b){return a.display={y:(this.line.y()(a,b)-d)/(1+d)},a}.bind(this)),b)}.bind(this))},u.prototype.updateZero=function(){this.indexLine.data([this.index()]);var a=this.duration();this.duration(0),this.update(),this.duration(a)},u.prototype.dragStart=function(){this.svg.style("cursor","ew-resize")},u.prototype.dragMove=function(){this.index().x=b.event.x,this.index().i=Math.round(this.dxScale().invert(this.index().x)),this.updateZero()},u.prototype.dragEnd=function(){this.svg.style("cursor","auto"),this.state().index=this.index().i,this.dispatch.stateChange(this.state())},u.prototype.showTooltip=function(a,b){var c=a.pos[0]+(b.offsetLeft||0),d=a.pos[1]+(b.offsetTop||0),e=this.xAxis.tickFormat()(this.line.x()(a.point,a.pointIndex)),f=this.yAxis.tickFormat()(this.line.y()(a.point,a.pointIndex)),g=this.tooltip()(a.series.key,e,f);J.tooltip.show([c,d],g,null,null,b)},u.prototype.color=function(a){return arguments.length?(this.options.color=J.utils.getColor(a),this.legend.color(this.options.color),this):this.options.color},u.prototype.useInteractiveGuideline=function(a){return arguments.length?(this.options.useInteractiveGuideline=a,a===!0&&(this.line.interactive(!1),this.line.useVoronoi(!1)),this):this.options.useInteractiveGuideline},u.prototype.duration=function(a){return arguments.length?(this.options.duration=a,this.line.duration(a),this.xAxis.duration(a),this.yAxis.duration(a),this.renderWatch.reset(a),this):this.options.duration},u.prototype.x=function(a){return arguments.length?(this.options.x=a,this.line.x(a),this):this.options.x},u.prototype.y=function(a){return arguments.length?(this.options.y=a,this.line.y(a),this):this.options.y},J.models.cumulativeLineChart=function(){"use strict";function a(b){return c.render(b),a}var c=new u,d=["margin","width","height","color","rescaleY","showControls","useInteractiveGuideline","showLegend","showXAxis","showYAxis","tooltips","tooltipContent","state","defaultState","noData","average","duration","transitionDuration","noErrorCheck","reduceXTicks","rightAlignYAxis"];return a.dispatch=c.dispatch,a.lines=c.line,a.legend=c.legend,a.interactiveLayer=c.interactiveLayer,a.xAxis=c.xAxis,a.yAxis=c.yAxis,b.rebind(a,c.line,"isArea","x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","useVoronoi","id"),a.options=J.utils.optionsFunc.bind(a),J.utils.rebindp(a,c,u.prototype,d),a};var $={isArea:function(a){return a.area},clipEdge:!1,interpolate:"linear",xScale:null,yScale:null,xScale0:null,yScale0:null,duration:250,x:null,y:null,id:null};J.utils.create(v,e,$),v.prototype.getScatter=function(){return J.models.scatter()},v.prototype.wrapper=function(a){e.prototype.wrapper.call(this,a,["nv-groups"])},v.prototype.draw=function(){var a=this,c=this.available.width,d=this.available.height,e=this.wrap.select(".nv-scatterWrap");this.scatter.width(c).height(d),this.scatter.width(),e.transition().call(this.scatter),this.x(this.scatter.x()),this.y(this.scatter.y()),this.color(this.scatter.color()),this.id(this.scatter.id()),this.xScale(this.scatter.xScale()),this.yScale(this.scatter.yScale()),this.xScale0(this.xScale0()||this.xScale()),this.yScale0(this.yScale0()||this.yScale()),this.defsEnter.append("clipPath").attr("id","nv-edge-clip-"+this.id()).append("rect"),this.wrap.select("#nv-edge-clip-"+this.id()+" rect").attr("width",c).attr("height",d>0?d:0),this.g.attr("clip-path",this.clipEdge()?"url(#nv-edge-clip-"+this.id()+")":""),e.attr("clip-path",this.clipEdge()?"url(#nv-edge-clip-"+this.id()+")":"");var f=this.wrap.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});f.enter().append("g").style("stroke-opacity",this.opacityDefault()).style("fill-opacity",this.opacityDefault()),f.exit().remove(),f.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}).style("fill",function(b,c){return a.color()(b,c)}).style("stroke",function(b,c){return a.color()(b,c)}),f.watchTransition(this.renderWatch,"line: groups").style("stroke-opacity",1).style("fill-opacity",.5);var g=f.selectAll("path.nv-area").data(function(b){return a.isArea()(b)?[b]:[]});g.enter().append("path").attr("class","nv-area").attr("d",function(c){return b.svg.area().interpolate(a.interpolate()).defined(a.defined).x(function(b,c){return J.utils.NaNtoZero(a.xScale0()(a.x()(b,c)))}).y0(function(b,c){return J.utils.NaNtoZero(a.yScale0()(a.y()(b,c)))}).y1(function(){return a.yScale0()(a.yScale().domain()[0]<=0?a.yScale().domain()[1]>=0?0:a.yScale().domain()[1]:a.yScale().domain()[0])}).apply(a,[c.values])}),f.exit().selectAll("path.nv-area").remove(),g.watchTransition(this.renderWatch,"line: areaPaths").attr("d",function(c){return b.svg.area().interpolate(a.interpolate()).defined(a.defined).x(function(b,c){return J.utils.NaNtoZero(a.xScale()(a.x()(b,c)))}).y0(function(b,c){return J.utils.NaNtoZero(a.yScale()(a.y()(b,c)))}).y1(function(){return a.yScale()(a.yScale().domain()[0]<=0?a.yScale().domain()[1]>=0?0:a.yScale().domain()[1]:a.yScale().domain()[0])}).apply(a,[c.values])});var h=f.selectAll("path.nv-"+this.options.chartClass).data(function(a){return[a.values]});h.enter().append("path").attr("class","nv-"+this.options.chartClass).attr("d",b.svg.line().interpolate(this.interpolate()).defined(function(b,c){return!isNaN(a.y()(b,c))&&null!==a.y()(b,c)}).x(function(b,c){return J.utils.NaNtoZero(a.xScale0()(a.x()(b,c)))}).y(function(b,c){return J.utils.NaNtoZero(a.yScale0()(a.y()(b,c)))})),h.watchTransition(this.renderWatch,"line: linePaths").attr("d",b.svg.line().interpolate(this.interpolate()).defined(function(b,c){return!isNaN(a.y()(b,c))&&null!==a.y()(b,c)}).x(function(b,c){return J.utils.NaNtoZero(a.xScale()(a.x()(b,c)))}).y(function(b,c){return J.utils.NaNtoZero(a.yScale()(a.y()(b,c)))})),a.xScale0(this.xScale().copy()),a.yScale0(this.yScale().copy())},v.prototype.attachEvents=function(){e.prototype.attachEvents.call(this),this.scatter.dispatch.on("elementClick",function(){this.dispatch.elementClick.apply(this,arguments)}.bind(this)).on("elementMouseover",function(){this.dispatch.elementMouseover.apply(this,arguments)}.bind(this)).on("elementMouseout",function(){this.dispatch.elementMouseout.apply(this,arguments)}.bind(this))},v.prototype.duration=function(a){return arguments.length?(this.options.duration=a,this.scatter.duration(a),this.renderWatch.reset(a),this):this.options.duration},v.prototype.defined=function(a,b){return!isNaN(this.y()(a,b))&&null!==this.y()(a,b)},J.models.line=function(){"use strict";function a(b){return c.render(b),a}var c=new v,d=["margin","width","height","interpolate","isArea","duration","transitionDuration"];return b.rebind(a,c.scatter,"x","y","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","id","interactive","size","sizeDomain","forceX","forceY","forceSize","clipVoronoi","useVoronoi","clipRadius","padData","highlightPoint","clearHighlights","clipEdge","color"),a.dispatch=c.dispatch,a.scatter=c.scatter,a.options=J.utils.optionsFunc.bind(a),a.xScale(),J.utils.rebindp(a,c,v.prototype,d),a};var _={defaultState:null,xScale:null,yScale:null,interactive:null,useVoronoi:null,tooltips:!0,duration:250,useInteractiveGuideline:!1,state:null};J.utils.create(w,i,_),w.prototype.getLine=function(){return J.models.line()},w.prototype.getInteractiveLayer=function(){return J.interactiveGuideline()},w.prototype.wrapper=function(a){i.prototype.wrapper.call(this,a,["nv-interactive"]),this.renderWatch=J.utils.renderWatch(this.dispatch,this.duration()),this.renderWatch.models(this.line),this.showXAxis()&&this.renderWatch.models(this.xAxis),this.showYAxis()&&this.renderWatch.models(this.yAxis)},w.prototype.attachEvents=function(){e.prototype.attachEvents.call(this),this.legend.dispatch.on("stateChange",function(a){this.state=a,this.dispatch.stateChange(this.state),this.update()}.bind(this)),this.interactiveLayer.dispatch.on("elementMousemove",function(a){this.line.clearHighlights();var b,c,d,e=[];if(this.svg.call(function(f){f.each(function(f){f.filter(function(a,b){return a.seriesIndex=b,!a.disabled}).forEach(function(f,g){c=J.interactiveBisect(f.values,a.pointXValue,this.x()),this.line.highlightPoint(g,c,!0);var h=f.values[c];"undefined"!=typeof h&&("undefined"==typeof b&&(b=h),"undefined"==typeof d&&(d=this.xScale()(this.x()(h,c))),e.push({key:f.key,value:this.y()(h,c),color:this.color(f,f.seriesIndex)}))}.bind(this))})}),e.length>2){var f=this.yScale().invert(a.mouseY),g=Math.abs(this.yScale().domain()[0]-this.yScale().domain()[1]),h=.03*g,i=J.nearestValueIndex(e.map(function(a){return a.value}),f,h);null!==i&&(e[i].highlight=!0)}var j=this.xAxis.tickFormat()(this.x()(b,c));this.interactiveLayer.tooltip.position({left:d+this.margin().left,top:a.mouseY+this.margin().top}).chartContainer(this.svg[0][0].parentNode).enabled(this.tooltips).valueFormatter(function(a){return this.yAxis.tickFormat()(a)}.bind(this)).data({value:j,series:e})(),this.interactiveLayer.renderGuideLine(d)}.bind(this)).on("elementMouseout",function(){this.dispatch.tooltipHide(),this.line.clearHighlights()}.bind(this)),this.dispatch.on("tooltipShow",function(a){this.tooltips()&&this.showTooltip(a,this.svg[0][0].parentNode)}.bind(this)).on("changeState",function(a){"undefined"!=typeof a.disabled&&data.length===a.disabled.length&&(this.svg.call(function(b){b.each(function(b){b.forEach(function(b,c){b.disabled=a.disabled[c]})})}),this.state.disabled=a.disabled),this.update()}.bind(this)).on("tooltipHide",function(){this.tooltips()&&J.tooltip.cleanup()}.bind(this)),this.line.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+this.margin().left,a.pos[1]+this.margin().top],this.dispatch.tooltipShow(a)}.bind(this)).on("elementMouseout.tooltip",function(a){this.dispatch.tooltipHide(a)}.bind(this))},w.prototype.draw=function(a){var b=this,c=this.available.width,d=this.available.height;this.xScale(this.line.xScale()),this.yScale(this.line.yScale()),this.useInteractiveGuideline()&&(this.interactiveLayer.width(c).height(d).margin({left:this.margin().left,top:this.margin().top}).svgContainer(this.svg).xScale(this.xScale()),this.wrap.select(".nv-interactive").call(this.interactiveLayer)),this.line.width(c).height(d).color(a.map(function(a,c){return a.color||b.color()(a,c)}).filter(function(b,c){return!a[c].disabled}));this.g.select(".nv-linesWrap").datum(a.filter(function(a){return!a.disabled})).transition().call(this.line);i.prototype.draw.call(this,a)},w.prototype.duration=function(a){return arguments.length?(this.options.duration=a,this.renderWatch.reset(a),this.line.duration(a),this.xAxis.duration(a),this.yAxis.duration(a),this):this.options.duration},w.prototype.color=function(a){return arguments.length?(this.options.color=J.utils.getColor(a),this.legend.color(this.color()),this):this.options.color},w.prototype.useInteractiveGuideline=function(a){return arguments.length?(this.options.useInteractiveGuideline=a,a===!0&&(this.interactive(!1),this.useVoronoi(!1)),this):this.options.useInteractiveGuideline},w.prototype.showTooltip=function(a,b){var c=a.pos[0]+(b.offsetLeft||0),d=a.pos[1]+(b.offsetTop||0),e=this.xAxis.tickFormat()(this.line.x()(a.point,a.pointIndex)),f=this.yAxis.tickFormat()(this.line.y()(a.point,a.pointIndex)),g=this.tooltip()(a.series.key,e,f);J.tooltip.show([c,d],g,null,null,b)},J.models.lineChart=function(){"use strict";function a(b){return c.render(b),a}var c=new w,d=["margin","width","height","color","showXAxis","showYAxis","tooltips","tooltipContent","state","defaultState","noData","duration","transitionDuration","useInteractiveGuideline","reduceXTicks","rightAlignYAxis"];return a.dispatch=c.dispatch,a.lines=c.line,a.legend=c.legend,a.interactiveLayer=c.interactiveLayer,a.state=c.state,a.xAxis=c.xAxis,a.yAxis=c.yAxis,b.rebind(a,c.line,"margin","width","height","interpolate","isArea","duration","transitionDuration","x","y"),a.options=J.utils.optionsFunc.bind(a),J.utils.rebindp(a,c,w.prototype,d),a};var ab={tooltips:!0,state:null,defaultState:null,xScale:null,yScale1:null,yScale2:null,y1Axis:null,y2Axis:null,_color:J.utils.defaultColor()};J.utils.create(x,i,ab),x.prototype.getLine=function(){return J.models.line()},x.prototype.getHistoricalBar=function(){return J.models.historicalBar()},x.prototype.wrapper=function(a){i.prototype.wrapper.call(this,a,["nv-y1 nv-axis","nv-y2 nv-axis","nv-barsWrap","nv-linesWrap"])},x.prototype.draw=function(a){var c=this,d=this.available.width,e=this.available.height,f=a.filter(function(a){return!a.disabled&&a.bar}),g=a.filter(function(a){return!a.bar}),h=this.g.select(".nv-barsWrap").datum(f.length?f:[{values:[]}]),i=this.g.select(".nv-linesWrap").datum(g[0]&&!g[0].disabled?g:[{values:[]}]);this.line.margin({top:0,right:0,bottom:0,left:0}).width(d).height(e).color(a.map(function(a,b){return a.color||c._color()(a,b)}).filter(function(b,c){return!a[c].disabled&&!a[c].bar})),this.historicalBar.margin({top:0,right:0,bottom:0,left:0}).width(d).height(e).color(a.map(function(a,b){return a.color||c._color()(a,b)}).filter(function(b,c){return!a[c].disabled&&a[c].bar})),b.transition(h).call(this.historicalBar),b.transition(i).call(this.line),this.xScale(g.filter(function(a){return!a.disabled}).length&&g.filter(function(a){return!a.disabled})[0].values.length?this.line.xScale():this.historicalBar.xScale()),this.yScale1(this.historicalBar.yScale()),this.yScale2(this.line.yScale()),this.xAxis.scale(this.xScale()).ticks(d/100).tickSize(-e,0),this.y1Axis().scale(this.yScale1()).ticks(e/36).tickSize(-d,0),this.y2Axis().scale(this.yScale2()).ticks(e/36).tickSize(f.length?0:-d,0),this.g.select(".nv-x.nv-axis").attr("transform","translate(0,"+this.yScale1().range()[0]+")"),this.g.select(".nv-y2.nv-axis").style("opacity",g.length?1:0).attr("transform","translate("+d+",0)"),b.transition(this.g.select(".nv-x.nv-axis")).call(this.xAxis),b.transition(this.g.select(".nv-y1.nv-axis")).style("opacity",f.length?1:0).call(this.y1Axis()),b.transition(this.g.select(".nv-y2.nv-axis")).call(this.y2Axis())},x.prototype.attachEvents=function(){i.prototype.attachEvents.call(this);var a=this;this.dispatch.on("tooltipShow",function(a){this.tooltips&&this.showTooltip(a,this.svg[0][0].parentNode)}.bind(this)).on("changeState",function(b){"undefined"!=typeof b.disabled&&a.svg.call(function(c){c.each(function(c){c.forEach(function(a,c){a.disabled=b.disabled[c]}),a.state.disabled=b.disabled})}),this.update()}.bind(this)).on("tooltipHide",function(){this.tooltips&&J.tooltip.cleanup()}.bind(this)),this.legend.dispatch.on("stateChange",function(a){this.state=a,this.dispatch.stateChange(this.state),this.update()}.bind(this)),this.line.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+this.margin().left,a.pos[1]+this.margin().top],this.dispatch.tooltipShow(a)}.bind(this)).on("elementMouseout.tooltip",function(a){this.dispatch.tooltipHide(a)}.bind(this)),this.historicalBar.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+this.margin().left,a.pos[1]+this.margin().top],this.dispatch.tooltipShow(a)}.bind(this)).on("elementMouseout.tooltip",function(a){this.dispatch.tooltipHide(a)}.bind(this))},x.prototype.x=function(a){return arguments.length?(this.xScale(a),this.line.x(a),this.historicalBar.x(a),this):this.xScale()},x.prototype.color=function(a){return arguments.length?(this._color(J.utils.getColor(a)),this.legend.color(a),this):this._color()},x.prototype.tooltipContent=function(a){return arguments.length?(this.tooltip(a),this):this.tooltip()},J.models.linePlusBarChart=function(){"use strict";function a(b){return c.render(b),a}var c=new x;return a.dispatch=c.dispatch,a.legend=c.legend,a.line=c.line,a.bars=c.historicalBar,a.y1Axis=c.y1Axis(),a.y2Axis=c.y2Axis(),b.rebind(a,c.line,"defined","size","clipVoronoi","interpolate"),b.rebind(a,c.historicalBar,"forceY"),a.options=J.utils.optionsFunc.bind(a),J.utils.rebindp(a,c,x.prototype,"x","margin","width","height","color","showLegend","tooltips","tooltipContent","state","defaultState","noData","xAxis"),a};var bb={finderHeight:100,_color:J.utils.defaultColor(),extent:null,brushExtent:null,tooltips:!0,xScale:null,yScale:null,x2Scale:null,y1Scale:null,y2Scale:null,y3Scale:null,y4Scale:null,_x:function(a){return a.x},_y:function(a){return a.y},transitionDuration:0};J.utils.create(y,i,bb),y.prototype.getLine=function(){return J.models.line()},y.prototype.getHistoricalBar=function(){return J.models.historicalBar()},y.prototype.wrapper=function(a){i.prototype.wrapper.call(this,a,[""])},y.prototype.draw=function(a){function c(a){var b=+("e"==a),c=b?1:-1,d=j/3;return"M"+.5*c+","+d+"A6,6 0 0 "+b+" "+6.5*c+","+(d+6)+"V"+(2*d-6)+"A6,6 0 0 "+b+" "+.5*c+","+2*d+"ZM"+2.5*c+","+(d+8)+"V"+(2*d-8)+"M"+4.5*c+","+(d+8)+"V"+(2*d-8)}function d(){f.brush.empty()||f.brush.extent(f.brushExtent()),s.data([f.brush.empty()?f.x2Scale().domain():f.brushExtent()]).each(function(a){var c=f.x2Scale()(a[0])-f.x2Scale().range()[0],d=f.x2Scale().range()[1]-f.x2Scale()(a[1]);b.select(this).select(".left").attr("width",0>c?0:c),b.select(this).select(".right").attr("x",f.x2Scale()(a[1])).attr("width",0>d?0:d)})}function e(){f.brushExtent(f.brush.empty()?null:f.brush.extent()),f.extent(f.brush.empty()?f.x2Scale().domain():f.brush.extent()),f.dispatch.brush({extent:f.extent(),brush:f.brush}),d(),f.bars.width(g).height(h).color(a.map(function(a,b){return a.color||f._color(a,b)}).filter(function(b,c){return!a[c].disabled&&a[c].bar})),f.line.width(g).height(h).color(a.map(function(a,b){return a.color||f._color(a,b)}).filter(function(b,c){return!a[c].disabled&&!a[c].bar}));var b=f.g.select(".nv-focus .nv-barsWrap").datum(k.length?k.map(function(a){return{key:a.key,values:a.values.filter(function(a,b){return f.bars.x()(a,b)>=f.extent[0]&&f.bars.x()(a,b)<=f.extent()[1]})}}):[{values:[]}]),c=f.g.select(".nv-focus .nv-linesWrap").datum(l[0].disabled?[{values:[]}]:l.map(function(a){return{key:a.key,values:a.values.filter(function(a,b){return f.line.x()(a,b)>=f.extent()[0]&&f.line.x()(a,b)<=f.extent()[1]})}}));f.xScale(k.length?f.bars.xScale():f.line.xScale()),f.xAxis.scale(f.xScale()).ticks(g/100).tickSize(-h,0),f.xAxis.domain([Math.ceil(f.extent()[0]),Math.floor(f.extent()[1])]),f.g.select(".nv-x.nv-axis").transition().duration(f.transitionDuration()).call(f.xAxis),b.transition().duration(f.transitionDuration()).call(f.bars),c.transition().duration(f.transitionDuration()).call(f.line),f.g.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+f.y1Scale().range()[0]+")"),f.y1Axis.scale(f.y1Scale()).ticks(h/36).tickSize(-g,0),f.g.select(".nv-focus .nv-y1.nv-axis").style("opacity",k.length?1:0),f.y2Axis.scale(f.y2Scale()).ticks(h/36).tickSize(k.length?0:-g,0),f.g.select(".nv-focus .nv-y2.nv-axis").style("opacity",l.length?1:0).attr("transform","translate("+f.xScale().range()[1]+",0)"),f.g.select(".nv-focus .nv-y1.nv-axis").transition().duration(f.transitionDuration()).call(f.y1Axis),f.g.select(".nv-focus .nv-y2.nv-axis").transition().duration(f.transitionDuration()).call(f.y2Axis)}var f=this,g=this.available.width,h=this.available.height-this.finderHeight(),j=this.finderHeight()-this.options.margin2.top-this.options.margin2.bottom,k=a.filter(function(a){return!a.disabled&&a.bar}),l=a.filter(function(a){return!a.bar});this.xScale(this.bars.xScale()),this.yScale(this.bars.xScale()),this.x2Scale(this.x2Axis.scale()),this.y1Scale(this.bars.yScale()),this.y2Scale(this.line.yScale()),this.y3Scale(this.bars2.yScale()),this.y4Scale(this.line2.yScale());var m=a.filter(function(a){return!a.disabled&&a.bar}).map(function(a){return a.values.map(function(a,b){return{x:f._x()(a,b),y:f._y()(a,b)}})}),n=a.filter(function(a){return!a.disabled&&!a.bar}).map(function(a){return a.values.map(function(a,b){return{x:f._x()(a,b),y:f._y()(a,b)}})});this.xScale().range([0,g]),this.x2Scale().domain(b.extent(b.merge(m.concat(n)),function(a){return a.x})).range([0,g]);var o=this.gEnter.append("g").attr("class","nv-focus");o.append("g").attr("class","nv-x nv-axis"),o.append("g").attr("class","nv-y1 nv-axis"),o.append("g").attr("class","nv-y2 nv-axis"),o.append("g").attr("class","nv-barsWrap"),o.append("g").attr("class","nv-linesWrap");var p=this.gEnter.append("g").attr("class","nv-context");p.append("g").attr("class","nv-x nv-axis"),p.append("g").attr("class","nv-y1 nv-axis"),p.append("g").attr("class","nv-y2 nv-axis"),p.append("g").attr("class","nv-barsWrap"),p.append("g").attr("class","nv-linesWrap"),p.append("g").attr("class","nv-brushBackground"),p.append("g").attr("class","nv-x nv-brush"),this.bars2.width(g).height(j).color(a.map(function(a,b){return a.color||f._color(a,b)}).filter(function(b,c){return!a[c].disabled&&a[c].bar})),this.line2.width(g).height(j).color(a.map(function(a,b){return a.color||f._color(a,b)}).filter(function(b,c){return!a[c].disabled&&!a[c].bar}));var q=this.g.select(".nv-context .nv-barsWrap").datum(k.length?k:[{values:[]}]),r=this.g.select(".nv-context .nv-linesWrap").datum(l[0].disabled?[{values:[]}]:l);this.g.select(".nv-context").attr("transform","translate(0,"+(h+this.margin().bottom+this.options.margin2.top)+")"),q.transition().call(this.bars2),r.transition().call(this.line2),this.brush.x(this.x2Scale()).on("brush",e),this.brushExtent()&&this.brush.extent(this.brushExtent());var s=this.g.select(".nv-brushBackground").selectAll("g").data([this.brushExtent()||this.brush.extent()]),t=s.enter().append("g");t.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",j),t.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",j);var u=this.g.select(".nv-x.nv-brush").call(this.brush);u.selectAll("rect").attr("height",j),u.selectAll(".resize").append("path").attr("d",c),this.x2Axis.ticks(g/100).tickSize(-j,0),this.g.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+this.y3Scale().range()[0]+")"),this.g.select(".nv-context .nv-x.nv-axis").transition().call(this.x2Axis),this.y3Axis.scale(this.y3Scale()).ticks(j/36).tickSize(-g,0),this.g.select(".nv-context .nv-y1.nv-axis").style("opacity",k.length?1:0).attr("transform","translate(0,"+this.x2Scale().range()[0]+")"),this.g.select(".nv-context .nv-y1.nv-axis").transition().call(this.y3Axis),this.y4Axis.scale(this.y4Scale()).ticks(j/36).tickSize(k.length?0:-g,0),this.g.select(".nv-context .nv-y2.nv-axis").style("opacity",l.length?1:0).attr("transform","translate("+this.x2Scale().range()[1]+",0)"),this.g.select(".nv-context .nv-y2.nv-axis").transition().call(this.y4Axis),i.prototype.draw.call(this,a),e()
},y.prototype.attachEvents=function(){i.prototype.attachEvents.call(this),this.line.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+this.margin().left,a.pos[1]+this.margin().top],this.dispatch.tooltipShow(a)}.bind(this)).on("elementMouseout.tooltip",function(a){this.dispatch.tooltipHide(a)}.bind(this)),this.bars.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+this.margin().left,a.pos[1]+this.margin().top],this.dispatch.tooltipShow(a)}.bind(this)).on("elementMouseout.tooltip",function(a){this.dispatch.tooltipHide(a)}.bind(this)),this.legend.dispatch.on("stateChange",function(){this.update()}.bind(this)),this.dispatch.on("tooltipShow",function(a){this.tooltips()&&this.showTooltip(a,this.svg[0][0].parentNode)}.bind(this))},y.prototype.x=function(a){return arguments.length?(this._x(a),this.line.x(a),this.bars.x(a),this):this._x()},y.prototype.y=function(a){return arguments.length?(this._y(a),this.line.y(a),this.bars.y(a),this):this._y()},y.prototype.color=function(a){return arguments.length?(this._color(J.utils.getColor(a)),this.legend.color(a),this):this._color()},y.prototype.tooltipContent=function(a){return arguments.length?(this.tooltip(a),this):this.tooltip()},J.models.linePlusBarWithFocusChart=function(){"use strict";function a(b){return c.render(b),a}var c=new y;return a.dispatch=c.dispatch,a.legend=c.legend,a.lines=c.line,a.lines2=c.line2,a.bars=c.bars,a.bars2=c.bars2,a.xAxis=c.xAxis,a.x2Axis=c.x2Axis,a.y1Axis=c.y1Axis,a.y2Axis=c.y2Axis,a.y3Axis=c.y3Axis,a.y4Axis=c.y4Axis,b.rebind(a,c.line,"defined","size","clipVoronoi","interpolate"),a.options=J.utils.optionsFunc.bind(a),J.utils.rebindp(a,c,y.prototype,"x","y","margin","width","height","color","showLegend","tooltips","tooltipContent","noData","brushExtent","finderHeight","xAxis","yScale"),a},J.models.lineFisheye=function(){"use strict";function a(o){return o.each(function(a){g.setRoot(this);var o=g.available.width,p=g.available.height;c=c||n.xScale(),d=d||n.yScale(),e=e||c,f=f||d,g.wrapChart(a);var q=g.wrap.select(".nv-scatterWrap").datum(a);g.gEnter.append("g").attr("class","nv-groups"),n.width(o).height(p),b.transition(q).call(n),g.defsEnter.append("clipPath").attr("id","nv-edge-clip-"+i).append("rect"),g.wrap.select("#nv-edge-clip-"+i+" rect").attr("width",o).attr("height",p),g.g.attr("clip-path",l?"url(#nv-edge-clip-"+i+")":""),q.attr("clip-path",l?"url(#nv-edge-clip-"+i+")":"");var r=g.wrap.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});r.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),b.transition(r.exit()).style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),r.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}).style("fill",function(a,b){return h(a,b)}).style("stroke",function(a,b){return h(a,b)}),b.transition(r).style("stroke-opacity",1).style("fill-opacity",.5);var s=r.selectAll("path").data(function(a){return[a.values]});s.enter().append("path").attr("class","nv-line").attr("d",b.svg.line().interpolate(m).x(function(a,b){return e(j(a,b))}).y(function(a,b){return f(k(a,b))})),b.transition(r.exit().selectAll("path")).attr("d",b.svg.line().interpolate(m).x(function(a,b){return c(j(a,b))}).y(function(a,b){return d(k(a,b))})).remove(),b.transition(s).attr("d",b.svg.line().interpolate(m).x(function(a,b){return c(j(a,b))}).y(function(a,b){return d(k(a,b))})),e=c.copy(),f=d.copy()}),a}var c,d,e,f,g=new g({margin:{top:0,right:0,bottom:0,left:0},width:960,height:500,chartClass:"line",wrapClass:"scatterWrap"}),h=J.utils.defaultColor(),i=Math.floor(1e4*Math.random()),j=function(a){return a.x},k=function(a){return a.y},l=!1,m="linear",n=J.models.scatter().id(i).size(16).sizeDomain([16,256]);return a.dispatch=n.dispatch,b.rebind(a,n,"interactive","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","forceX","forceY","forceSize","clipVoronoi","clipRadius"),a.options=J.utils.optionsFunc.bind(a),a.margin=function(b){return arguments.length?(g.margin.top=J.utils.valueOrDefault(b.top,g.margin.top),g.margin.right=J.utils.valueOrDefault(b.right,g.margin.right),g.margin.bottom=J.utils.valueOrDefault(b.bottom,g.margin.bottom),g.margin.left=J.utils.valueOrDefault(b.left,g.margin.left),a):g.margin},a.width=function(b){return arguments.length?(g.options.size.width=b,a):g.options.size.width},a.height=function(b){return arguments.length?(g.options.size.height=b,a):g.options.size.height},a.x=function(b){return arguments.length?(j=b,n.x(b),a):j},a.y=function(b){return arguments.length?(k=b,n.y(b),a):k},a.clipEdge=function(b){return arguments.length?(l=b,a):l},a.color=function(b){return arguments.length?(h=J.utils.getColor(b),n.color(h),a):h},a.id=function(b){return arguments.length?(i=b,a):i},a.interpolate=function(b){return arguments.length?(m=b,a):m},a},J.models.lineChartFisheye=function(){"use strict";function a(i){return i.each(function(i){function t(){if(g)return x.select(".nv-point-paths").style("pointer-events","all"),!1;x.select(".nv-background").style("pointer-events","all"),x.select(".nv-point-paths").style("pointer-events","none");var a=b.mouse(this);y.call(j),x.select(".nv-x.nv-axis").call(k),o.distortion(f).focus(a[0])}if(c.setRoot(this),c.noData(i))return a;var u=this,v=c.available.width,w=c.available.height;a.update=function(){c.svg.transition().call(a)},a.container=this,c.wrapChart(i),c.gEnter.append("rect").attr("class","nvd3 nv-background").attr("width",v).attr("height",w),c.gEnter.append("g").attr("class","nv-x nv-axis"),c.gEnter.append("g").attr("class","nv-y nv-axis"),c.gEnter.append("g").attr("class","nv-linesWrap"),c.gEnter.append("g").attr("class","nv-legendWrap"),c.gEnter.append("g").attr("class","nv-controlsWrap"),c.gEnter.append("g").attr("class","nv-controlsWrap");var x=c.wrap.select("g");c.options.showLegend&&(m.width(v),x.select(".nv-legendWrap").datum(i).call(m),c.margin.top!=m.height()&&(c.margin.top=m.height(),w=(c.options.size.height||parseInt(c.svg.style("height"))||400)-c.margin.top-c.margin.bottom),x.select(".nv-legendWrap").attr("transform","translate(0,"+-c.margin.top+")")),e&&(n.width(180).color(["#444"]),x.select(".nv-controlsWrap").datum(s).attr("transform","translate(0,"+-c.margin.top+")").call(n)),j.width(v).height(w).color(i.map(function(a,b){return a.color||d(a,b)}).filter(function(a,b){return!i[b].disabled}));var y=x.select(".nv-linesWrap").datum(i.filter(function(a){return!a.disabled}));b.transition(y).call(j),k.ticks(v/100).tickSize(-w,0),x.select(".nv-x.nv-axis").attr("transform","translate(0,"+p.range()[0]+")"),b.transition(x.select(".nv-x.nv-axis")).call(k),l.ticks(w/36).tickSize(-v,0),b.transition(x.select(".nv-y.nv-axis")).call(l),x.select(".nv-background").on("mousemove",t).on("click",function(){g=!g}),n.dispatch.on("legendClick",function(b){b.disabled=!b.disabled,f=b.disabled?0:5,x.select(".nv-background").style("pointer-events",b.disabled?"none":"all"),x.select(".nv-point-paths").style("pointer-events",b.disabled?"all":"none"),b.disabled?(o.distortion(f).focus(0),y.call(j),x.select(".nv-x.nv-axis").call(k)):g=!1,a.update()}),m.dispatch.on("stateChange",function(){a.update()}).on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+c.margin.left,a.pos[1]+c.margin.top],q.tooltipShow(a)}),h&&q.on("tooltipShow",function(a){r(a,u.parentNode)}),j.dispatch.on("elementMouseout.tooltip",function(a){q.tooltipHide(a)}),h&&q.on("tooltipHide",J.tooltip.cleanup)}),a}var c=new c({margin:{top:30,right:20,bottom:50,left:60},chartClass:"lineChart"}),d=J.utils.defaultColor(),e=!0,f=0,g=!1,h=!0,i=function(a,b,c){return"<h3>"+a+"</h3><p>"+c+" at "+b+"</p>"},j=J.models.lineFisheye().xScale(o),k=J.models.axis().scale(o).orient("bottom").tickPadding(5),l=J.models.axis().scale(p).orient("left"),m=J.models.legend().height(30),n=J.models.legend().height(30).updateState(!1),o=b.fisheye.scale(b.scale.linear).distortion(0),p=j.yScale(),q=b.dispatch("tooltipShow","tooltipHide"),r=function(a,b){var c=a.pos[0]+(b.offsetLeft||0),d=a.pos[1]+(b.offsetTop||0),e=k.tickFormat()(j.x()(a.point,a.pointIndex)),f=l.tickFormat()(j.y()(a.point,a.pointIndex)),g=i(a.series.key,e,f);J.tooltip.show([c,d],g,null,null,b)},s=[{key:"Magnify",disabled:!0}];return a.dispatch=q,a.legend=m,a.xAxis=k,a.yAxis=l,b.rebind(a,j,"defined","x","y","size","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","id","interpolate"),a.options=J.utils.optionsFunc.bind(a),a.margin=function(b){return arguments.length?(c.margin.top=J.utils.valueOrDefault(b.top,c.margin.top),c.margin.right=J.utils.valueOrDefault(b.right,c.margin.right),c.margin.bottom=J.utils.valueOrDefault(b.bottom,c.margin.bottom),c.margin.left=J.utils.valueOrDefault(b.left,c.margin.left),a):c.margin},a.width=function(b){return arguments.length?(c.options.size.width=b,a):c.options.size.width},a.height=function(b){return arguments.length?(c.options.size.height=b,a):c.options.size.height},a.color=function(b){return arguments.length?(d=J.utils.getColor(b),m.color(d),a):d},a.showLegend=function(b){return arguments.length?(c.options.showLegend=b,a):c.options.showLegend},a.tooltips=function(b){return arguments.length?(h=b,a):h},a.tooltipContent=function(b){return arguments.length?(i=b,a):i},a.noData=function(b){return arguments.length?(c.options.noData=b,a):c.options.noData},a},J.models.lineWithFocusChart=function(){"use strict";function a(u){return u.each(function(u){function y(a){var b=+("e"==a),c=b?1:-1,d=E/3;return"M"+.5*c+","+d+"A6,6 0 0 "+b+" "+6.5*c+","+(d+6)+"V"+(2*d-6)+"A6,6 0 0 "+b+" "+.5*c+","+2*d+"ZM"+2.5*c+","+(d+8)+"V"+(2*d-8)+"M"+4.5*c+","+(d+8)+"V"+(2*d-8)}function z(){n.empty()||n.extent(s),I.data([n.empty()?e.domain():s]).each(function(a){var d=e(a[0])-c.range()[0],f=c.range()[1]-e(a[1]);b.select(this).select(".left").attr("width",0>d?0:d),b.select(this).select(".right").attr("x",e(a[1])).attr("width",0>f?0:f)})}function A(){s=n.empty()?null:n.extent();var a=n.empty()?e.domain():n.extent();if(!(Math.abs(a[0]-a[1])<=1)){v.brush({extent:a,brush:n}),z();var b=o.g.select(".nv-focus .nv-linesWrap").datum(u.filter(function(a){return!a.disabled}).map(function(b){return{key:b.key,area:b.area,values:b.values.filter(function(b,c){return g.x()(b,c)>=a[0]&&g.x()(b,c)<=a[1]})}}));b.transition().duration(w).call(g),o.g.select(".nv-focus .nv-x.nv-axis").transition().duration(w).call(i),o.g.select(".nv-focus .nv-y.nv-axis").transition().duration(w).call(j)}}if(o.setRoot(this),o.noData(u))return a;var B=this,C=o.available.width,D=(o.options.size.height||parseInt(o.svg.style("height"))||400)-o.margin.top-o.margin.bottom-r,E=r-p.top-p.bottom;a.update=function(){o.svg.transition().duration(w).call(a)},c=g.xScale(),d=g.yScale(),e=h.xScale(),f=h.yScale(),o.wrapChart(u);var F=o.gEnter.append("g").attr("class","nv-focus");F.append("g").attr("class","nv-x nv-axis"),F.append("g").attr("class","nv-y nv-axis"),F.append("g").attr("class","nv-linesWrap");var G=o.gEnter.append("g").attr("class","nv-context");G.append("g").attr("class","nv-x nv-axis"),G.append("g").attr("class","nv-y nv-axis"),G.append("g").attr("class","nv-linesWrap"),G.append("g").attr("class","nv-brushBackground"),G.append("g").attr("class","nv-x nv-brush"),o.options.showLegend&&(m.width(C),o.g.select(".nv-legendWrap").datum(u).call(m),o.margin.top!=m.height()&&(o.margin.top=m.height(),D=(o.options.size.height||parseInt(o.svg.style("height"))||400)-o.margin.top-o.margin.bottom-r),o.g.select(".nv-legendWrap").attr("transform","translate(0,"+-o.margin.top+")")),g.width(C).height(D).color(u.map(function(a,b){return a.color||q(a,b)}).filter(function(a,b){return!u[b].disabled})),h.defined(g.defined()).width(C).height(E).color(u.map(function(a,b){return a.color||q(a,b)}).filter(function(a,b){return!u[b].disabled})),o.g.select(".nv-context").attr("transform","translate(0,"+(D+o.margin.bottom+p.top)+")");var H=o.g.select(".nv-context .nv-linesWrap").datum(u.filter(function(a){return!a.disabled}));b.transition(H).call(h),i.scale(c).ticks(C/100).tickSize(-D,0),j.scale(d).ticks(D/36).tickSize(-C,0),o.g.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+D+")"),n.x(e).on("brush",function(){var b=a.transitionDuration();a.transitionDuration(0),A(),a.transitionDuration(b)}),s&&n.extent(s);var I=o.g.select(".nv-brushBackground").selectAll("g").data([s||n.extent()]),J=I.enter().append("g");J.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",E),J.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",E);var K=o.g.select(".nv-x.nv-brush").call(n);K.selectAll("rect").attr("height",E),K.selectAll(".resize").append("path").attr("d",y),A(),k.scale(e).ticks(C/100).tickSize(-E,0),o.g.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+f.range()[0]+")"),b.transition(o.g.select(".nv-context .nv-x.nv-axis")).call(k),l.scale(f).ticks(E/36).tickSize(-C,0),b.transition(o.g.select(".nv-context .nv-y.nv-axis")).call(l),o.g.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+f.range()[0]+")"),m.dispatch.on("stateChange",function(){a.update()}),v.on("tooltipShow",function(a){t&&x(a,B.parentNode)})}),a}var c,d,e,f,g=J.models.line(),h=J.models.line(),i=J.models.axis(),j=J.models.axis(),k=J.models.axis(),l=J.models.axis(),m=J.models.legend(),n=b.svg.brush(),o=new o({chartClass:"lineWithFocusChart",margin:{top:30,right:30,bottom:30,left:60}}),p={top:0,right:30,bottom:20,left:60},q=J.utils.defaultColor(),r=100,s=null,t=!0,u=function(a,b,c){return"<h3>"+a+"</h3><p>"+c+" at "+b+"</p>"},v=b.dispatch("tooltipShow","tooltipHide","brush"),w=250;g.clipEdge(!0),h.interactive(!1),i.orient("bottom").tickPadding(5),j.orient("left"),k.orient("bottom").tickPadding(5),l.orient("left");var x=function(a,b){var c=a.pos[0]+(b.offsetLeft||0),d=a.pos[1]+(b.offsetTop||0),e=i.tickFormat()(g.x()(a.point,a.pointIndex)),f=j.tickFormat()(g.y()(a.point,a.pointIndex)),h=u(a.series.key,e,f);J.tooltip.show([c,d],h,null,null,b)};return g.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+o.margin.left,a.pos[1]+o.margin.top],v.tooltipShow(a)}),g.dispatch.on("elementMouseout.tooltip",function(a){v.tooltipHide(a)}),v.on("tooltipHide",function(){t&&J.tooltip.cleanup()}),a.dispatch=v,a.legend=m,a.lines=g,a.lines2=h,a.xAxis=i,a.yAxis=j,a.x2Axis=k,a.y2Axis=l,b.rebind(a,g,"defined","isArea","size","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","id"),a.options=J.utils.optionsFunc.bind(a),a.x=function(b){return arguments.length?(g.x(b),h.x(b),a):g.x},a.y=function(b){return arguments.length?(g.y(b),h.y(b),a):g.y},a.margin=function(b){return arguments.length?(o.margin.top=J.utils.valueOrDefault(b.top,o.margin.top),o.margin.right=J.utils.valueOrDefault(b.right,o.margin.right),o.margin.bottom=J.utils.valueOrDefault(b.bottom,o.margin.bottom),o.margin.left=J.utils.valueOrDefault(b.left,o.margin.left),a):o.margin},a.margin2=function(b){return arguments.length?(p=b,a):p},a.width=function(b){return arguments.length?(o.options.size.width=b,a):o.options.size.width},a.height=function(b){return arguments.length?(o.options.size.height=b,a):o.options.size.height},a.height2=function(b){return arguments.length?(r=b,a):r},a.color=function(b){return arguments.length?(q=J.utils.getColor(b),m.color(q),a):q},a.showLegend=function(b){return arguments.length?(o.options.showLegend=b,a):o.options.showLegend},a.tooltips=function(b){return arguments.length?(t=b,a):t},a.tooltipContent=function(b){return arguments.length?(u=b,a):u},a.interpolate=function(b){return arguments.length?(g.interpolate(b),h.interpolate(b),a):g.interpolate()},a.noData=function(b){return arguments.length?(o.options.noData=b,a):o.options.noData},a.xTickFormat=function(b){return arguments.length?(i.tickFormat(b),k.tickFormat(b),a):i.tickFormat()},a.yTickFormat=function(b){return arguments.length?(j.tickFormat(b),l.tickFormat(b),a):j.tickFormat()},a.brushExtent=function(b){return arguments.length?(s=b,a):s},a.transitionDuration=function(b){return arguments.length?(w=b,a):w},a};var cb={Normal:{rotateAngle:function(){return 0},textAnchor:function(){return"middle"}},Sunbeam:{rotateAngle:function(a){var b=(a.startAngle+a.endAngle)/2*(180/Math.PI);return(a.startAngle+a.endAngle)/2<Math.PI?b-=90:b+=90,b},textAnchor:function(a){return(a.startAngle+a.endAngle)/2<Math.PI?"start":"end"}}},db={startAngle:0,endAngle:0,pieLabelsOutside:!0,showLabels:!0,labelType:"key",labelThreshold:.02,labelLayout:cb.Normal,labelFormat:b.format("%"),valueFormat:b.format(",.2f")};J.utils.create(z,e,db),z.prototype.radius=function(){return Math.min(this.available.width,this.available.height)/2},z.prototype.arcRadius=function(){return this.radius()-this.radius()/5},z.prototype.wrapper=function(a){e.prototype.wrapper.call(this,a,["nv-pieLabels"]),this.wrap.attr("transform","translate("+this.available.width/2+","+this.available.height/2+")")},z.prototype.draw=function(a){var c=null,d=null,e=null,f=null;c=this.getArc(),d=function(a){a.endAngle=isNaN(a.endAngle)?0:a.endAngle,a.startAngle=isNaN(a.startAngle)?0:a.startAngle,a.innerRadius=J.utils.valueOrDefault(a.innerRadius,0);var d=b.interpolate(this._current,a);return this._current=d(0),function(a){return c(d(a))}}.bind(this),e=b.layout.pie().sort(null).value(function(a){return a.disabled?0:this.y()(a)}.bind(this)),f=this.g.selectAll(".nv-slice").data(e),f.exit().remove(),this.paths=f.enter().append("path"),this.paths.each(function(a){isNaN(a.startAngle)&&(a.startAngle=0),isNaN(a.endAngle)&&(a.endAngle=0),this._current=a}.bind(this)).attr({fill:function(a,b){return this.color()(a,b)}.bind(this),stroke:function(a,b){return this.color()(a,b)}.bind(this)}).transition().attr("d",c).attrTween("d",d),this.showLabels()&&this.doLabels(a,c,e)},z.prototype.doLabels=function(a,c,d){var e=null,f=null,g=this,h={},i=14,j=140,k=function(a){return Math.floor(a[0]/j)*j+","+Math.floor(a[1]/i)*i};e=this.wrap.select(".nv-pieLabels").selectAll(".nv-label").data(d),e.exit().remove(),f=this.pieLabelsOutside()?c:b.svg.arc().innerRadius(0),e.enter().append("g").classed("nv-label",!0).each(function(){var a=b.select(this);a.attr("transform",function(a){return a.outerRadius=this.arcRadius()+10,a.innerRadius=this.arcRadius()+15,"translate("+f.centroid(a)+") rotate("+this.labelLayout().rotateAngle(a)+")"}.bind(g)),a.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3),a.append("text").style("text-anchor",g.labelLayout().textAnchor).style("fill","#000")}),e.transition().attr("transform",function(a){a.outerRadius=this.arcRadius()+10,a.innerRadius=this.arcRadius()+15;var b=f.centroid(a);if(a.value){var c=k(b);h[c]&&(b[1]-=i),h[k(b)]=!0}return"translate("+b+") rotate("+this.labelLayout().rotateAngle(a)+")"}.bind(this)),e.select(".nv-label text").style("text-anchor",this.labelLayout().textAnchor).text(function(a){var b=(a.endAngle-a.startAngle)/(2*Math.PI),c={key:this.x()(a.data),value:this.y()(a.data),percent:labelFormat(b)};return a.value&&b>this.labelThreshold()?c[this.labelType()]:""}.bind(this))},z.prototype.mouseData=function(a,c){return{label:this.x()(a.data),value:this.y()(a.data),point:a.data,pointIndex:c,pos:[b.event.pageX,b.event.pageY],id:this.id()}},z.prototype.attachEvents=function(){this.svg.on("click",function(a,c){this.dispatch.chartClick({data:a,index:c,pos:b.event,id:this.id()})}.bind(this));var a=this;this.paths.attr("class","nv-slice").on("mouseover",function(c,d){b.select(this).classed("hover",!0),a.dispatch.elementMouseover(a.mouseData(c,d))}).on("mouseout",function(c,d){b.select(this).classed("hover",!1),a.dispatch.elementMouseout(a.mouseData(c,d))}).on("click",function(a,c){this.dispatch.elementClick(this.mouseData(a,c)),b.event.stopPropagation()}.bind(this)).on("dblclick",function(a,c){this.dispatch.elementDblClick(this.mouseData(a,c)),b.event.stopPropagation()}.bind(this))},z.prototype.getArc=function(){var a=b.svg.arc().outerRadius(this.arcRadius());return this.startAngle()&&a.startAngle(this.startAngle()),this.endAngle()&&a.endAngle(this.endAngle()),a},z.prototype.layoutCenter=function(){return this.layout.center(this)},z.prototype.labelSunbeamLayout=function(a){return arguments.length?(this.labelLayout(a?cb.Sunbeam:cb.Normal),this):this.labelLayout()===cb.Sunbeam},J.models.pie=function(){"use strict";function a(c){return b.render(c),a}var b=new z;return a.dispatch=b.dispatch,a.options=J.utils.optionsFunc.bind(a),J.utils.rebindp(a,b,z.prototype,"margin","width","height","x","y","description","showLabels","labelSunbeamLayout","donutLabelsOutside","pieLabelsOutside","labelType","donut","donutRatio","startAngle","endAngle","id","color","labelThreshold","valueFormat","values"),a},J.utils.create(A,i,{}),A.prototype.getPie=function(){return J.models.pie()},A.prototype.draw=function(a){this.pie.width(this.available.width).height(this.available.height);var c=this.g.select(".nv-pieChartWrap").datum(a);b.transition(c).call(this.pie)},A.prototype.attachEvents=function(){i.prototype.attachEvents.call(this),this.pie.dispatch.on("elementMouseout.tooltip",function(a){this.dispatch.tooltipHide(a)}.bind(this)),this.pie.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+this.margin().left,a.pos[1]+this.margin().top],this.dispatch.tooltipShow(a)}.bind(this))},A.prototype.color=function(a){return arguments.length?(this.options.color=J.utils.getColor(a),this.legend.color(this.options.color),this.pie.color(this.options.color),this):this.color},A.prototype.showTooltip=function(a,b){var c=this.pie.description()(a.point)||this.pie.x()(a.point),d=a.pos[0]+(b&&b.offsetLeft||0),e=a.pos[1]+(b&&b.offsetTop||0),f=this.pie.valueFormat()(this.pie.y()(a.point)),g=this.tooltip()(c,f);J.tooltip.show([d,e],g,a.value<0?"n":"s",null,b)},J.models.pieChart=function(){"use strict";function a(b){return c.render(b),a}var c=new A;return a.legend=c.legend,a.dispatch=c.dispatch,a.pie=c.pie,a.state=c.state,b.rebind(a,c.pie,"valueFormat","values","x","y","description","id","showLabels","donutLabelsOutside","pieLabelsOutside","labelType","donut","donutRatio","labelThreshold","labelSunbeamLayout","labelLayout","labelFormat"),a.options=J.utils.optionsFunc.bind(a),J.utils.rebindp(a,c,A.prototype,"margin","width","height","color","tooltips","tooltipContent","showLegend","duration","noData","state"),a},DonutPrivates={donutRatio:.5,donutLabelsOutside:!1},J.utils.create(B,z,DonutPrivates),B.prototype.getArc=function(){var a=z.prototype.getArc.call(this);return a.innerRadius(this.radius()*this.donutRatio()),a},J.models.donut=function(){function a(c){return b.render(c),a}var b=new B;return a.dispatch=b.dispatch,J.utils.rebindp(a,b,B.prototype,"margin","width","height","x","y","values","description","showLabels","labelSunbeamLayout","donutLabelsOutside","pieLabelsOutside","labelType","donut","donutRatio","startAngle","endAngle","id","color","labelThreshold","valueFormat"),a.options=J.utils.optionsFunc.bind(a),a},J.utils.create(C,A,{}),C.prototype.getPie=function(){return J.models.donut()},J.models.donutChart=function(){function a(b){return c.render(b),a}var c=new C;return a.legend=c.legend,a.dispatch=c.dispatch,a.pie=c.pie,b.rebind(a,c.pie,"valueFormat","values","x","y","description","id","showLabels","donutLabelsOutside","pieLabelsOutside","labelType","donut","donutRatio","labelThreshold"),J.utils.rebindp(a,c,C.prototype,"margin","width","height","color","tooltips","tooltipContent","showLegend","duration","noData","state","showLegend"),a.options=J.utils.optionsFunc.bind(a),a};var eb={id:null,x:function(a){return a.x},y:function(a){return a.y},xScale:b.scale.linear(),yScale:b.scale.linear(),zScale:b.scale.linear(),getSize:function(a){return a.size||1},getShape:function(a){return a.shape||"circle"},onlyCircles:!0,forceX:[],forceY:[],forceSize:[],interactive:!0,pointKey:null,pointActive:function(a){return!a.notActive},padData:!1,padDataOuter:.1,clipEdge:!1,clipVoronoi:!0,clipRadius:function(){return 25},xDomain:null,yDomain:null,xRange:null,yRange:null,sizeDomain:null,sizeRange:null,singlePoint:!1,xScale0:null,yScale0:null,zScale0:null,timeoutID:null,needsUpdate:!1,useVoronoi:!0,duration:250};J.utils.create(D,e,eb),D.prototype.wrapper=function(a){var b=["nv-groups","nv-point-paths"],c="nv-"+this.options.chartClass,d="nv-"+this.options.wrapClass;this.wrap=this.svg.selectAll("g.nv-wrap."+d).data([a]),this.wrapEnter=this.wrap.enter().append("g").attr("class","nvd3 nv-wrap "+c+"nv-chart-"+this.id()+(this.singlePoint()?" nv-single-point":"")),this.defsEnter=this.wrapEnter.append("defs"),this.gEnter=this.wrapEnter.append("g"),this.g=this.wrap.select("g"),b.concat([d]).forEach(function(a){this.gEnter.append("g").attr("class",a)},this),this.defsEnter.append("clipPath").attr("id","nv-edge-clip-"+this.id()).append("rect"),this.wrap.select("#nv-edge-clip-"+this.id()+" rect").attr("width",this.available.width).attr("height",this.available.height>0?this.available.height:0),this.g.attr("clip-path",this.clipEdge()?"url(#nv-edge-clip-"+this.id()+")":""),this.wrap.attr("transform","translate("+this.margin().left+","+this.margin().top+")"),this.renderWatch=J.utils.renderWatch(this.dispatch,this.duration())},D.prototype.draw=function(a){function c(){if(!d.interactive())return!1;var c=b.merge(a.map(function(a,b){return a.values.map(function(a,c){var e=d.x()(a,c),f=d.y()(a,c);return[d.xScale()(e)+1e-7*Math.random(),d.yScale()(f)+1e-7*Math.random(),b,c,a]}).filter(function(a,b){return d.pointActive()(a[4],b)})}));if(d.useVoronoi()===!0){if(d.clipVoronoi()){var e=d.wrap.select("defs").selectAll(".nv-point-clips").data([d.id()]).enter();e.append("clipPath").attr("class","nv-point-clips").attr("id","nv-points-clip-"+d.id());var f=d.wrap.select("#nv-points-clip-"+d.id()).selectAll("circle").data(c);f.enter().append("circle").attr("r",d.clipRadius()),f.exit().remove(),f.attr("cx",function(a){return a[0]}).attr("cy",function(a){return a[1]}),d.wrap.select(".nv-point-paths").attr("clip-path","url(#nv-points-clip-"+d.id()+")")}c.length&&(c.push([d.xScale().range()[0]-20,d.yScale().range()[0]-20,null,null]),c.push([d.xScale().range()[1]+20,d.yScale().range()[1]+20,null,null]),c.push([d.xScale().range()[0]-20,d.yScale().range()[0]+20,null,null]),c.push([d.xScale().range()[1]+20,d.yScale().range()[1]-20,null,null]));var g=b.geom.polygon([[-10,-10],[-10,d.height()+10],[d.width()+10,d.height()+10],[d.width()+10,-10]]),h=b.geom.voronoi(c).map(function(a,b){return{data:g.clip(a),series:c[b][2],point:c[b][3]}}),i=d.wrap.select(".nv-point-paths").selectAll("path").data(h);i.enter().append("path").attr("class",function(a,b){return"nv-path-"+b}),i.exit().remove(),i.attr("d",function(a){return 0===a.data.length?"M 0 0":"M"+a.data.join("L")+"Z"});var j=function(b,c){if(d.needsUpdate())return 0;var e=a[b.series];if("undefined"!=typeof e){var f=e.values[b.point];c({point:f,series:e,pos:[d.xScale()(d.x()(f,b.point))+d.margin().left,d.yScale()(d.y()(f,b.point))+d.margin().top],seriesIndex:b.series,pointIndex:b.point})}};i.on("click",function(a){j(a,d.dispatch.elementClick)}).on("mouseover",function(a){j(a,d.dispatch.elementMouseover)}).on("mouseout",function(a){j(a,d.dispatch.elementMouseout)})}else d.wrap.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(b,c){if(d.needsUpdate()||!a[b.series])return 0;var e=a[b.series],f=e.values[c];d.dispatch.elementClick({point:f,series:e,pos:[d.xScale()(d.x()(f,c))+d.margin().left,d.yScale()(d.y()(f,c))+d.margin().top],seriesIndex:b.series,pointIndex:c})}).on("mouseover",function(b,c){if(d.needsUpdate()||!a[b.series])return 0;var e=a[b.series],f=e.values[c];d.dispatch.elementMouseover({point:f,series:e,pos:[d.xScale()(d.x()(f,c))+d.margin().left,d.yScale()(d.y()(f,c))+d.margin().top],seriesIndex:b.series,pointIndex:c})}).on("mouseout",function(b,c){if(d.needsUpdate()||!a[b.series])return 0;var e=a[b.series],f=e.values[c];d.dispatch.elementMouseout({point:f,series:e,seriesIndex:b.series,pointIndex:c})});d.needsUpdate(!1)}var d=this,e=this.available.width,f=this.available.height;a.forEach(function(a,b){a.values.forEach(function(a){a.series=b})});var g=this.xDomain()&&this.yDomain()&&this.sizeDomain()?[]:b.merge(a.map(function(a){return a.values.map(function(a,b){return{x:d.x()(a,b),y:d.y()(a,b),size:d.getSize()(a,b)}})}));this.xScale().domain(this.xDomain()||b.extent(g.map(function(a){return a.x}).concat(this.forceX()))),this.xScale().range(this.padData()&&a[0]?this.xRange()||[(e*this.padDataOuter()+e)/(2*a[0].values.length),e-e*(1+this.padDataOuter())/(2*a[0].values.length)]:this.xRange()||[0,e]),this.yScale().domain(this.yDomain()||b.extent(g.map(function(a){return a.y}).concat(this.forceY()))).range(this.yRange()||[f,0]),this.zScale().domain(this.sizeDomain()||b.extent(g.map(function(a){return a.size}).concat(this.forceSize()))).range(this.sizeRange()||[16,256]),(this.xScale().domain()[0]===this.xScale().domain()[1]||this.yScale().domain()[0]===this.yScale().domain()[1])&&this.singlePoint(!0),this.xScale().domain()[0]===this.xScale().domain()[1]&&this.xScale().domain(this.xScale().domain()[0]?[this.xScale().domain()[0]-.01*this.xScale().domain()[0],this.xScale().domain()[1]+.01*this.xScale().domain()[1]]:[-1,1]),this.yScale().domain()[0]===this.yScale().domain()[1]&&this.yScale().domain(this.yScale().domain()[0]?[this.yScale().domain()[0]-.01*this.yScale().domain()[0],this.yScale().domain()[1]+.01*this.yScale().domain()[1]]:[-1,1]),isNaN(this.xScale().domain()[0])&&this.xScale().domain([-1,1]),isNaN(this.yScale().domain()[0])&&this.yScale().domain([-1,1]),this.xScale0(this.xScale0()||this.xScale()),this.yScale0(this.yScale0()||this.yScale()),this.zScale0(this.zScale0()||this.zScale()),this.needsUpdate(!0);var h=this.wrap.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});if(h.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),h.exit().remove(),h.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}),h.watchTransition(this.renderWatch,"scatter: groups").style("fill",function(a,b){return d.color()(a,b)}).style("stroke",function(a,b){return d.color()(a,b)}).style("stroke-opacity",1).style("fill-opacity",.5),this.onlyCircles()){var i=h.selectAll("circle.nv-point").data(function(a){return a.values},this.pointKey());i.enter().append("circle").style("fill",function(a){return a.color}).style("stroke",function(a){return a.color}).attr("cx",function(a,b){return J.utils.NaNtoZero(d.xScale0()(d.x()(a,b)))}).attr("cy",function(a,b){return J.utils.NaNtoZero(d.yScale0()(d.y()(a,b)))}).attr("r",function(a,b){return Math.sqrt(d.zScale()(d.getSize()(a,b))/Math.PI)}),i.exit().remove(),h.exit().selectAll("path.nv-point").watchTransition(this.renderWatch,"scatter exit").attr("cx",function(a,b){return J.utils.NaNtoZero(d.xScale()(d.x()(a,b)))}).attr("cy",function(a,b){return J.utils.NaNtoZero(d.yScale()(d.y()(a,b)))}).remove(),i.each(function(a,c){b.select(this).classed("nv-point",!0).classed("nv-point-"+c,!0).classed("hover",!1)}),i.watchTransition(this.renderWatch,"scatter points").attr("cx",function(a,b){return J.utils.NaNtoZero(d.xScale()(d.x()(a,b)))}).attr("cy",function(a,b){return J.utils.NaNtoZero(d.yScale()(d.y()(a,b)))}).attr("r",function(a,b){return Math.sqrt(d.zScale()(d.getSize()(a,b))/Math.PI)})}else{var i=h.selectAll("path.nv-point").data(function(a){return a.values});i.enter().append("path").style("fill",function(a){return a.color}).style("stroke",function(a){return a.color}).attr("transform",function(a,b){return"translate("+d.xScale0()(d.x()(a,b))+","+d.yScale0()(d.y()(a,b))+")"}).attr("d",b.svg.symbol().type(d.getShape()).size(function(a,b){return d.zScale()(d.getSize()(a,b))})),i.exit().remove(),h.exit().selectAll("path.nv-point").watchTransition(d.renderWatch,"scatter exit").attr("transform",function(a,b){return"translate("+d.xScale()(d.x()(a,b))+","+d.yScale()(d.y()(a,b))+")"}).remove(),i.each(function(a,c){b.select(this).classed("nv-point",!0).classed("nv-point-"+c,!0).classed("hover",!1)
}),i.watchTransition(this.renderWatch,"scatter points").attr("transform",function(a,b){return"translate("+d.xScale()(d.x()(a,b))+","+d.yScale()(d.y()(a,b))+")"}).attr("d",b.svg.symbol().type(this.getShape()).size(function(a,b){return d.zScale()(d.getSize()(a,b))}))}clearTimeout(this.timeoutID()),this.timeoutID(setTimeout(c,300)),this.xScale0(this.xScale().copy()),this.yScale0(this.yScale().copy()),this.zScale0(this.zScale().copy())},D.prototype.attachEvents=function(){this.dispatch.on("elementMouseover.point",function(a){this.interactive()&&this.highlightPoint(a.seriesIndex,a.pointIndex,!0)}.bind(this)).on("elementMouseout.point",function(a){this.interactive()&&this.highlightPoint(a.seriesIndex,a.pointIndex,!1)}.bind(this))},D.prototype.clearHighlights=function(){b.selectAll(".nv-chart-"+this.id()+" .nv-point.hover").classed("hover",!1)},D.prototype.highlightPoint=function(a,c,d){b.select(".nv-chart-"+this.id()+" .nv-series-"+a+" .nv-point-"+c).classed("hover",d)},D.prototype.useVoronoi=function(a){return arguments.length?(this.options.useVoronoi=a,this.useVoronoi()===!1&&this.clipVoronoi(!1),this):this.options.useVoronoi},D.prototype.color=function(a){return arguments.length?(this.options.color=J.utils.getColor(a),this):this.options.color},D.prototype.duration=function(a){return arguments.length?(this.options.duration=a,this.renderWatch.reset(a),this):this.options.duration},D.prototype.size=function(a){return arguments.length?(this.options.getSize=b.functor(a),this):this.options.getSize},D.prototype.shape=function(a){return arguments.length?(this.options.getShape=a,this):this.options.getShape},J.models.scatter=function(){"use strict";function a(c){return b.render(c),a}var b=new D,c=["clearHighlights","highlightPoint","x","y","size","margin","width","height","xScale","yScale","zScale","xDomain","yDomain","sizeDomain","xRange","yRange","sizeRange","forceX","forceY","forceSize","interactive","pointKey","pointActive","padData","padDataOuter","clipEdge","clipVoronoi","useVoronoi","clipRadius","color","shape","onlyCircles","id","singlePoint","duration"];return a.dispatch=b.dispatch,a.options=J.utils.optionsFunc.bind(a),J.utils.rebindp(a,b,D.prototype,c),a};var fb={xScale:null,yScale:null,xPadding:0,yPadding:0,showDistX:!1,showDistY:!1,showControls:!!b.fisheye,fisheye:0,pauseFisheye:!1,tooltips:!0,tooltipX:function(a,b){return"<strong>"+b+"</strong>"},tooltipY:function(a,b,c){return"<strong>"+c+"</strong>"},tooltip:null,defaultState:null,transitionDuration:250,controlsData:[{key:"Magnify",disabled:!0}],xScale0:null,yScale0:null,duration:250,state:null};J.utils.create(E,i,fb),E.prototype.getDistribution=function(){return J.models.distribution()},E.prototype.wrapper=function(a){i.prototype.wrapper.call(this,a,["nv-distWrap","nv-controlsWrap"]),this.renderWatch=J.utils.renderWatch(this.dispatch,this.duration()),this.renderWatch.models(this.scatter),this.showXAxis()&&this.renderWatch.models(this.xAxis),this.showYAxis()&&this.renderWatch.models(this.yAxis),this.showDistX()&&this.renderWatch.models(this.distX),this.showDistY()&&this.renderWatch.models(this.distY)},E.prototype.draw=function(a){function c(){if(d.pauseFisheye())return d.g.select(".nv-point-paths").style("pointer-events","all"),!1;d.g.select(".nv-point-paths").style("pointer-events","none");var c=b.mouse(this);d.xScale().distortion(d.fisheye()).focus(c[0]),d.yScale().distortion(d.fisheye()).focus(c[1]),d.g.select(".nv-scatterWrap").call(d.scatter),d.showXAxis()&&d.g.select(".nv-x.nv-axis").call(d.xAxis),d.showYAxis()&&d.g.select(".nv-y.nv-axis").call(d.yAxis),d.g.select(".nv-distributionX").datum(a.filter(function(a){return!a.disabled})).call(d.distX),d.g.select(".nv-distributionY").datum(a.filter(function(a){return!a.disabled})).call(d.distY)}var d=this;if(this.xScale0(this.xScale0()||this.xScale()),this.yScale0(this.yScale0()||this.yScale()),this.scatter.margin({top:0,right:0,bottom:0,left:0}).width(this.available.width).height(this.available.height).color(a.map(function(a,b){return a.color||d.color()(a,b)}).filter(function(b,c){return!a[c].disabled})),0!==this.xPadding()&&this.scatter.xDomain(null),0!==this.yPadding()&&this.scatter.yDomain(null),this.wrap.select(".nv-scatterWrap").datum(a.filter(function(a){return!a.disabled})).call(this.scatter),0!==this.xPadding()){var e=this.xScale().domain()[1]-this.xScale().domain()[0];this.scatter.xDomain([this.xScale().domain()[0]-this.xPadding()*e,this.xScale().domain()[1]+this.xPadding()*e])}if(0!==this.yPadding()){var f=this.yScale().domain()[1]-this.yScale().domain()[0];this.scatter.yDomain([this.yScale().domain()[0]-this.yPadding()*f,this.yScale().domain()[1]+this.yPadding()*f])}(0!==this.yPadding()||0!==this.xPadding())&&this.wrap.select(".nv-scatterWrap").datum(a.filter(function(a){return!a.disabled})).call(this.scatter),this.showDistX()&&(this.distX.margin({top:0,right:0,bottom:0,left:0}).getData(this.scatter.x()).scale(this.xScale()).width(this.available.width).color(a.map(function(a,b){return a.color||d.color()(a,b)}).filter(function(b,c){return!a[c].disabled})),this.gEnter.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),this.g.select(".nv-distributionX").attr("transform","translate(0,"+this.yScale().range()[0]+")").datum(a.filter(function(a){return!a.disabled})).call(this.distX)),this.showDistY()&&(this.distY.margin({top:0,right:0,bottom:0,left:0}).getData(this.scatter.y()).scale(this.yScale()).width(this.available.height).color(a.map(function(a,b){return a.color||d.color()(a,b)}).filter(function(b,c){return!a[c].disabled})),this.gEnter.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),this.g.select(".nv-distributionY").attr("transform","translate("+(this.rightAlignYAxis()?this.available.width:-this.distY.size())+",0)").datum(a.filter(function(a){return!a.disabled})).call(this.distY)),b.fisheye&&(this.g.select(".nv-background").attr("width",this.available.width).attr("height",this.available.height),this.g.select(".nv-background").on("mousemove",c),this.g.select(".nv-background").on("click",function(){d.pauseFisheye(!d.pauseFisheye())}),this.scatter.dispatch.on("elementClick.freezeFisheye",function(){d.pauseFisheye(!d.pauseFisheye())})),this.xScale0(this.xScale().copy()),this.yScale0(this.yScale().copy()),i.prototype.draw.call(this,a)},E.prototype.attachEvents=function(){i.prototype.attachEvents.call(this);var a=this;this.scatter.dispatch.on("elementMouseout.tooltip",function(a){this.dispatch.tooltipHide(a),b.select(".nv-chart-"+this.scatter.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",0),b.select(".nv-chart-"+this.scatter.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",this.distY.size())}.bind(this)),this.dispatch.on("tooltipHide",function(){this.tooltips()&&J.tooltip.cleanup()}.bind(this)),this.controls.dispatch.on("legendClick",function(b){b.disabled=!b.disabled,a.fisheye(b.disabled?0:2.5),a.g.select(".nv-background").style("pointer-events",b.disabled?"none":"all"),a.g.select(".nv-point-paths").style("pointer-events",b.disabled?"all":"none"),b.disabled?(a.xScale().distortion(a.fisheye()).focus(0),a.yScale().distortion(a.fisheye()).focus(0),a.g.select(".nv-scatterWrap").call(a.scatter),a.g.select(".nv-x.nv-axis").call(a.xAxis),a.g.select(".nv-y.nv-axis").call(a.yAxis)):a.pauseFisheye(!1),a.update()}),a.legend.dispatch.on("stateChange",function(b){a.state.disabled=b.disabled,a.dispatch.stateChange(a.state),a.update()}),a.scatter.dispatch.on("elementMouseover.tooltip",function(c){b.select(".nv-chart-"+a.scatter.id()+" .nv-series-"+c.seriesIndex+" .nv-distx-"+c.pointIndex).attr("y1",function(){return c.pos[1]-a.available().height}),b.select(".nv-chart-"+a.scatter.id()+" .nv-series-"+c.seriesIndex+" .nv-disty-"+c.pointIndex).attr("x2",c.pos[0]+a.distX.size()),c.pos=[c.pos[0]+a.margin().left,c.pos[1]+a.margin().top],a.dispatch.tooltipShow(c)}),this.dispatch.on("tooltipShow",function(b){a.tooltips()&&a.showTooltip(b,a.svg[0][0])}),a.dispatch.on("changeState",function(b){"undefined"!=typeof b.disabled&&a.svg.call(function(c){c.each(function(c){c.forEach(function(a,c){a.disabled=b.disabled[c]}),a.state.disabled=b.disabled})}),a.update()})},E.prototype.showTooltip=function(a,b){var c=a.pos[0]+(b.offsetLeft||0),d=a.pos[1]+(b.offsetTop||0),e=a.pos[0]+(b.offsetLeft||0),f=this.yScale().range()[0]+this.margin().top+(b.offsetTop||0),g=this.xScale().range()[0]+this.margin().left+(b.offsetLeft||0),h=a.pos[1]+(b.offsetTop||0),i=this.xAxis.tickFormat()(this.scatter.x()(a.point,a.pointIndex)),j=this.yAxis.tickFormat()(this.scatter.y()(a.point,a.pointIndex));null!=this.tooltipX()&&J.tooltip.show([e,f],this.tooltipX()(a.series.key,i,j,a,this),"n",1,b,"x-nvtooltip"),null!=this.tooltipY()&&J.tooltip.show([g,h],this.tooltipY()(a.series.key,i,j,a,this),"e",1,b,"y-nvtooltip"),null!=this.tooltip()&&J.tooltip.show([c,d],this.tooltip()(a.series.key,i,j,a,this),a.value<0?"n":"s",null,b)},E.prototype.color=function(a){return arguments.length?(this.options.color=J.utils.getColor(a),this.legend.color(this.color()),this.distX.color(this.color()),this.distY.color(this.color()),this):this.options.color},E.prototype.duration=function(a){return arguments.length?(this.options.duration=a,this.renderWatch.reset(a),this.scatter.duration(a),this.xAxis.duration(a),this.yAxis.duration(a),this.distX.duration(a),this.distY.duration(a),this):this.options.duration},J.models.scatterChart=function(){"use strict";function a(b){return c.render(b),a}var c=new E,d=["margin","width","height","color","showDistX","showDistY","showControls","showLegend","showXAxis","showYAxis","fisheye","xPadding","yPadding","tooltips","tooltipContent","state","defaultState","noData","duration","transitionDuration","tooltipX","tooltipY","reduceXTicks","rightAlignYAxis"];return a.dispatch=c.dispatch,a.scatter=c.scatter,a.legend=c.legend,a.controls=c.controls,a.distX=c.distX,a.distY=c.distY,a.xAxis=c.xAxis,a.yAxis=c.yAxis,b.rebind(a,c.scatter,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi"),a.options=J.utils.optionsFunc.bind(a),J.utils.rebindp(a,c,E.prototype,d),a},J.models.scatterPlusLineChart=function(){"use strict";function a(z){return K.reset(),K.models(c),s&&K.models(d),t&&K.models(e),p&&K.models(h),q&&K.models(i),z.each(function(z){function A(){if(x)return U.select(".nv-point-paths").style("pointer-events","all"),!1;U.select(".nv-point-paths").style("pointer-events","none");var a=b.mouse(this);n.distortion(w).focus(a[0]),o.distortion(w).focus(a[1]),U.select(".nv-scatterWrap").datum(z.filter(function(a){return!a.disabled})).call(c),s&&U.select(".nv-x.nv-axis").call(d),t&&U.select(".nv-y.nv-axis").call(e),U.select(".nv-distributionX").datum(z.filter(function(a){return!a.disabled})).call(h),U.select(".nv-distributionY").datum(z.filter(function(a){return!a.disabled})).call(i)}var B=b.select(this),J=this,N=(k||parseInt(B.style("width"))||960)-j.left-j.right,O=(l||parseInt(B.style("height"))||400)-j.top-j.bottom;if(a.update=function(){0===G?B.call(a):B.transition().duration(G).call(a)},a.container=this,C.disabled=z.map(function(a){return!!a.disabled}),!D){var P;D={};for(P in C)D[P]=C[P]instanceof Array?C[P].slice(0):C[P]}if(!(z&&z.length&&z.filter(function(a){return a.values.length}).length)){var Q=B.selectAll(".nv-noData").data([F]);return Q.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),Q.attr("x",j.left+N/2).attr("y",j.top+O/2).text(function(a){return a}),K.renderEnd("scatter immediate"),a}B.selectAll(".nv-noData").remove(),n=c.xScale(),o=c.yScale(),H=H||n,I=I||o;var R=B.selectAll("g.nv-wrap.nv-scatterChart").data([z]),S=R.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+c.id()),T=S.append("g"),U=R.select("g");T.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none"),T.append("g").attr("class","nv-x nv-axis"),T.append("g").attr("class","nv-y nv-axis"),T.append("g").attr("class","nv-scatterWrap"),T.append("g").attr("class","nv-regressionLinesWrap"),T.append("g").attr("class","nv-distWrap"),T.append("g").attr("class","nv-legendWrap"),T.append("g").attr("class","nv-controlsWrap"),R.attr("transform","translate("+j.left+","+j.top+")"),u&&U.select(".nv-y.nv-axis").attr("transform","translate("+N+",0)"),r&&(f.width(N/2),R.select(".nv-legendWrap").datum(z).call(f),j.top!=f.height()&&(j.top=f.height(),O=(l||parseInt(B.style("height"))||400)-j.top-j.bottom),R.select(".nv-legendWrap").attr("transform","translate("+N/2+","+-j.top+")")),v&&(g.width(180).color(["#444"]),U.select(".nv-controlsWrap").datum(M).attr("transform","translate(0,"+-j.top+")").call(g)),c.width(N).height(O).color(z.map(function(a,b){return a.color||m(a,b)}).filter(function(a,b){return!z[b].disabled})),R.select(".nv-scatterWrap").datum(z.filter(function(a){return!a.disabled})).call(c),R.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+c.id()+")");var V=R.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(a){return a});V.enter().append("g").attr("class","nv-regLines");{var W=V.selectAll(".nv-regLine").data(function(a){return[a]});W.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0)}W.watchTransition(K,"scatterPlusLineChart: regline").attr("x1",n.range()[0]).attr("x2",n.range()[1]).attr("y1",function(a){return o(n.domain()[0]*a.slope+a.intercept)}).attr("y2",function(a){return o(n.domain()[1]*a.slope+a.intercept)}).style("stroke",function(a,b,c){return m(a,c)}).style("stroke-opacity",function(a){return a.disabled||"undefined"==typeof a.slope||"undefined"==typeof a.intercept?0:1}),s&&(d.scale(n).ticks(d.ticks()?d.ticks():N/100).tickSize(-O,0),U.select(".nv-x.nv-axis").attr("transform","translate(0,"+o.range()[0]+")").call(d)),t&&(e.scale(o).ticks(e.ticks()?e.ticks():O/36).tickSize(-N,0),U.select(".nv-y.nv-axis").call(e)),p&&(h.getData(c.x()).scale(n).width(N).color(z.map(function(a,b){return a.color||m(a,b)}).filter(function(a,b){return!z[b].disabled})),T.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),U.select(".nv-distributionX").attr("transform","translate(0,"+o.range()[0]+")").datum(z.filter(function(a){return!a.disabled})).call(h)),q&&(i.getData(c.y()).scale(o).width(O).color(z.map(function(a,b){return a.color||m(a,b)}).filter(function(a,b){return!z[b].disabled})),T.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),U.select(".nv-distributionY").attr("transform","translate("+(u?N:-i.size())+",0)").datum(z.filter(function(a){return!a.disabled})).call(i)),b.fisheye&&(U.select(".nv-background").attr("width",N).attr("height",O),U.select(".nv-background").on("mousemove",A),U.select(".nv-background").on("click",function(){x=!x}),c.dispatch.on("elementClick.freezeFisheye",function(){x=!x})),g.dispatch.on("legendClick",function(b){b.disabled=!b.disabled,w=b.disabled?0:2.5,U.select(".nv-background").style("pointer-events",b.disabled?"none":"all"),U.select(".nv-point-paths").style("pointer-events",b.disabled?"all":"none"),b.disabled?(n.distortion(w).focus(0),o.distortion(w).focus(0),U.select(".nv-scatterWrap").call(c),U.select(".nv-x.nv-axis").call(d),U.select(".nv-y.nv-axis").call(e)):x=!1,a.update()}),f.dispatch.on("stateChange",function(b){C=b,E.stateChange(C),a.update()}),c.dispatch.on("elementMouseover.tooltip",function(a){b.select(".nv-chart-"+c.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",a.pos[1]-O),b.select(".nv-chart-"+c.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",a.pos[0]+h.size()),a.pos=[a.pos[0]+j.left,a.pos[1]+j.top],E.tooltipShow(a)}),E.on("tooltipShow",function(a){y&&L(a,J.parentNode)}),E.on("changeState",function(b){"undefined"!=typeof b.disabled&&(z.forEach(function(a,c){a.disabled=b.disabled[c]}),C.disabled=b.disabled),a.update()}),H=n.copy(),I=o.copy()}),K.renderEnd("scatter with line immediate"),a}var c=J.models.scatter(),d=J.models.axis(),e=J.models.axis(),f=J.models.legend(),g=J.models.legend(),h=J.models.distribution(),i=J.models.distribution(),j={top:30,right:20,bottom:50,left:75},k=null,l=null,m=J.utils.defaultColor(),n=b.fisheye?b.fisheye.scale(b.scale.linear).distortion(0):c.xScale(),o=b.fisheye?b.fisheye.scale(b.scale.linear).distortion(0):c.yScale(),p=!1,q=!1,r=!0,s=!0,t=!0,u=!1,v=!!b.fisheye,w=0,x=!1,y=!0,z=function(a,b){return"<strong>"+b+"</strong>"},A=function(a,b,c){return"<strong>"+c+"</strong>"},B=function(a,b,c,d){return"<h3>"+a+"</h3><p>"+d+"</p>"},C={},D=null,E=b.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),F="No Data Available.",G=250;c.xScale(n).yScale(o),d.orient("bottom").tickPadding(10),e.orient(u?"right":"left").tickPadding(10),h.axis("x"),i.axis("y"),g.updateState(!1);var H,I,K=J.utils.renderWatch(E,G),L=function(b,f){var g=b.pos[0]+(f.offsetLeft||0),h=b.pos[1]+(f.offsetTop||0),i=b.pos[0]+(f.offsetLeft||0),k=o.range()[0]+j.top+(f.offsetTop||0),l=n.range()[0]+j.left+(f.offsetLeft||0),m=b.pos[1]+(f.offsetTop||0),p=d.tickFormat()(c.x()(b.point,b.pointIndex)),q=e.tickFormat()(c.y()(b.point,b.pointIndex));null!=z&&J.tooltip.show([i,k],z(b.series.key,p,q,b,a),"n",1,f,"x-nvtooltip"),null!=A&&J.tooltip.show([l,m],A(b.series.key,p,q,b,a),"e",1,f,"y-nvtooltip"),null!=B&&J.tooltip.show([g,h],B(b.series.key,p,q,b.point.tooltip,b,a),b.value<0?"n":"s",null,f)},M=[{key:"Magnify",disabled:!0}];return c.dispatch.on("elementMouseout.tooltip",function(a){E.tooltipHide(a),b.select(".nv-chart-"+c.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",0),b.select(".nv-chart-"+c.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",i.size())}),E.on("tooltipHide",function(){y&&J.tooltip.cleanup()}),a.dispatch=E,a.scatter=c,a.legend=f,a.controls=g,a.xAxis=d,a.yAxis=e,a.distX=h,a.distY=i,b.rebind(a,c,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi"),a.options=J.utils.optionsFunc.bind(a),a.margin=function(b){return arguments.length?(j.top="undefined"!=typeof b.top?b.top:j.top,j.right="undefined"!=typeof b.right?b.right:j.right,j.bottom="undefined"!=typeof b.bottom?b.bottom:j.bottom,j.left="undefined"!=typeof b.left?b.left:j.left,a):j},a.width=function(b){return arguments.length?(k=b,a):k},a.height=function(b){return arguments.length?(l=b,a):l},a.color=function(b){return arguments.length?(m=J.utils.getColor(b),f.color(m),h.color(m),i.color(m),a):m},a.showDistX=function(b){return arguments.length?(p=b,a):p},a.showDistY=function(b){return arguments.length?(q=b,a):q},a.showControls=function(b){return arguments.length?(v=b,a):v},a.showLegend=function(b){return arguments.length?(r=b,a):r},a.showXAxis=function(b){return arguments.length?(s=b,a):s},a.showYAxis=function(b){return arguments.length?(t=b,a):t},a.rightAlignYAxis=function(b){return arguments.length?(u=b,e.orient(b?"right":"left"),a):u},a.fisheye=function(b){return arguments.length?(w=b,a):w},a.tooltips=function(b){return arguments.length?(y=b,a):y},a.tooltipContent=function(b){return arguments.length?(B=b,a):B},a.tooltipXContent=function(b){return arguments.length?(z=b,a):z},a.tooltipYContent=function(b){return arguments.length?(A=b,a):A},a.state=function(b){return arguments.length?(C=b,a):C},a.defaultState=function(b){return arguments.length?(D=b,a):D},a.noData=function(b){return arguments.length?(F=b,a):F},a.transitionDuration=function(b){return J.deprecated("scatterPlusLineChart.transitionDuration"),a.duration(b)},a.duration=function(b){return arguments.length?(G=b,a):G},a};var gb={animate:!0,xScale:b.scale.linear(),yScale:b.scale.linear(),xDomain:null,yDomain:null,xRange:null,yRange:null,color:J.utils.getColor(["#000000"])};J.utils.create(F,e,gb),F.prototype.wrapper=function(a){e.prototype.wrapper.call(this,a,[])},F.prototype.draw=function(a){var c=this,d=this.available.width,e=this.available.height;this.xScale().domain(this.xDomain()||b.extent(a,this.x())).range(this.xRange()||[0,d]),this.yScale().domain(this.yDomain()||b.extent(a,this.y())).range(this.yRange()||[e,0]);var f=this.wrap.selectAll("path").data(function(a){return[a]});f.enter().append("path"),f.exit().remove(),f.style("stroke",function(a,b){return a.color||c.color()(a,b)}).attr("d",b.svg.line().x(function(a,b){return c.xScale()(c.x()(a,b))}).y(function(a,b){return c.yScale()(c.y()(a,b))}));var g=this.wrap.selectAll("circle.nv-point").data(function(a){function b(b){if(-1!=b){var c=a[b];return c.pointIndex=b,c}return null}var d=a.map(function(a,b){return c.y()(a,b)}),e=b(d.lastIndexOf(c.yScale().domain()[1])),f=b(d.indexOf(c.yScale().domain()[0])),g=b(d.length-1);return[f,e,g].filter(function(a){return null!=a})});g.enter().append("circle"),g.exit().remove(),g.attr("cx",function(a){return c.xScale()(c.x()(a,a.pointIndex))}).attr("cy",function(a){return c.yScale()(c.y()(a,a.pointIndex))}).attr("r",2).attr("class",function(a){return c.x()(a,a.pointIndex)==c.xScale().domain()[1]?"nv-point nv-currentValue":c.y()(a,a.pointIndex)==c.yScale().domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})},F.prototype.color=function(a){return arguments.length?(this.options.color=J.utils.getColor(a),this):this.options.color},J.models.sparkline=function(){"use strict";function a(c){return b.render(c),a}var b=new F;return a.dispatch=b.dispatch,a.options=J.utils.optionsFunc.bind(a),J.utils.rebindp(a,b,F.prototype,"margin","width","height","x","y","xScale","yScale","xDomain","yDomain","xRange","yRange","animate","color"),a};var hb={index:[],paused:!1,xTickFormat:b.format(",r"),yTickFormat:b.format(",.2f"),showValue:!0,alignValue:!0,rightAlignValue:!1,xScale:null,yScale:null};J.utils.create(G,i,hb),G.prototype.getSparkline=function(){return J.models.sparkline()},G.prototype.wrapper=function(a){var b=["nv-valueWrap","nv-sparklineWrap","nv-hoverArea"];e.prototype.wrapper.call(this,a,b),this.wrap.attr("transform","translate("+this.margin().left+","+this.margin().top+")")},G.prototype.draw=function(a){function c(){if(!e.paused()){var b=e.g.selectAll(".nv-hoverValue").data(e.index()),c=b.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);b.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove(),b.attr("transform",function(b){return"translate("+e.xScale()(e.sparkline.x()(a[b],b))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1),e.index().length&&(c.append("line").attr("x1",0).attr("y1",-e.margin().top).attr("x2",0).attr("y2",g),c.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-e.margin().top).attr("text-anchor","end").attr("dy",".9em"),e.g.select(".nv-hoverValue .nv-xValue").text(e.xTickFormat()(e.sparkline.x()(a[e.index()[0]],e.index()[0]))),c.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-e.margin().top).attr("text-anchor","start").attr("dy",".9em"),e.g.select(".nv-hoverValue .nv-yValue").text(e.yTickFormat()(e.sparkline.y()(a[e.index()[0]],e.index()[0]))))}}function d(){function d(a,b){for(var c=Math.abs(e.sparkline.x()(a[0],0)-b),d=0,f=0;f<a.length;f++)Math.abs(e.sparkline.x()(a[f],f)-b)<c&&(c=Math.abs(e.sparkline.x()(a[f],f)-b),d=f);return d}if(!e.paused()){var f=b.mouse(this)[0]-e.margin().left;e.index([d(a,Math.round(e.xScale().invert(f)))]),c()}}var e=this,f=this.available.width,g=this.available.height,h=null,i=null,j=null,k=this.sparkline.y()(a[a.length-1],a.length-1);this.xScale(this.sparkline.xScale()),this.yScale(this.sparkline.yScale()),this.sparkline.width(f).height(g),h=this.g.select(".nv-sparklineWrap"),h.call(this.sparkline),i=this.g.select(".nv-valueWrap"),j=i.selectAll(".nv-currentValue").data([k]),j.enter().append("text").attr("class","nv-currentValue").attr("dx",this.rightAlignValue()?-8:8).attr("dy",".9em").style("text-anchor",this.rightAlignValue()?"end":"start"),j.attr("x",f+(this.rightAlignValue()?this.margin().right:0)).attr("y",this.alignValue()?function(a){return e.yScale()(a)}:0).style("fill",this.color()(a[a.length-1],a.length-1)).text(this.yTickFormat()(k)),this.gEnter.select(".nv-hoverArea").append("rect").on("mousemove",d).on("click",function(){e.paused(!e.paused())}).on("mouseout",function(){e.index([]),c()}),this.g.select(".nv-hoverArea rect").attr("transform",function(){return"translate("+-e.margin().left+","+-e.margin().top+")"}).attr("width",f+this.margin().left+this.margin().right).attr("height",g+this.margin().top)},G.prototype.attachEvents=function(){i.prototype.attachEvents.call(this)},J.models.sparklinePlus=function(){"use strict";function a(b){return c.render(b),a}var c=new G;return a.dispatch=c.dispatch,a.sparkline=c.sparkline,a.state=c.state,b.rebind(a,c.sparkline,"x","y","xScale","yScale","color"),a.options=J.utils.optionsFunc.bind(a),J.utils.rebindp(a,c,G.prototype,"margin","width","height","xTickFormat","yTickFormat","showValue","alignValue","rightAlignValue","noData"),a};var ib={id:Math.floor(1e5*Math.random()),offset:"zero",order:"default",interpolate:"linear",clipEdge:!1,xScale:null,yScale:null,dataRaw:null,duration:250,style:"stack"};J.utils.create(H,i,ib),H.prototype.getScatter=function(){return J.models.scatter()},H.prototype.wrapper=function(a){e.prototype.wrapper.call(this,a,["nv-areaWrap","nv-scatterWrap"]),this.scatter.size(2.2).sizeDomain([2.2,2.2]),this.renderWatch.models(this.scatter)},H.prototype.draw=function(a){var c=this,d=a.filter(function(a){return!a.disabled}),e=null,f=null,g=null,h=null,i=function(a){return{point:a,series:a.key,pos:[b.event.pageX,b.event.pageY],seriesIndex:a.seriesIndex}};this.xScale(this.scatter.xScale()),this.yScale(this.scatter.yScale()),this.dataRaw(a),a.forEach(function(a,b){a.seriesIndex=b,a.values=a.values.map(function(a,c){return a.index=c,a.seriesIndex=b,a})}),a=b.layout.stack().order(this.order()).offset(this.offset()).values(function(a){return a.values}).x(this.x()).y(this.y()).out(function(a,b,d){var e=0===c.y()(a)?0:d;a.display={y:e,y0:b}})(d),this.scatter.width(this.available.width).height(this.available.height).x(this.x()).y(function(a){return a.display.y+a.display.y0}).forceY([0]).color(a.map(function(a){return a.color||c.color()(a,a.seriesIndex)})),e=this.g.select(".nv-scatterWrap").datum(a),e.call(this.scatter),this.defsEnter.append("clipPath").attr("id","nv-edge-clip-"+this.id()).append("rect"),this.wrap.select("#nv-edge-clip-"+this.id()+" rect").attr("width",this.available.width).attr("height",this.available.height),this.g.attr("clip-path",this.clipEdge()?"url(#nv-edge-clip-"+this.id()+")":""),f=b.svg.area().x(function(a){return c.xScale()(c.x()(a))}).y0(function(a){return c.yScale()(a.display.y0)}).y1(function(a){return c.yScale()(a.display.y+a.display.y0)}).interpolate(this.interpolate()),g=b.svg.area().x(function(a){return c.xScale()(c.x()(a))}).y0(function(a){return c.yScale()(a.display.y0)}).y1(function(a){return c.yScale()(a.display.y0)}),h=this.g.select(".nv-areaWrap").selectAll("path.nv-area").data(a),h.enter().append("path").attr("class",function(a,b){return"nv-area nv-area-"+b}).attr("d",function(a){return g(a.values,a.seriesIndex)}).on("mouseover",function(a){b.select(this).classed("hover",!0),c.dispatch.areaMouseover(i(a))}).on("mouseout",function(a){b.select(this).classed("hover",!1),c.dispatch.areaMouseout(i(a))}).on("click",function(a){b.select(this).classed("hover",!1),c.dispatch.areaClick(i(a))}),h.exit().remove(),h.style("fill",function(a){return a.color||c.color()(a,a.seriesIndex)}).style("stroke",function(a){return a.color||c.color()(a,a.seriesIndex)}),h.watchTransition(this.renderWatch,"stackedArea path").attr("d",function(a,b){return f(a.values,b)})},H.prototype.attachEvents=function(){i.prototype.attachEvents.call(this);var a=function(a){return".nv-chart-"+this.id()+" .nv-area-"+a.seriesIndex}.bind(this);this.scatter.dispatch.on("elementMouseover.area",function(b){this.g.select(a(b)).classed("hover",!0)}.bind(this)).on("elementMouseout.area",function(b){this.g.select(a(b)).classed("hover",!1)}.bind(this)).on("elementClick.area",function(a){this.dispatch.areaClick(a)}.bind(this))},H.prototype.color=function(a){return arguments.length?(this.options.color=J.utils.getColor(a),this):this.options.color},H.prototype.style=function(a){if(!arguments.length)return this.options.style;switch(this.options.style=a,a){case"stack":this.offset("zero"),this.order("default");break;case"stream":this.offset("wiggle"),this.order("inside-out");break;case"stream-center":this.offset("silhouette"),this.order("inside-out");break;case"expand":this.offset("expand"),this.order("default");break;case"stack_percent":this.offset(this.d3_stackedOffset_stackPercent),this.order("default")}return this},H.prototype.duration=function(a){return arguments.length?(this.options.duration=a,this.renderWatch.reset(a),this.scatter.duration(a),this):this.options.duration},H.prototype.d3_stackedOffset_stackPercent=function(a){var b,c,d,e=a.length,f=a[0].length,g=1/e,h=[];for(c=0;f>c;++c){for(b=0,d=0;b<this.dataRaw().length;b++)d+=this.y()(this.dataRaw()[b].values[c]);if(d)for(b=0;e>b;b++)a[b][c][1]/=d;else for(b=0;e>b;b++)a[b][c][1]=g}for(c=0;f>c;++c)h[c]=0;return h},J.models.stackedArea=function(){"use strict";function a(b){return c.render(b),a}var c=new H;return a.dispatch=c.dispatch,a.scatter=c.scatter,b.rebind(a,c.scatter,"interactive","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","forceX","forceY","forceSize","clipVoronoi","useVoronoi","clipRadius","highlightPoint","clearHighlights"),a.options=J.utils.optionsFunc.bind(a),J.utils.rebindp(a,c,H.prototype,"x","y","margin","width","height","clipEdge","offset","order","color","style","interpolate"),a};var jb={showControls:!0,tooltip:function(a,b,c){return"<h3>"+a+"</h3><p>"+c+" on "+b+"</p>"},yAxisTickFormat:b.format(",.2f"),defaultState:null,controlWidth:250,cData:["Stacked","Stream","Expanded"],xScale:null,yScale:null,interactive:null,useVoronoi:null,tooltips:!0,useInteractiveGuideline:!1,controlLabels:{},duration:250};return J.utils.create(I,i,jb),I.prototype.getInteractiveGuideline=function(){return J.interactiveGuideline()},I.prototype.getStackedArea=function(){return J.models.stackedArea()},I.prototype.wrapper=function(a){i.prototype.wrapper.call(this,a,["nv-stackedWrap","nv-controlsWrap","nv-interactive"]),this.renderWatch=J.utils.renderWatch(this.dispatch,this.duration()),this.showXAxis()&&this.renderWatch.models(this.xAxis()),this.showYAxis()&&this.renderWatch.models(this.yAxis())},I.prototype.draw=function(a){var b=this,c=this.available.width,d=this.available.height;if(this.xScale(this.stacked.xScale()),this.yScale(this.stacked.yScale()),this.x(this.stacked.x()),this.y(this.stacked.y()),this.showControls()){var e=[{key:this.controlLabels().stacked||"Stacked",metaKey:"Stacked",disabled:"stack"!=this.stacked.style(),style:"stack"},{key:this.controlLabels().stream||"Stream",metaKey:"Stream",disabled:"stream"!=this.stacked.style(),style:"stream"},{key:this.controlLabels().expanded||"Expanded",metaKey:"Expanded",disabled:"expand"!=this.stacked.style(),style:"expand"},{key:this.controlLabels().stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:"stack_percent"!=this.stacked.style(),style:"stack_percent"}];this.controlWidth(this.cData().length/3*260),e=e.filter(function(a){return-1!==b.cData().indexOf(a.metaKey)}),this.controls.width(this.controlWidth()).color(["#444","#444","#444"]),this.g.select(".nv-controlsWrap").datum(e).call(this.controls),this.margin().top!=Math.max(this.controls.height(),this.legend.height())&&(this.margin().top=Math.max(this.controls.height(),this.legend.height()),d=(this.height()||parseInt(this.svg.style("height"))||400)-this.margin().top-this.margin().bottom),this.g.select(".nv-controlsWrap").attr("transform","translate(0,"+-this.margin().top+")")}this.useInteractiveGuideline()&&(this.interactiveLayer.width(c).height(d).margin({left:this.margin().left,top:this.margin().top}).svgContainer(this.svg).xScale(this.xScale()),this.wrap.select(".nv-interactive").call(this.interactiveLayer)),this.stacked.margin({top:0,right:0,bottom:0,left:0}).width(c).height(d);
var f=this.g.select(".nv-stackedWrap").datum(a);f.transition().call(this.stacked),this.plotAxes(a)},I.prototype.attachEvents=function(){i.prototype.attachEvents.call(this);var a=null,c=this;this.svg.call(function(b){b.each(function(b){a=b})}),this.dispatch.on("tooltipShow",function(a){c.tooltips()&&c.showTooltip(a,c.parentNode)}).on("changeState",function(b){"undefined"!=typeof b.disabled&&a.length===b.disabled.length&&(a.forEach(function(a,c){a.disabled=b.disabled[c]}),c.state.disabled=b.disabled),"undefined"!=typeof b.style&&c.stacked.style(b.style),c.update()}).on("tooltipHide",function(){c.tooltips()&&J.tooltip.cleanup()}),this.legend.dispatch.on("stateChange",function(a){c.state.disabled=a.disabled,c.dispatch.stateChange(c.state),c.update()}),this.controls.dispatch.on("legendClick",function(a){a.disabled&&(c.controlsData(c.controlsData().map(function(a){return a.disabled=!0,a})),a.disabled=!1,c.stacked.style(a.style),c.state.style=c.stacked.style(),c.dispatch.stateChange(c.state),c.update())}),this.interactiveLayer.dispatch.on("elementMousemove",function(d){c.stacked.clearHighlights();var e,f,g,h=[];if(a.filter(function(a,b){return a.seriesIndex=b,!a.disabled}).forEach(function(a,b){f=J.interactiveBisect(a.values,d.pointXValue,c.x()),c.stacked.highlightPoint(b,f,!0);var i=a.values[f];if("undefined"!=typeof i){"undefined"==typeof e&&(e=i),"undefined"==typeof g&&(g=c.xScale()(c.x()(i,f)));var j="expand"==c.stacked.style()?i.display.y:c.y()(i,f);h.push({key:a.key,value:j,color:c.color()(a,a.seriesIndex),stackedValue:i.display})}}),h.reverse(),h.length>2){var i=c.yScale().invert(d.mouseY),j=null;h.forEach(function(a,b){i=Math.abs(i);var c=Math.abs(a.stackedValue.y0),d=Math.abs(a.stackedValue.y);return i>=c&&d+c>=i?void(j=b):void 0}),null!=j&&(h[j].highlight=!0)}var k=c.xAxis.tickFormat()(c.x()(e,f)),l="expand"==c.stacked.style()?function(a){return b.format(".1%")(a)}:function(a){return c.yAxis.tickFormat()(a)};c.interactiveLayer.tooltip.position({left:g+c.margin().left,top:d.mouseY+c.margin().top}).chartContainer(c.parentNode).enabled(c.tooltips()).valueFormatter(l).data({value:k,series:h})(),c.interactiveLayer.renderGuideLine(g)}).on("elementMouseout",function(){c.dispatch.tooltipHide(),c.stacked.clearHighlights()}),this.stacked.dispatch.on("tooltipShow",function(a){a.pos=[a.pos[0]+c.margin().left,a.pos[1]+c.margin().top],c.dispatch.tooltipShow(a)}).on("tooltipHide",function(a){c.dispatch.tooltipHide(a)}).on("areaClick.toggle",function(b){a.forEach(1===a.filter(function(a){return!a.disabled}).length?function(a){a.disabled=!1}:function(a,c){a.disabled=c!=b.seriesIndex}),c.state.disabled=a.map(function(a){return!!a.disabled}),c.dispatch.stateChange(c.state),c.update()})},I.prototype.showTooltip=function(a,b){var c=a.pos[0]+(b.offsetLeft||0),d=a.pos[1]+(b.offsetTop||0),e=this.xAxis.tickFormat()(this.stacked.x()(a.point,a.pointIndex)),f=this.yAxis.tickFormat()(this.stacked.y()(a.point,a.pointIndex)),g=this.tooltip()(a.series.key,e,f);J.tooltip.show([c,d],g,a.value<0?"n":"s",null,b)},I.prototype.color=function(a){return arguments.length?(this.options.color=J.utils.getColor(a),this.legend.color(this.color()),this.stacked.color(this.color()),this):this.options.color},I.prototype.rightAlignYAxis=function(a){return arguments.length?(this.options.rightAlignYAxis=a,this.yAxis.orient(a?"right":"left"),this):this.options.rightAlignYAxis},I.prototype.useInteractiveGuideline=function(a){return arguments.length?(this.options.useInteractiveGuideline=a,a===!0&&(this.interactive(!1),this.useVoronoi(!1)),this):this.options.useInteractiveGuideline},I.prototype.controlsData=function(a){return arguments.length?(this.cData(a),this):this.cData()},I.prototype.controlLabels=function(a){return arguments.length&&"object"==typeof a?(this.options.controlLabels=a,this):this.options.controlLabels},I.prototype.duration=function(a){return arguments.length?(this.options.duration=a,this.renderWatch.reset(a),this.xAxis.duration(a),this.yAxis.duration(a),this):this.options.duration},J.models.stackedAreaChart=function(){"use strict";function a(b){return c.render(b),a}var c=new I;return a.dispatch=c.dispatch,a.stacked=c.stacked,a.controls=c.controls,a.interactiveLayer=c.interactiveLayer,a.state=c.state,b.rebind(a,c.stacked,"x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","sizeDomain","interactive","useVoronoi","offset","order","style","clipEdge","forceX","forceY","forceSize","interpolate"),a.options=J.utils.optionsFunc.bind(a),J.utils.rebindp(a,c,I.prototype,"margin","width","height","state","defaultState","noData","showControls","showLegend","showXAxis","showYAxis","tooltip","tooltips","color","rightAlignYAxis","useInteractiveGuideline","tooltipContent","transitionDuration","controlsData","controlLabels","tickFormat","duration","xAxis","yAxis"),a},a=J,J});